(function(x,V){typeof exports=="object"&&typeof module<"u"?V(exports,require("mitt"),require("vue"),require("ajv"),require("element-plus")):typeof define=="function"&&define.amd?define(["exports","mitt","vue","ajv","element-plus"],V):(x=typeof globalThis<"u"?globalThis:x||self,V(x.lib={},x.mitt,x.Vue,x.Ajv,x["element-plus"]))})(this,function(x,V,t,H,_){"use strict";var At=Object.defineProperty;var Tt=(x,V,t)=>V in x?At(x,V,{enumerable:!0,configurable:!0,writable:!0,value:t}):x[V]=t;var b=(x,V,t)=>(Tt(x,typeof V!="symbol"?V+"":V,t),t);const A=n=>n&&typeof n=="object"&&"default"in n?n:{default:n},W=A(V),K=A(H);function $(n){return n.config.globalProperties.emitter}var N=(n=>(n.Object="object",n.Array="array",n.Boolean="boolean",n.Integer="integer",n))(N||{});function D(n){const e=[],r="slotName";return n&&!n.type&&(n.type=N.Object),M(n,e,r),{slotsName:e}}function M(n,e,r){switch(n.type){case N.Object:Object.keys(n.properties).forEach(l=>{const o=n.properties[l];M(o,e,r)});break;case N.Array:Object.keys(n.items.properties).forEach(l=>{const o=n.items.properties[l];M(o,e,r)});break;default:if(n.ui){const l=Object.keys(n.ui).filter(o=>o.startsWith(r));l&&l.length>0&&l.forEach(o=>{e.push(n.ui[o])})}break}}function J(){return{visibleIf:Y}}function Y(n,e,r,l){if(!e.ui||!e.ui.visibleIf)return r;const o=Object.keys(e.ui.visibleIf)[0],i=e.ui.visibleIf[o];return l=l||{},typeof i!="function"||o!==l.id?r:i.call(null,n,l.id,l.value)}const T="form-value-change",F="form-error-change",z=t.defineComponent({__name:"ElFormlyItem",props:{id:null,show:{type:Boolean,default:!0},meta:null},setup(n){const e=n;let r=t.ref(!0);const{slotsName:l}=D(e.meta),o=t.inject("state"),i=t.computed(()=>`v-${e.meta.ui&&e.meta.ui.component||e.meta.type}`),a=t.computed(()=>o.layout);f();function f(){if(!e.meta.type)throw new Error("Form item type must be one of these: number, string, boolean, array, object");r.value=e.show,u(r.value,e.id);const{visibleIf:c}=J(),{appContext:s}=t.getCurrentInstance();$(s).on(`${T}-${o._formId}`,m=>{let p=c(o.context,e.meta,r.value,{id:m.id,value:m.value});p!==r.value&&(r.value=p,u(r.value,e.id))})}function u(c,s){c?o._ignoreErrorIds=o._ignoreErrorIds.filter(d=>d!==s):o._ignoreErrorIds.indexOf(s)===-1&&o._ignoreErrorIds.push(s)}return(c,s)=>(t.openBlock(),t.createElementBlock("div",{style:t.normalizeStyle({display:t.unref(a)==="inline"?"inline-block":"block"})},[t.unref(r)?(t.openBlock(),t.createBlock(t.resolveDynamicComponent(t.unref(i)),{key:0,id:n.id,meta:n.meta},t.createSlots({_:2},[t.renderList(t.unref(l),d=>({name:d,fn:t.withCtx(m=>[t.renderSlot(c.$slots,d,t.normalizeProps(t.guardReactiveProps({...m})))])}))]),1032,["id","meta"])):t.createCommentVNode("",!0)],4))}});class Q{constructor(){b(this,"_map",new Map)}addContext(e,r){this._map.set(e,r)}removeContext(e){this._map.delete(e)}getContext(e){return this._map.get(e)}getContexts(){return this._map}getMap(){return this._map}}function X(n=8,e=10){const r="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),l=e||r.length,o=[];if(n)for(let i=0;i<n;i++)o[i]=r[0|Math.random()*l];else{let i;o[8]=o[13]=o[18]=o[23]="-",o[14]="4";for(let a=0;a<36;a++)o[a]||(i=0|Math.random()*16,o[a]=r[a==19?i&3|8:i])}return o.join("")}const Z=Array.isArray,v=n=>typeof n=="function",L=n=>typeof n=="number";function U(){const{appContext:n}=t.getCurrentInstance(),e=n.config.globalProperties;return{appContext:n,globalProperties:e}}class tt{constructor(){b(this,"_formId",X(4));b(this,"_ignoreErrorIds",[]);b(this,"_context");b(this,"_layout",t.ref("horizontal"));b(this,"_ajvOptions",{allErrors:!0,strict:!1,loopEnum:50});b(this,"_formData",t.ref({}));b(this,"_meta",{});b(this,"_ui",{ingoreKeywords:["type","enum"],spanLabel:5,spanControl:19,grid:{gutter:36,span:24},errors:{required:"\u5FC5\u586B\u9879"}});b(this,"_validate");this._applyUseOptions()}get context(){return this._context}set context(e){this._context=e}get layout(){return this._layout}set layout(e){this._layout=e}get ajvOptions(){return this._ajvOptions}set ajvOptions(e){this._ajvOptions=e}get formData(){return this._formData.value}set formData(e){this._formData.value=e}get meta(){return this._meta}set meta(e){this._meta=e}get ui(){return this._ui}set ui(e){this._ui=Object.assign({},this._ui,e)}get validate(){return this._validate}set validate(e){this._validate=e}updateObjProp(e,r,l){const[o,...i]=r.split("/").filter(a=>a);i.length?this.updateObjProp(e[o],i.join("/"),l):e&&(e[o]=l)}_applyUseOptions(){const{globalProperties:e}=U(),r=e.$VFORMLY_OPTIONS;!r||typeof r!="object"||(this.ui=r.ui)}}class et{constructor(e,r){b(this,"state");b(this,"_ajv");b(this,"_validate");b(this,"appContext");this.state=r,this._ajv=new K.default(r.ajvOptions),this._validate=null,this.appContext=e}async runValidateForm(){const{valid:e,errors:r}=this._isAjvValid(),o=this.state.context.getContexts().values();let i=!0;for(const a of o)i=await this._validation(a,e,r)&&i;return i}async runValidationFormItem(e){const{valid:r,errors:l}=this._isAjvValid();return await this._validation(e,r,l)}_ajvValidate(e){return this._validate?this._validate:(this._validate=this._ajv.compile(e),this._validate)}_getAjvError(e,r){let l;for(let o=0;o<r.length;o++){const i=r[o],a=this._getId(i);if(e===a){l=i;break}}return l}_isAjvValid(){const e=this._ajvValidate(this.state.meta);return{valid:e(this.state.formData||{}),errors:e.errors}}async _validation(e,r,l){let o=[];const i=`${F}-${this.state._formId}`,a=$(this.appContext);if(r)return a.emit(i,{id:e.id,error:void 0}),!0;{const f=this._getCustomError(e),u=await this._getCustomAsyncError(e),c=[...f,...u];this._replaceWithDefaultErrors(e,l),this._replaceWithCustomErrors(e.id,l,c);const s=this.state.ui.ingoreKeywords||[];o=l.filter(m=>s.indexOf(m.keyword)===-1),o=this._removeIgnoreErrors(o);const d=this._getAjvError(e.id,o);return a.emit(i,{id:e.id,error:d}),!d}}_getCustomError(e){var l,o;const r=(o=(l=e.ui)==null?void 0:l.value)==null?void 0:o.validator;return r?r(e.value):[]}async _getCustomAsyncError(e){var l,o;const r=(o=(l=e.ui)==null?void 0:l.value)==null?void 0:o.validatorAsync;return r?await r(e.value):[]}_replaceWithDefaultErrors(e,r){var a,f;if(!r||r.length===0)return;const l=((f=(a=e.ui)==null?void 0:a.value)==null?void 0:f.errors)||{},o=Object.assign({},this.state.ui.errors,l),i=Object.keys(o);i&&i.length>0&&r.forEach(u=>{i.indexOf(u.keyword)>-1&&(u.message=o[u.keyword])})}_replaceWithCustomErrors(e,r,l){l.forEach(o=>{const i=r.find(a=>a.keyword===o.keyword&&this._getId(a)===e);i&&(i.message=o.message)})}_removeIgnoreErrors(e){const r=this.state._ignoreErrorIds;return!r||r.length===0?e:e.filter(o=>r.indexOf(this._getId(o))===-1)}_getId(e){return e.params&&e.params.missingProperty?`${e.instancePath?e.instancePath:""}/${e.params.missingProperty}`:`${e.instancePath}`}}const nt={class:"v__formly"},ot={name:"v-formly-v3"},at=t.defineComponent({...ot,props:{modelValue:null,layout:{default:"horizontal"},button:null,meta:null},emits:["update:modelValue","form-reset","form-submit"],setup(n,{expose:e,emit:r}){const l=n;if(!l.meta||typeof l.meta.properties>"u")throw new Error("Invalid Schema");let o={type:N.Object},i=t.ref(!1);const a=new tt;t.provide("state",a);const{slotsName:f}=D(l.meta),{appContext:u}=t.getCurrentInstance(),c=$(u);d();const s=t.computed(()=>l.layout==="inline");t.watch(()=>l.modelValue,(g,E)=>{JSON.stringify(g)!==JSON.stringify(E)&&y(g)},{deep:!1}),t.watch(()=>a.formData,(g,E)=>{r("update:modelValue",g)},{deep:!0});function d(){a.layout=t.toRef(l,"layout"),o=Object.assign({},o,l.meta),a.meta=o,a.formData=Object.assign({},l.modelValue),m(a.formData,l.meta.properties),a.context=new Q,a.validate=new et(u,a)}function m(g,E){Object.keys(E).forEach(j=>{const R=E[j];if(R.type!=="null")switch(R.type){case N.Object:g[j]=g[j]||{},m(g[j],R.properties);break;case N.Array:g[j]=g[j]||[];break;case N.Boolean:break;default:g[j]=g[j]||void 0;break}})}function p(g){return a.context.getContext(g)}async function h(){return await a.validate.runValidateForm()}function y(g){const E=a.context.getContext("/");E&&(E.value=g,r("update:modelValue",a.formData))}function C(){r("form-reset",t.toRaw(a.formData)),y({})}async function B(){i.value=!0;const g=await h();i.value=!1,r("form-submit",{valid:g,data:g?t.toRaw(a.formData):void 0})}return t.onBeforeUnmount(()=>{c.all.clear()}),e({getContext:p,validate:h,reset:y,clearForm:C,submitForm:B}),(g,E)=>{const j=t.resolveComponent("el-button"),R=t.resolveComponent("el-space"),Dt=t.resolveComponent("el-form-item"),Mt=t.resolveComponent("el-form");return t.openBlock(),t.createElementBlock("div",nt,[t.createVNode(Mt,{class:t.normalizeClass(["v",{v__inline:t.unref(s),v__horizontal:n.layout==="horizontal"}]),inline:t.unref(s),"label-width":t.unref(s)?null:"120px","label-position":n.layout==="vertical"?"top":"right"},{default:t.withCtx(()=>[t.createVNode(z,{id:"/",meta:t.unref(o)},t.createSlots({_:2},[t.renderList(t.unref(f),G=>({name:G,fn:t.withCtx(Ft=>[t.renderSlot(g.$slots,G,t.normalizeProps(t.guardReactiveProps({...Ft})))])}))]),1032,["meta"]),n.button==="default"?(t.openBlock(),t.createBlock(Dt,{key:0,class:"v__default-submit-button"},{default:t.withCtx(()=>[t.createVNode(R,null,{default:t.withCtx(()=>[t.createVNode(j,{type:"danger",onClick:C},{default:t.withCtx(()=>[t.createTextVNode(" \u91CD\u7F6E ")]),_:1}),t.createVNode(j,{type:"primary",onClick:B,loading:t.unref(i)},{default:t.withCtx(()=>[t.createTextVNode(" \u63D0\u4EA4 ")]),_:1},8,["loading"])]),_:1})]),_:1})):n.button==="custom"?t.renderSlot(g.$slots,"button",{key:1,loading:t.unref(i),clearForm:C,submitForm:B}):(t.openBlock(),t.createElementBlock(t.Fragment,{key:2},[],64))]),_:3},8,["inline","label-width","label-position","class"])])}}}),rt=["title"],lt={key:0,class:"v__optional"},it=["innerHTML"],st={name:"v-wrapper"},ct=t.defineComponent({...st,props:{id:null,show:{type:Boolean},meta:null},setup(n){const e=n,{globalProperties:r}=U(),l=t.inject("state"),o=l.context.getContext(e.id),i=t.computed(()=>Object.assign({},l.ui,e.meta.ui)),a=t.computed(()=>Object.assign({},l.ui,e.meta.ui).optionalHelp),f=t.computed({get(){return o.error.value},set(d){o.error.value=d}}),{appContext:u}=t.getCurrentInstance(),c=$(u);c.on(`${F}-${l._formId}`,s),t.onBeforeUnmount(()=>{c.off(`${F}-${l._formId}`,s)});function s(d){d.id===e.id&&(f.value=d.error?d.error.message:void 0)}return(d,m)=>{const p=t.resolveComponent("el-icon"),h=t.resolveComponent("el-tooltip"),y=t.resolveComponent("el-form-item");return t.openBlock(),t.createBlock(y,{required:t.unref(i).showRequired,error:t.unref(f),size:t.unref(i).size,class:t.normalizeClass([{"no-label":!n.meta.title}])},t.createSlots({default:t.withCtx(()=>[t.renderSlot(d.$slots,"default",{},void 0,!0),n.meta.description?(t.openBlock(),t.createElementBlock("div",{key:0,innerHTML:n.meta.description},null,8,it)):t.createCommentVNode("",!0)]),_:2},[n.meta.title?{name:"label",fn:t.withCtx(()=>[t.createElementVNode("span",{class:"v__label-text",title:n.meta.title},t.toDisplayString(n.meta.title),9,rt),t.unref(i).optional||t.unref(a)?(t.openBlock(),t.createElementBlock("span",lt,[t.createTextVNode(t.toDisplayString(t.unref(i).optional)+" ",1),t.unref(a).icon?(t.openBlock(),t.createBlock(h,t.mergeProps({key:0},t.unref(a),{placement:t.unref(a).placement||"top"}),{default:t.withCtx(()=>[t.createVNode(p,null,{default:t.withCtx(()=>[(t.openBlock(),t.createBlock(t.resolveDynamicComponent(t.unref(r).$elIcons[t.unref(a).icon])))]),_:1})]),_:1},16,["placement"])):t.createCommentVNode("",!0)])):t.createCommentVNode("",!0)]),key:"0"}:void 0]),1032,["required","error","size","class"])}}}),zt="",q=(n,e)=>{const r=n.__vccOpts||n;for(const[l,o]of e)r[l]=o;return r},w=q(ct,[["__scopeId","data-v-fd574d86"]]);class S{constructor(e,r,l,o){b(this,"id");b(this,"state");b(this,"meta",t.ref({}));b(this,"type");b(this,"ui",t.ref({}));b(this,"error",t.ref(void 0));b(this,"_value",t.ref());b(this,"_initMetaValue");b(this,"appContext");if(this.constructor==S)throw new Error("Abstract classes can't be instantiated.");this.id=l,this.state=r,this.meta.value=o,this.type=o.ui&&o.ui.component||o.type,this.ui.value=Object.assign({},r.ui,o.ui),this.appContext=e,this.error.value=void 0,r.context.addContext(l,this),this._value.value=void 0,this._initMetaValue=this.getInitMetaValue()}get value(){return this._value.value}set value(e){if(this._value.value===e)return;this.setValue(e),$(this.appContext).emit(`${T}-${this.state._formId}`,{id:this.id,value:this._value.value}),this.state.updateObjProp(this.state.formData,this.id,this._value.value),this.state.validate.runValidationFormItem(this)}getInitMetaValue(){const e=this.id.split("/").filter(l=>l);let r="";return e.reduce((l,o,i)=>(i===e.length-1&&(r=l[o]),l[o]||{}),this.state.formData),r}}class dt extends S{constructor(r,l,o,i){super(r,l,o,i);b(this,"childMetaPairs");this.childMetaPairs=this.buildChildMetaPairs(o,i),l.context.addContext(o,this)}initValue(){}setValue(){}set value(r){this.childMetaPairs.forEach(({key:l,propertyName:o})=>{const i=this.state.context.getContext(l);i&&(i.value=(r||{})[o])})}buildChildMetaPairs(r,l){const o=[];for(const i of Object.keys(l.properties||{})){const a=r==="/"?`/${i}`:`${r}/${i}`;o.push({key:a,propertyName:i,meta:l.properties[i]})}return o}}const ft=t.defineComponent({__name:"Object",props:{id:null,meta:null},setup(n){const e=n,{slotsName:r}=D(e.meta),l=t.inject("state"),{appContext:o}=t.getCurrentInstance(),i=new dt(o,l,e.id,e.meta),a=t.computed(()=>i.ui.value||{}),f=t.computed(()=>u.value==="inline"?0:Object.assign({},l.ui.grid,a.value.grid).gutter),u=t.computed(()=>l.layout.value);function c(m){return m.ui&&m.ui.show}function s(m){if(u.value==="inline")return{span:null};const p=m.meta.ui&&m.meta.ui.grid||{};return Object.assign({},l.ui.grid,a.value.grid,p)}const d=i.childMetaPairs;return(m,p)=>{const h=t.resolveComponent("el-col"),y=t.resolveComponent("el-row");return t.openBlock(),t.createBlock(y,{gutter:t.unref(f)},{default:t.withCtx(()=>[(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(t.unref(d),(C,B)=>(t.openBlock(),t.createBlock(h,{key:B,span:s(C).span,offset:s(C).offset,xs:s(C).xs,sm:s(C).sm,md:s(C).md,lg:s(C).lg,xl:s(C).xl,xxl:s(C).xxl,style:t.normalizeStyle({display:t.unref(u)==="inline"?"inline-block":"block"})},{default:t.withCtx(()=>[t.createVNode(z,{id:C.key,meta:C.meta,show:c(C.meta)},t.createSlots({_:2},[t.renderList(t.unref(r),g=>({name:g,fn:t.withCtx(E=>[t.renderSlot(m.$slots,g,t.normalizeProps(t.guardReactiveProps({...E})))])}))]),1032,["id","meta","show"])]),_:2},1032,["span","offset","xs","sm","md","lg","xl","xxl","style"]))),128))]),_:3},8,["gutter"])}}});class I extends S{constructor(r,l,o,i){var a;super(r,l,o,i);b(this,"open");this.initValue(),this.meta.value&&(this.open=((a=this.meta.value.ui)==null?void 0:a.open)||!1)}initValue(){this._initMetaValue?this.value=this._initMetaValue:this.meta.value.default&&(this.value=this.meta.value.default)}setValue(r){this._value.value=r||void 0}}function O(n,e){const r=t.ref({});return Object.keys(e.value).forEach(o=>{n.indexOf(o)>-1&&(r.value[o]=t.toRef(e.value,o))}),{bindings:r}}const mt=t.defineComponent({__name:"String",props:{id:null,meta:null},setup(n){const e=n,r=t.inject("state"),{appContext:l}=t.getCurrentInstance(),o=new I(l,r,e.id,e.meta),{bindings:i}=O(Object.keys(_.ElInput.props),o.ui),a=t.computed(()=>o.ui.value||{}),f=t.computed({get(){return o.value},set(c){o.value=c}});function u(c){a.value.change&&a.value.change(c)}return(c,s)=>(t.openBlock(),t.createBlock(w,{id:n.id,meta:n.meta},{default:t.withCtx(()=>[t.createVNode(t.unref(_.ElInput),t.mergeProps(t.unref(i),{disabled:n.meta.readOnly,minlength:n.meta.minLength,maxlength:n.meta.maxLength,modelValue:t.unref(f),"onUpdate:modelValue":s[0]||(s[0]=d=>t.isRef(f)?f.value=d:null),onChange:u}),t.createSlots({_:2},[t.unref(a).slotNameOfPrefix?{name:"prefix",fn:t.withCtx(()=>[t.renderSlot(c.$slots,t.unref(a).slotNameOfPrefix)]),key:"0"}:void 0,t.unref(a).slotNameOfSuffix?{name:"suffix",fn:t.withCtx(()=>[t.renderSlot(c.$slots,t.unref(a).slotNameOfSuffix)]),key:"1"}:void 0,t.unref(a).slotNameOfPrepend?{name:"prepend",fn:t.withCtx(()=>[t.renderSlot(c.$slots,t.unref(a).slotNameOfPrepend)]),key:"2"}:void 0,t.unref(a).slotNameOfAppend?{name:"append",fn:t.withCtx(()=>[t.renderSlot(c.$slots,t.unref(a).slotNameOfAppend)]),key:"3"}:void 0]),1040,["disabled","minlength","maxlength","modelValue"])]),_:3},8,["id","meta"]))}});class ut extends S{constructor(e,r,l,o){super(e,r,l,o),this.initValue()}initValue(){typeof this._initMetaValue<"u"?this.value=this._initMetaValue:typeof this.meta.value.default=="boolean"&&(this.value=this.meta.value.default)}setValue(e){this._value.value=e||!1}}const pt=t.defineComponent({__name:"Boolean",props:{id:null,meta:null},setup(n){const e=n,r=t.inject("state"),{appContext:l}=t.getCurrentInstance(),o=new ut(l,r,e.id,e.meta),{bindings:i}=O(Object.keys(_.ElSwitch.props),o.ui),a=t.computed(()=>o.ui.value||{});i.value.style=t.toRef(a.value,"style");const f=t.computed({get(){return o.value},set(c){o.value=c||!1}});function u(c){a.value.change&&a.value.change(c)}return(c,s)=>(t.openBlock(),t.createBlock(w,{id:n.id,meta:n.meta},{default:t.withCtx(()=>[t.createVNode(t.unref(_.ElSwitch),t.mergeProps({class:"v__boolean",modelValue:t.unref(f),"onUpdate:modelValue":s[0]||(s[0]=d=>t.isRef(f)?f.value=d:null)},t.unref(i),{disabled:n.meta.readOnly,onChange:u}),null,16,["modelValue","disabled"])]),_:1},8,["id","meta"]))}}),ht=t.defineComponent({__name:"AutoComplete",props:{id:null,meta:null},setup(n){const e=n,r=t.inject("state"),{appContext:l}=t.getCurrentInstance(),o=new I(l,r,e.id,e.meta),{bindings:i}=O(Object.keys(_.ElAutocomplete.props),o.ui),a=t.computed(()=>o.ui.value||{}),f=t.computed({get(){return o.value},set(s){o.value=s||void 0}});function u(s){a.value.change&&a.value.change(t.unref(s))}function c(s){a.value.select&&a.value.select(s)}return(s,d)=>(t.openBlock(),t.createBlock(w,{id:n.id,meta:n.meta},{default:t.withCtx(()=>[t.createVNode(t.unref(_.ElAutocomplete),t.mergeProps(t.unref(i),{disabled:n.meta.readOnly,modelValue:t.unref(f),"onUpdate:modelValue":d[0]||(d[0]=m=>t.isRef(f)?f.value=m:null),onChange:u,onSelect:c}),t.createSlots({_:2},[t.unref(a).slotNameOfPrefix?{name:"prefix",fn:t.withCtx(()=>[t.renderSlot(s.$slots,t.unref(a).slotNameOfPrefix)]),key:"0"}:void 0,t.unref(a).slotNameOfSuffix?{name:"suffix",fn:t.withCtx(()=>[t.renderSlot(s.$slots,t.unref(a).slotNameOfSuffix)]),key:"1"}:void 0,t.unref(a).slotNameOfPrepend?{name:"prepend",fn:t.withCtx(()=>[t.renderSlot(s.$slots,t.unref(a).slotNameOfPrepend)]),key:"2"}:void 0,t.unref(a).slotNameOfAppend?{name:"append",fn:t.withCtx(()=>[t.renderSlot(s.$slots,t.unref(a).slotNameOfAppend)]),key:"3"}:void 0,t.unref(a).slotNameOfDefault?{name:"default",fn:t.withCtx(m=>[t.renderSlot(s.$slots,t.unref(a).slotNameOfDefault,t.normalizeProps(t.guardReactiveProps(m)))]),key:"4"}:void 0]),1040,["disabled","modelValue"])]),_:3},8,["id","meta"]))}}),gt=t.defineComponent({__name:"Checkbox",props:{id:null,meta:null},setup(n){const e=n,r=t.inject("state"),{appContext:l}=t.getCurrentInstance(),o=new I(l,r,e.id,e.meta),i=t.computed(()=>o.ui.value||{});let a=t.ref();if(i.value.group){const{bindings:c}=O(Object.keys(_.ElCheckboxGroup.props),o.ui);a.value=c.value}else{const{bindings:c}=O(Object.keys(_.ElCheckbox.props),o.ui);a.value=c.value}const f=t.computed({get(){return o.value},set(c){o.value=c}});function u(c){i.value.change&&i.value.change(c)}return(c,s)=>{const d=t.resolveComponent("el-checkbox-button");return t.openBlock(),t.createBlock(w,{id:n.id,meta:n.meta},{default:t.withCtx(()=>[t.unref(i).group?(t.openBlock(),t.createBlock(t.unref(_.ElCheckboxGroup),t.mergeProps({key:0,class:"v__checkbox",modelValue:t.unref(f),"onUpdate:modelValue":s[0]||(s[0]=m=>t.isRef(f)?f.value=m:null)},t.unref(a),{disabled:n.meta.readOnly,onChange:u}),{default:t.withCtx(()=>[t.unref(i).button?(t.openBlock(!0),t.createElementBlock(t.Fragment,{key:0},t.renderList(t.unref(i).options,(m,p)=>(t.openBlock(),t.createBlock(d,{key:p,label:m.label},{default:t.withCtx(()=>[t.createTextVNode(t.toDisplayString(m.label),1)]),_:2},1032,["label"]))),128)):(t.openBlock(!0),t.createElementBlock(t.Fragment,{key:1},t.renderList(t.unref(i).options,(m,p)=>(t.openBlock(),t.createBlock(t.unref(_.ElCheckbox),{key:p,label:m.label,disabled:m.disabled},{default:t.withCtx(()=>[t.createTextVNode(t.toDisplayString(m.label),1)]),_:2},1032,["label","disabled"]))),128))]),_:1},16,["modelValue","disabled"])):(t.openBlock(),t.createBlock(t.unref(_.ElCheckbox),t.mergeProps({key:1,class:"v__checkbox",modelValue:t.unref(f),"onUpdate:modelValue":s[1]||(s[1]=m=>t.isRef(f)?f.value=m:null)},t.unref(a),{disabled:n.meta.readOnly,onChange:u}),null,16,["modelValue","disabled"]))]),_:1},8,["id","meta"])}}}),bt=t.defineComponent({__name:"Date",props:{id:null,meta:null},setup(n){const e=n,r=t.inject("state"),{appContext:l}=t.getCurrentInstance(),o=new I(l,r,e.id,e.meta),{bindings:i}=O(Object.keys(_.ElDatePicker.props),o.ui),a=t.computed(()=>o.ui.value||{}),f=t.computed({get(){return o.value},set(c){o.value=c}});function u(c){a.value.change&&a.value.change(c)}return(c,s)=>(t.openBlock(),t.createBlock(w,{id:n.id,meta:n.meta},{default:t.withCtx(()=>[t.createVNode(t.unref(_.ElDatePicker),t.mergeProps({modelValue:t.unref(f),"onUpdate:modelValue":s[0]||(s[0]=d=>t.isRef(f)?f.value=d:null)},t.unref(i),{disabled:n.meta.readOnly,onChange:u}),t.createSlots({_:2},[t.unref(a).slotNameOfRangeSeparator?{name:"range-separator",fn:t.withCtx(()=>[t.renderSlot(c.$slots,t.unref(a).slotNameOfRangeSeparator)]),key:"0"}:void 0,t.unref(a).slotNameOfDefault?{name:"default",fn:t.withCtx(d=>[t.renderSlot(c.$slots,t.unref(a).slotNameOfDefault,t.normalizeProps(t.guardReactiveProps(d)))]),key:"1"}:void 0]),1040,["modelValue","disabled"])]),_:3},8,["id","meta"]))}}),_t=t.defineComponent({__name:"Time",props:{id:null,meta:null},setup(n){const e=n,r=t.inject("state"),{appContext:l}=t.getCurrentInstance(),o=new I(l,r,e.id,e.meta),{bindings:i}=O(Object.keys(_.ElTimePicker.props),o.ui),a=t.computed(()=>o.ui.value||{}),f=t.computed({get(){return o.value},set(c){o.value=c}});function u(c){a.value.change&&a.value.change(c)}return(c,s)=>(t.openBlock(),t.createBlock(w,{id:n.id,meta:n.meta},{default:t.withCtx(()=>[t.createVNode(t.unref(_.ElTimePicker),t.mergeProps({class:"v__time",modelValue:t.unref(f),"onUpdate:modelValue":s[0]||(s[0]=d=>t.isRef(f)?f.value=d:null)},t.unref(i),{disabled:n.meta.readOnly,onChange:u}),null,16,["modelValue","disabled"])]),_:1},8,["id","meta"]))}});class P extends S{constructor(e,r,l,o){super(e,r,l,o),this.initValue()}initValue(){this._initMetaValue?this.value=this._initMetaValue:t.unref(this.meta).default&&(this.value=t.unref(this.meta).default)}setValue(e){switch(this.type){case"slider":this._value.value=Z(e)||L(e)?e:void 0;break;default:this._value.value=e||void 0;break}}}const Ct=t.defineComponent({__name:"Number",props:{id:null,meta:null},setup(n){const e=n,r=t.inject("state"),{appContext:l}=t.getCurrentInstance(),o=new P(l,r,e.id,e.meta),{bindings:i}=O(Object.keys(_.ElInputNumber.props),o.ui),a=t.computed(()=>o.ui.value||{}),f=t.computed({get(){return o.value},set(c){o.value=c}});function u(c,s){a.value.change&&a.value.change(c,s)}return(c,s)=>(t.openBlock(),t.createBlock(w,{id:n.id,meta:n.meta},{default:t.withCtx(()=>[t.createVNode(t.unref(_.ElInputNumber),t.mergeProps({class:"v__number",modelValue:t.unref(f),"onUpdate:modelValue":s[0]||(s[0]=d=>t.isRef(f)?f.value=d:null)},t.unref(i),{disabled:n.meta.readOnly,min:n.meta.minimum,max:n.meta.maximum,onChange:u}),null,16,["modelValue","disabled","min","max"])]),_:1},8,["id","meta"]))}}),xt={class:"v__label-text"},yt=["innerHTML"],kt=["textContent"],Vt=t.defineComponent({__name:"Text",props:{id:null,meta:null},setup(n){const e=n,r=t.inject("state"),{appContext:l}=t.getCurrentInstance(),o=new I(l,r,e.id,e.meta),i=t.computed(()=>o.ui.value||{}),a=t.computed(()=>v(t.unref(i).text)?t.unref(i).text():t.unref(i).text);return(f,u)=>{const c=t.resolveComponent("el-form-item");return t.openBlock(),t.createElementBlock("div",null,[t.createVNode(c,{class:t.normalizeClass({"no-label":!n.meta.title})},t.createSlots({default:t.withCtx(()=>[t.unref(i).slotNameOfDefault?t.renderSlot(f.$slots,t.unref(i).slotNameOfDefault,{key:0}):(t.openBlock(),t.createElementBlock(t.Fragment,{key:1},[t.unref(i).html?(t.openBlock(),t.createElementBlock("span",{key:0,innerHTML:t.unref(i).html,class:"v__content-text"},null,8,yt)):(t.openBlock(),t.createElementBlock("span",{key:1,textContent:t.toDisplayString(t.unref(a)),class:"v__content-text"},null,8,kt))],64))]),_:2},[n.meta.title?{name:"label",fn:t.withCtx(()=>[t.createElementVNode("span",xt,t.toDisplayString(n.meta.title),1)]),key:"0"}:void 0]),1032,["class"])])}}}),wt=t.defineComponent({__name:"Slider",props:{id:null,meta:null},setup(n){const e=n,r=t.inject("state"),{appContext:l}=t.getCurrentInstance(),o=new P(l,r,e.id,e.meta),{bindings:i}=O(Object.keys(_.ElSlider.props),o.ui),a=t.computed(()=>o.ui.value||{}),f=t.computed({get(){return o.value},set(s){a.value.range?o.value=s||[]:o.value=L(s)?s:void 0}});function u(s){var d,m;(m=(d=t.unref(a)).input)==null||m.call(d,s)}function c(s){var d,m;(m=(d=t.unref(a)).change)==null||m.call(d,s)}return(s,d)=>(t.openBlock(),t.createBlock(w,{id:n.id,meta:n.meta},{default:t.withCtx(()=>[t.createVNode(t.unref(_.ElSlider),t.mergeProps(t.unref(i),{disabled:n.meta.readOnly,min:n.meta.minimum||0,max:n.meta.maximum||100,step:n.meta.multipleOf||1,modelValue:t.unref(f),"onUpdate:modelValue":d[0]||(d[0]=m=>t.isRef(f)?f.value=m:null),onInput:u,onChange:c}),null,16,["disabled","min","max","step","modelValue"])]),_:1},8,["id","meta"]))}}),Ot=t.defineComponent({__name:"Rate",props:{id:null,meta:null},setup(n){const e=n,r=t.inject("state"),{appContext:l}=t.getCurrentInstance(),o=new P(l,r,e.id,e.meta),{bindings:i}=O(Object.keys(_.ElRate.props),o.ui),a=t.computed(()=>o.ui.value||{}),f=t.computed({get(){return o.value},set(c){o.value=c}});function u(c){var s,d;(d=(s=t.unref(a)).change)==null||d.call(s,c)}return(c,s)=>(t.openBlock(),t.createBlock(w,{id:n.id,meta:n.meta},{default:t.withCtx(()=>[t.createVNode(t.unref(_.ElRate),t.mergeProps(t.unref(i),{disabled:n.meta.readOnly,max:n.meta.maximum||5,modelValue:t.unref(f),"onUpdate:modelValue":s[0]||(s[0]=d=>t.isRef(f)?f.value=d:null),onChange:u}),null,16,["disabled","max","modelValue"])]),_:1},8,["id","meta"]))}}),Bt=t.defineComponent({__name:"Tag",props:{id:null,meta:null},setup(n){const e=n,r=t.inject("state"),{appContext:l}=t.getCurrentInstance(),o=new P(l,r,e.id,e.meta),i=t.ref([]),a=t.computed(()=>o.ui.value||{}),f=t.computed({get(){return o.value},set(d){a.value.range?o.value=d||[]:o.value=d}});t.watch(()=>t.unref(o.meta).enum,s,{immediate:!0});function u(d,m){var p,h,y,C;d.disabled||(d.checked=m,c(),(h=(p=t.unref(a)).checkedChange)==null||h.call(p,m),(C=(y=t.unref(a)).change)==null||C.call(y,t.toRaw(t.unref(f))))}function c(){const d=t.unref(i).filter(m=>m.checked).map(m=>m.value);f.value=d.length?d:void 0}function s(d){let m=t.unref(d);m==null||!Array.isArray(m)||m.length===0||(typeof m[0]!="object"&&(m=m.map(p=>({label:p,value:p}))),m.forEach(p=>{p.checked=(f.value||[]).indexOf(p.value)>-1}),m.forEach(p=>p.disabled=e.meta.readOnly),i.value=m)}return(d,m)=>{const p=t.resolveComponent("el-check-tag");return t.openBlock(),t.createBlock(w,{id:n.id,meta:n.meta},{default:t.withCtx(()=>[(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(i.value,h=>(t.openBlock(),t.createBlock(p,{key:h.value,class:t.normalizeClass({disabled:h.disabled}),checked:h.checked,onChange:y=>u(h,y)},{default:t.withCtx(()=>[t.createElementVNode("span",null,t.toDisplayString(h.label),1)]),_:2},1032,["class","checked","onChange"]))),128))]),_:1},8,["id","meta"])}}}),Lt="",Et=q(Bt,[["__scopeId","data-v-19eb1c83"]]),jt=t.defineComponent({__name:"Radio",props:{id:null,meta:null},setup(n){const e=n,r=t.inject("state"),{appContext:l}=t.getCurrentInstance(),o=new I(l,r,e.id,e.meta),{bindings:i}=O(Object.keys(_.ElRadioGroup.props),o.ui),a=t.computed(()=>o.ui.value||{}),f=t.computed({get(){return o.value},set(c){o.value=c}});function u(c){a.value.change&&a.value.change(c)}return(c,s)=>{const d=t.resolveComponent("el-radio-button"),m=t.resolveComponent("el-radio");return t.openBlock(),t.createBlock(w,{id:n.id,meta:n.meta},{default:t.withCtx(()=>[t.createVNode(t.unref(_.ElRadioGroup),t.mergeProps(t.unref(i),{modelValue:t.unref(f),"onUpdate:modelValue":s[0]||(s[0]=p=>t.isRef(f)?f.value=p:null),disabled:n.meta.readOnly,onChange:u}),t.createSlots({default:t.withCtx(()=>[t.unref(a).button?(t.openBlock(!0),t.createElementBlock(t.Fragment,{key:0},t.renderList(t.unref(a).options,(p,h)=>(t.openBlock(),t.createBlock(d,{key:h,label:p.label,size:t.unref(a).size,border:t.unref(a).border,disabled:n.meta.readOnly||p.disabled},{default:t.withCtx(()=>[t.createTextVNode(t.toDisplayString(p.text||p.label),1)]),_:2},1032,["label","size","border","disabled"]))),128)):(t.openBlock(!0),t.createElementBlock(t.Fragment,{key:1},t.renderList(t.unref(a).options,(p,h)=>(t.openBlock(),t.createBlock(m,{key:h,label:p.label,size:t.unref(a).size,border:t.unref(a).border,disabled:n.meta.readOnly||p.disabled},{default:t.withCtx(()=>[t.createTextVNode(t.toDisplayString(p.text||p.label),1)]),_:2},1032,["label","size","border","disabled"]))),128))]),_:2},[t.unref(a).slotNameOfDefault?{name:"default",fn:t.withCtx(()=>[t.renderSlot(c.$slots,t.unref(a).slotNameOfDefault)]),key:"0"}:void 0]),1040,["modelValue","disabled"])]),_:3},8,["id","meta"])}}}),Nt=t.defineComponent({__name:"Select",props:{id:null,meta:null},setup(n){const e=n,r=t.inject("state"),{appContext:l}=t.getCurrentInstance(),o=new I(l,r,e.id,e.meta),{bindings:i}=O(Object.keys(_.ElSelect.props),o.ui),a=t.computed(()=>o.ui.value||{}),f=t.computed({get(){return o.value},set(h){o.value=h}});function u(h){t.unref(a).change&&t.unref(a).change(h)}function c(){t.unref(a).blur&&t.unref(a).blur()}function s(h){t.unref(a).visibleChange&&t.unref(a).visibleChange(h)}function d(){t.unref(a).focus&&t.unref(a).focus()}function m(){t.unref(a).clear&&t.unref(a).clear()}function p(h){t.unref(a).select&&t.unref(a).removeTag(h)}return(h,y)=>{const C=t.resolveComponent("el-option");return t.openBlock(),t.createBlock(w,{id:n.id,meta:n.meta},{default:t.withCtx(()=>[t.createVNode(t.unref(_.ElSelect),t.mergeProps({modelValue:t.unref(f),"onUpdate:modelValue":y[0]||(y[0]=B=>t.isRef(f)?f.value=B:null)},t.unref(i),{disabled:n.meta.readOnly,onBlur:c,onFocus:d,onClear:m,onRemoveTag:p,onVisibleChange:s,onChange:u}),t.createSlots({default:t.withCtx(()=>[(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(t.unref(a).options,(B,g)=>(t.openBlock(),t.createBlock(C,{key:g,label:B.label,value:B.value,disabled:B.disabled},null,8,["label","value","disabled"]))),128))]),_:2},[t.unref(a).slotNameOfSelectDefault?{name:"default",fn:t.withCtx(()=>[t.renderSlot(h.$slots,t.unref(a).slotNameOfSelectDefault)]),key:"0"}:void 0,t.unref(a).slotNameOfPrefix?{name:"prefix",fn:t.withCtx(()=>[t.renderSlot(h.$slots,t.unref(a).slotNameOfPrefix)]),key:"1"}:void 0,t.unref(a).slotNameOfEmpty?{name:"empty",fn:t.withCtx(()=>[t.renderSlot(h.$slots,t.unref(a).slotNameOfEmpty)]),key:"2"}:void 0]),1040,["modelValue","disabled"])]),_:3},8,["id","meta"])}}});function k(n,e,r){n.component(e,r)}function It(n){k(n,"v-object",ft),k(n,"v-string",mt),k(n,"v-boolean",pt),k(n,"v-autocomplete",ht),k(n,"v-checkbox",gt),k(n,"v-date",bt),k(n,"v-number",Ct),k(n,"v-time",_t),k(n,"v-text",Vt),k(n,"v-radio",jt),k(n,"v-slider",wt),k(n,"v-rate",Ot),k(n,"v-tag",Et),k(n,"v-select",Nt)}const St=[at,w];function $t(n){St.forEach(e=>{n.component(e.name,e)}),It(n)}const Rt={installFormly:$t},Pt={install:function(n,e){if(n.config.globalProperties.emitter=W.default(),e.lib==="element-plus")Rt.installFormly(n);else throw new Error("Unsupport lib");return n.config.globalProperties.$VFORMLY_OPTIONS=e,n}};x.default=Pt,Object.defineProperties(x,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
