(function(S,$){typeof exports=="object"&&typeof module<"u"?$(exports,require("mitt"),require("vue"),require("ajv"),require("ant-design-vue")):typeof define=="function"&&define.amd?define(["exports","mitt","vue","ajv","ant-design-vue"],$):(S=typeof globalThis<"u"?globalThis:S||self,$(S["v-formly-v3"]={},S.mitt,S.Vue,S.Ajv,S.antDesignVue))})(this,function(S,$,e,v,B){"use strict";var nt=Object.defineProperty;var ot=(S,$,e)=>$ in S?nt(S,$,{enumerable:!0,configurable:!0,writable:!0,value:e}):S[$]=e;var b=(S,$,e)=>(ot(S,typeof $!="symbol"?$+"":$,e),e);const K=o=>o&&typeof o=="object"&&"default"in o?o:{default:o},ee=K($),te=K(v);function M(o){return o.config.globalProperties.emitter}var E=(o=>(o.Object="object",o.Array="array",o.Boolean="boolean",o.Integer="integer",o))(E||{});function T(o){const t=[],a="slotName";return o&&!o.type&&(o.type=E.Object),L(o,t,a),{slotsName:t}}function L(o,t,a){switch(o.type){case E.Object:Object.keys(o.properties).forEach(l=>{const n=o.properties[l];L(n,t,a)});break;case E.Array:Object.keys(o.items.properties).forEach(l=>{const n=o.items.properties[l];L(n,t,a)});break;default:if(o.ui){const l=Object.keys(o.ui).filter(n=>n.startsWith(a));l&&l.length>0&&l.forEach(n=>{t.push(o.ui[n])})}break}}function ne(){return{visibleIf:oe}}function oe(o,t,a,l){if(!t.ui||!t.ui.visibleIf)return a;const n=Object.keys(t.ui.visibleIf)[0],s=t.ui.visibleIf[n];return l=l||{},typeof s!="function"||n!==l.id?a:s.call(null,o,l.id,l.value)}const G="form-value-change",D="form-error-change",U=e.defineComponent({__name:"AFormlyItem",props:{id:null,show:{type:Boolean,default:!0},meta:null},setup(o){const t=o;let a=e.ref(!0);const{slotsName:l}=T(t.meta),n=e.inject("state"),s=e.computed(()=>`v-${t.meta.ui&&t.meta.ui.component||t.meta.type}`),c=e.computed(()=>n.layout);r();function r(){if(!t.meta.type)throw new Error("Form item type must be one of these: number, string, boolean, array, object");a.value=t.show,i(a.value,t.id);const{visibleIf:u}=ne(),{appContext:p}=e.getCurrentInstance();M(p).on(`${G}-${n._formId}`,m=>{let f=u(n.context,t.meta,a.value,{id:m.id,value:m.value});f!==a.value&&(a.value=f,i(a.value,t.id))})}function i(u,p){u?n._ignoreErrorIds=n._ignoreErrorIds.filter(h=>h!==p):n._ignoreErrorIds.indexOf(p)===-1&&n._ignoreErrorIds.push(p)}return(u,p)=>(e.openBlock(),e.createElementBlock("div",{style:e.normalizeStyle({display:e.unref(c)==="inline"?"inline-block":"block"})},[e.unref(a)?(e.openBlock(),e.createBlock(e.resolveDynamicComponent(e.unref(s)),{key:0,id:o.id,meta:o.meta},e.createSlots({_:2},[e.renderList(e.unref(l),h=>({name:h,fn:e.withCtx(m=>[e.renderSlot(u.$slots,h,e.normalizeProps(e.guardReactiveProps({...m})))])}))]),1032,["id","meta"])):e.createCommentVNode("",!0)],4))}});class ae{constructor(){b(this,"_map",new Map)}addContext(t,a){this._map.set(t,a)}removeContext(t){this._map.delete(t)}getContext(t){return this._map.get(t)}getContexts(){return this._map}getMap(){return this._map}}function W(o=8,t=10){const a="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),l=t||a.length,n=[];if(o)for(let s=0;s<o;s++)n[s]=a[0|Math.random()*l];else{let s;n[8]=n[13]=n[18]=n[23]="-",n[14]="4";for(let c=0;c<36;c++)n[c]||(s=0|Math.random()*16,n[c]=a[c==19?s&3|8:s])}return n.join("")}function A(o){if(o===void 0)return;if(o===null)return null;const t=Object.assign({},o);return Object.keys(t).forEach(a=>t[a]=typeof o[a]=="object"?A(o[a]):o[a]),Array.isArray(o)?(t.length=o.length,Array.from(t)):t}const re=Array.isArray,le=o=>typeof o=="function",J=o=>typeof o=="number";function z(){const{appContext:o}=e.getCurrentInstance(),t=o.config.globalProperties;return{appContext:o,globalProperties:t}}class se{constructor(){b(this,"_formId",W(4));b(this,"_ignoreErrorIds",[]);b(this,"_context");b(this,"_layout",e.ref("horizontal"));b(this,"_ajvOptions",{allErrors:!0,strict:!1,loopEnum:50});b(this,"_formData",e.ref({}));b(this,"_meta",{});b(this,"_ui",{ingoreKeywords:["type","enum"],spanLabel:5,spanControl:19,grid:{gutter:36,span:24},errors:{required:"\u5FC5\u586B\u9879"}});b(this,"_validate");this._applyUseOptions()}get context(){return this._context}set context(t){this._context=t}get layout(){return this._layout}set layout(t){this._layout=t}get ajvOptions(){return this._ajvOptions}set ajvOptions(t){this._ajvOptions=t}get formData(){return this._formData.value}set formData(t){this._formData.value=t}get meta(){return this._meta}set meta(t){this._meta=t}get ui(){return this._ui}set ui(t){this._ui=Object.assign({},this._ui,t)}get validate(){return this._validate}set validate(t){this._validate=t}updateObjProp(t,a,l){const[n,...s]=a.split("/").filter(c=>c);s.length?this.updateObjProp(t[n],s.join("/"),l):t&&(t[n]=l)}_applyUseOptions(){const{globalProperties:t}=z(),a=t.$VFORMLY_OPTIONS;!a||typeof a!="object"||(this.ui=a.ui)}}class ie{constructor(t,a){b(this,"state");b(this,"_ajv");b(this,"_validate");b(this,"appContext");this.state=a,this._ajv=new te.default(a.ajvOptions),this._validate=null,this.appContext=t}async runValidateForm(){const{valid:t,errors:a}=this._isAjvValid(),n=this.state.context.getContexts().values();let s=!0;for(const c of n)s=await this._validation(c,t,a)&&s;return s}async runValidationFormItem(t){const{valid:a,errors:l}=this._isAjvValid();return await this._validation(t,a,l)}_ajvValidate(t){if(this._validate)return this._validate;const a=A(t);return this._replaceReactiveToRawData(a),this._validate=this._ajv.compile(a),this._validate}_forceCompile(){const t=A(this.state.meta);this._replaceReactiveToRawData(t),this._validate=this._ajv.compile(t)}_replaceReactiveToRawData(t){var n;let a,l;switch(t.type){case E.Object:a=Object.values(t.properties),a.forEach(s=>{this._replaceReactiveToRawData(s)});break;case E.Array:l=Object.keys(t),l.forEach(s=>{e.isRef(t[s])&&(t[s]=t[s]._value)}),a=Object.values((n=t.items)==null?void 0:n.properties),a.forEach(s=>{this._replaceReactiveToRawData(s)});break;default:l=Object.keys(t),l.forEach(s=>{e.isRef(t[s])&&(t[s]=t[s]._value)});break}}_getAjvError(t,a){let l;for(let n=0;n<a.length;n++){const s=a[n],c=this._getId(s);if(t===c){l=s;break}}return l}_isAjvValid(){const t=this._ajvValidate(this.state.meta);return{valid:t(this.state.formData||{}),errors:t.errors}}async _validation(t,a,l){let n=[];const s=`${D}-${this.state._formId}`,c=M(this.appContext);if(a)return c.emit(s,{id:t.id,error:void 0}),!0;{const r=this._getCustomError(t),i=await this._getCustomAsyncError(t),u=[...r,...i];this._replaceWithDefaultErrors(t,l),this._replaceWithCustomErrors(t.id,l,u);const p=this.state.ui.ingoreKeywords||[];n=l.filter(m=>p.indexOf(m.keyword)===-1),n=this._removeIgnoreErrors(n);const h=this._getAjvError(t.id,n);return c.emit(s,{id:t.id,error:h}),!h}}_getCustomError(t){var l,n;const a=(n=(l=t.ui)==null?void 0:l.value)==null?void 0:n.validator;return a?a(t.value):[]}async _getCustomAsyncError(t){var l,n;const a=(n=(l=t.ui)==null?void 0:l.value)==null?void 0:n.validatorAsync;return a?await a(t.value):[]}_replaceWithDefaultErrors(t,a){var c,r;if(!a||a.length===0)return;const l=((r=(c=t.ui)==null?void 0:c.value)==null?void 0:r.errors)||{},n=Object.assign({},this.state.ui.errors,l),s=Object.keys(n);s&&s.length>0&&a.forEach(i=>{s.indexOf(i.keyword)>-1&&(i.message=n[i.keyword])})}_replaceWithCustomErrors(t,a,l){l.forEach(n=>{const s=a.find(c=>c.keyword===n.keyword&&this._getId(c)===t);s&&(s.message=n.message)})}_removeIgnoreErrors(t){const a=this.state._ignoreErrorIds;return!a||a.length===0?t:t.filter(n=>a.indexOf(this._getId(n))===-1)}_getId(t){return t.params&&t.params.missingProperty?`${t.instancePath?t.instancePath:""}/${t.params.missingProperty}`:`${t.instancePath}`}}const ce={class:"v__formly"},fe={name:"v-formly-v3"},de=e.defineComponent({...fe,props:{modelValue:null,layout:{default:"horizontal"},button:null,meta:null},emits:["update:modelValue","form-reset","form-submit"],setup(o,{expose:t,emit:a}){const l=o;if(!l.meta||typeof l.meta.properties>"u")throw new Error("Invalid Schema");let n={type:E.Object},s=e.ref(!1);const c=new se;e.provide("state",c);const{slotsName:r}=T(l.meta),{appContext:i}=e.getCurrentInstance(),u=M(i);h();const p=e.computed(()=>{const _=Object.assign({},c.ui);return l.layout==="vertical"?null:{span:_.spanControl,offset:_.spanLabel}});e.watch(()=>l.modelValue,(_,x)=>{JSON.stringify(_)!==JSON.stringify(x)&&C(_)},{deep:!1}),e.watch(()=>c.formData,(_,x)=>{a("update:modelValue",_)},{deep:!0});function h(){c.layout=e.toRef(l,"layout"),n=Object.assign({},n,l.meta),c.meta=n,c.formData=Object.assign({},l.modelValue),m(c.formData,l.meta.properties),c.context=new ae,c.validate=new ie(i,c)}function m(_,x){Object.keys(x).forEach(k=>{const O=x[k];if(O.type!=="null")switch(O.type){case E.Object:_[k]=_[k]||{},m(_[k],O.properties);break;case E.Array:_[k]=_[k]||[];break;case E.Boolean:break;default:_[k]=_[k]||void 0;break}})}function f(_){return c.context.getContext(_)}async function g(){return await c.validate.runValidateForm()}function C(_){const x=c.context.getContext("/");x&&(x.value=_,a("update:modelValue",c.formData))}function d(){a("form-reset",e.toRaw(c.formData)),C({})}async function y(){s.value=!0;const _=await g();s.value=!1,a("form-submit",{valid:_,data:_?e.toRaw(c.formData):void 0})}return e.onBeforeUnmount(()=>{u.all.clear()}),t({getContext:f,validate:g,reset:C,clearForm:d,submitForm:y}),(_,x)=>{const k=e.resolveComponent("a-button"),O=e.resolveComponent("a-space"),N=e.resolveComponent("a-form-item"),R=e.resolveComponent("a-form");return e.openBlock(),e.createElementBlock("div",ce,[e.createVNode(R,{class:e.normalizeClass(["v",{v__inline:o.layout==="inline",v__horizontal:o.layout==="horizontal"}]),layout:o.layout},{default:e.withCtx(()=>[e.createVNode(U,{id:"/",meta:e.unref(n)},e.createSlots({_:2},[e.renderList(e.unref(r),F=>({name:F,fn:e.withCtx(q=>[e.renderSlot(_.$slots,F,e.normalizeProps(e.guardReactiveProps({...q})))])}))]),1032,["meta"]),o.button==="default"?(e.openBlock(),e.createBlock(N,{key:0,wrapperCol:e.unref(p),class:"v__default-submit-button"},{default:e.withCtx(()=>[e.createVNode(O,null,{default:e.withCtx(()=>[e.createVNode(k,{type:"danger",onClick:d},{default:e.withCtx(()=>[e.createTextVNode(" \u91CD\u7F6E ")]),_:1}),e.createVNode(k,{type:"primary",onClick:y,loading:e.unref(s)},{default:e.withCtx(()=>[e.createTextVNode(" \u63D0\u4EA4 ")]),_:1},8,["loading"])]),_:1})]),_:1},8,["wrapperCol"])):o.button==="custom"?e.renderSlot(_.$slots,"button",{key:1,loading:e.unref(s),clearForm:d,submitForm:y}):(e.openBlock(),e.createElementBlock(e.Fragment,{key:2},[],64))]),_:3},8,["layout","class"])])}}}),me={class:"v__label-text"},ue={key:0,class:"v__optional"},pe=["innerHTML"],he={key:0,class:"ant-form-item-explain-error"},ge={name:"v-wrapper"},V=e.defineComponent({...ge,props:{id:null,show:{type:Boolean},meta:null},setup(o){const t=o,{globalProperties:a}=z(),l=e.inject("state"),n=l.context.getContext(t.id),s=e.computed(()=>Object.assign({},l.ui,t.meta.ui)),c=e.computed(()=>Object.assign({},l.ui,t.meta.ui).optionalHelp),r=e.computed(()=>l.layout.value==="vertical"||l.layout.value==="inline"?void 0:{span:s.value.spanLabel}),i=e.computed(()=>l.layout.value==="vertical"||l.layout.value==="inline"?void 0:{span:s.value.spanControl,offset:s.value.offsetControl||0}),u=e.computed({get(){return n.error.value},set(f){n.error.value=f}}),{appContext:p}=e.getCurrentInstance(),h=M(p);h.on(`${D}-${l._formId}`,m),e.onBeforeUnmount(()=>{h.off(`${D}-${l._formId}`,m)});function m(f){f.id===t.id&&(u.value=f.error?f.error.message:void 0)}return(f,g)=>{const C=e.resolveComponent("a-tooltip"),d=e.resolveComponent("a-form-item");return e.openBlock(),e.createBlock(d,{labelCol:e.unref(r),wrapperCol:e.unref(i),required:e.unref(s).showRequired,class:e.normalizeClass({"ant-form-item-has-error":e.unref(u)})},e.createSlots({label:e.withCtx(()=>[e.createElementVNode("span",me,e.toDisplayString(o.meta.title),1),e.unref(s).optional||e.unref(c)?(e.openBlock(),e.createElementBlock("span",ue,[e.createTextVNode(e.toDisplayString(e.unref(s).optional)+" ",1),e.unref(c)?(e.openBlock(),e.createBlock(C,{key:0,title:e.unref(c).text,placement:e.unref(c).placement,trigger:e.unref(c).trigger,overlayStyle:e.unref(c).overlayStyle,mouseEnterDelay:e.unref(c).mouseEnterDelay,mouseLeaveDelay:e.unref(c).mouseLeaveDelay,overlayClassName:e.unref(c).overlayClassName},{default:e.withCtx(()=>[e.unref(c).icon?(e.openBlock(),e.createBlock(e.resolveDynamicComponent(e.unref(a).$antIcons[e.unref(c).icon]),{key:0})):e.createCommentVNode("",!0)]),_:1},8,["title","placement","trigger","overlayStyle","mouseEnterDelay","mouseLeaveDelay","overlayClassName"])):e.createCommentVNode("",!0)])):e.createCommentVNode("",!0)]),default:e.withCtx(()=>[e.renderSlot(f.$slots,"default"),e.unref(u)?(e.openBlock(),e.createElementBlock("div",he,e.toDisplayString(e.unref(u)),1)):e.createCommentVNode("",!0)]),_:2},[o.meta.description?{name:"extra",fn:e.withCtx(()=>[e.createElementVNode("div",{innerHTML:o.meta.description},null,8,pe)]),key:"0"}:void 0]),1032,["labelCol","wrapperCol","required","class"])}}});class P{constructor(t,a,l,n){b(this,"id");b(this,"state");b(this,"meta",e.ref({}));b(this,"type");b(this,"ui",e.ref({}));b(this,"error",e.ref(void 0));b(this,"_value",e.ref());b(this,"_initMetaValue");b(this,"appContext");if(this.constructor==P)throw new Error("Abstract classes can't be instantiated.");this.id=l,this.state=a,this.meta.value=n,this.type=n.ui&&n.ui.component||n.type,this.ui.value=Object.assign({},a.ui,n.ui),this.appContext=t,this.error.value=void 0,a.context.addContext(l,this),this._value.value=void 0,this._initMetaValue=this.getInitMetaValue()}get value(){return this._value.value}set value(t){if(this._value.value===t)return;this.setValue(t),M(this.appContext).emit(`${G}-${this.state._formId}`,{id:this.id,value:this._value.value}),this.state.updateObjProp(this.state.formData,this.id,this._value.value),this.state.validate.runValidationFormItem(this)}getInitMetaValue(){const t=this.id.split("/").filter(l=>l);let a="";return t.reduce((l,n,s)=>(s===t.length-1&&(a=l[n]),l[n]||{}),this.state.formData),a}}class Ce extends P{constructor(a,l,n,s){super(a,l,n,s);b(this,"childMetaPairs");this.childMetaPairs=this.buildChildMetaPairs(n,s),l.context.addContext(n,this)}initValue(){}setValue(){}set value(a){this.childMetaPairs.forEach(({key:l,propertyName:n})=>{const s=this.state.context.getContext(l);s&&(s.value=(a||{})[n])})}buildChildMetaPairs(a,l){const n=[];for(const s of Object.keys(l.properties||{})){const c=a==="/"?`/${s}`:`${a}/${s}`;n.push({key:c,propertyName:s,meta:l.properties[s]})}return n}}const ye=e.defineComponent({__name:"Object",props:{id:null,meta:null},setup(o){const t=o,{slotsName:a}=T(t.meta),l=e.inject("state"),{appContext:n}=e.getCurrentInstance(),s=new Ce(n,l,t.id,t.meta),c=e.computed(()=>s.ui.value||{}),r=e.computed(()=>Object.assign({},l.ui.grid,c.value.grid).gutter),i=e.computed(()=>l.layout.value);function u(m){return m.ui&&m.ui.show}function p(m){if(i.value==="inline")return{};const f=m.meta.ui&&m.meta.ui.grid||{};return Object.assign({},l.ui.grid,c.value.grid,f)}const h=s.childMetaPairs;return(m,f)=>{const g=e.resolveComponent("a-col"),C=e.resolveComponent("a-row");return e.openBlock(),e.createBlock(C,{gutter:e.unref(r)},{default:e.withCtx(()=>[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(h),(d,y)=>(e.openBlock(),e.createBlock(g,{key:y,span:p(d).span,offset:p(d).offset,xs:p(d).xs,sm:p(d).sm,md:p(d).md,lg:p(d).lg,xl:p(d).xl,xxl:p(d).xxl,style:e.normalizeStyle({display:e.unref(i)==="inline"?"inline-block":"block"})},{default:e.withCtx(()=>[e.createVNode(U,{id:d.key,meta:d.meta,show:u(d.meta)},e.createSlots({_:2},[e.renderList(e.unref(a),_=>({name:_,fn:e.withCtx(x=>[e.renderSlot(m.$slots,_,e.normalizeProps(e.guardReactiveProps({...x})))])}))]),1032,["id","meta","show"])]),_:2},1032,["span","offset","xs","sm","md","lg","xl","xxl","style"]))),128))]),_:3},8,["gutter"])}}});class j extends P{constructor(a,l,n,s){var c;super(a,l,n,s);b(this,"open");this.initValue(),this.meta.value&&(this.open=((c=this.meta.value.ui)==null?void 0:c.open)||!1)}initValue(){this._initMetaValue?this.value=this._initMetaValue:this.meta.value.default&&(this.value=this.meta.value.default)}setValue(a){this._value.value=a||void 0}}function I(o,t){const a=e.ref({});return Object.keys(t.value).forEach(n=>{o.indexOf(n)>-1&&(a.value[n]=e.toRef(t.value,n))}),{bindings:a}}const _e=e.defineComponent({__name:"String",props:{id:null,meta:null},setup(o){const t=o,a=e.inject("state"),{appContext:l}=e.getCurrentInstance(),n=new j(l,a,t.id,t.meta),{bindings:s}=I(Object.keys(B.Input.props),n.ui),c=e.toRef(t.meta,"readOnly"),r=e.toRef(t.meta,"maxLength"),i=e.computed(()=>n.ui.value||{}),u=e.computed({get(){return n.value},set(h){n.value=h}});function p(){i.value.change&&i.value.change(e.unref(u))}return(h,m)=>{const f=e.resolveComponent("a-input");return e.openBlock(),e.createBlock(V,{id:o.id,meta:o.meta},{default:e.withCtx(()=>[e.createVNode(f,e.mergeProps(e.unref(s),{defaultValue:o.meta.defaultValue,disabled:e.unref(c),maxlength:e.unref(r),value:e.unref(u),"onUpdate:value":m[0]||(m[0]=g=>e.isRef(u)?u.value=g:null),onChange:p}),e.createSlots({_:2},[e.unref(i).slotNameOfPrefix?{name:"prefix",fn:e.withCtx(()=>[e.renderSlot(h.$slots,e.unref(i).slotNameOfPrefix)]),key:"0"}:void 0,e.unref(i).slotNameOfSuffix?{name:"suffix",fn:e.withCtx(()=>[e.renderSlot(h.$slots,e.unref(i).slotNameOfSuffix)]),key:"1"}:void 0,e.unref(i).slotNameOfAddonBefore?{name:"addonBefore",fn:e.withCtx(()=>[e.renderSlot(h.$slots,e.unref(i).slotNameOfAddonBefore)]),key:"2"}:void 0,e.unref(i).slotNameOfAddonAfter?{name:"addonAfter",fn:e.withCtx(()=>[e.renderSlot(h.$slots,e.unref(i).slotNameOfAddonAfter)]),key:"3"}:void 0]),1040,["defaultValue","disabled","maxlength","value"])]),_:3},8,["id","meta"])}}});class xe extends P{constructor(t,a,l,n){super(t,a,l,n),this.initValue()}initValue(){typeof this._initMetaValue<"u"?this.value=this._initMetaValue:typeof this.meta.value.default=="boolean"&&(this.value=this.meta.value.default)}setValue(t){this._value.value=t||!1}}const ke=e.defineComponent({__name:"Boolean",props:{id:null,meta:null},setup(o){const t=o,a=e.inject("state"),{appContext:l}=e.getCurrentInstance(),n=new xe(l,a,t.id,t.meta),{bindings:s}=I(Object.keys(B.Switch.props),n.ui),c=e.toRef(t.meta,"readOnly"),r=e.computed(()=>n.ui.value||{}),i=e.computed({get(){return n.value},set(p){n.value=p||!1}});function u(){r.value.change&&r.value.change(e.unref(i))}return(p,h)=>{const m=e.resolveComponent("a-switch");return e.openBlock(),e.createBlock(V,{id:o.id,meta:o.meta},{default:e.withCtx(()=>[e.createVNode(m,e.mergeProps({class:"v__boolean",checked:e.unref(i),"onUpdate:checked":h[0]||(h[0]=f=>e.isRef(i)?i.value=f:null)},e.unref(s),{disabled:e.unref(c),onChange:u}),e.createSlots({_:2},[e.unref(r).slotNameOfCheckedChildren?{name:"checkedChildren",fn:e.withCtx(()=>[e.renderSlot(p.$slots,e.unref(r).slotNameOfCheckedChildren)]),key:"0"}:void 0,e.unref(r).slotNameOfUnCheckedChildren?{name:"unCheckedChildren",fn:e.withCtx(()=>[e.renderSlot(p.$slots,e.unref(r).slotNameOfUnCheckedChildren)]),key:"1"}:void 0]),1040,["checked","disabled"])]),_:3},8,["id","meta"])}}}),be=e.defineComponent({__name:"AutoComplete",props:{id:null,meta:null},setup(o){const t=o,a=e.inject("state"),{appContext:l}=e.getCurrentInstance(),n=new j(l,a,t.id,t.meta),{bindings:s}=I(Object.keys(B.AutoComplete.props),n.ui),c=e.toRef(t.meta,"readOnly"),r=e.computed(()=>n.ui.value||{}),i=e.computed({get(){return n.value},set(m){n.value=m||void 0}});function u(m){r.value.change&&r.value.change(e.unref(m))}function p(m){r.value.search&&r.value.search(m,e.unref(i))}function h(m,f){r.value.select&&r.value.select(e.unref(m),f)}return(m,f)=>{const g=e.resolveComponent("a-auto-complete");return e.openBlock(),e.createBlock(V,{id:o.id,meta:o.meta},{default:e.withCtx(()=>[e.createVNode(g,e.mergeProps(e.unref(s),{disabled:e.unref(c),value:e.unref(i),"onUpdate:value":f[0]||(f[0]=C=>e.isRef(i)?i.value=C:null),onChange:u,onSearch:p,onSelect:h}),e.createSlots({_:2},[e.unref(r).slotNameOfOption?{name:"option",fn:e.withCtx(C=>[e.renderSlot(m.$slots,e.unref(r).slotNameOfOption,e.normalizeProps(e.guardReactiveProps(C)))]),key:"0"}:void 0,e.unref(r).slotNameOfDefault?{name:"default",fn:e.withCtx(()=>[e.renderSlot(m.$slots,e.unref(r).slotNameOfDefault)]),key:"1"}:void 0]),1040,["disabled","value"])]),_:3},8,["id","meta"])}}}),Oe=e.defineComponent({__name:"Checkbox",props:{id:null,meta:null},setup(o){const t=o,a=e.inject("state"),{appContext:l}=e.getCurrentInstance(),n=new j(l,a,t.id,t.meta),{bindings:s}=I(Object.keys(B.CheckboxGroup.props),n.ui),c=e.toRef(t.meta,"readOnly"),r=e.computed(()=>n.ui.value||{}),i=e.computed({get(){return n.value},set(p){n.value=p}});function u(){r.value.change&&r.value.change(e.unref(i))}return(p,h)=>{const m=e.resolveComponent("a-checkbox-group"),f=e.resolveComponent("a-checkbox"),g=e.resolveComponent("a-col"),C=e.resolveComponent("a-row");return e.openBlock(),e.createBlock(V,{id:o.id,meta:o.meta},{default:e.withCtx(()=>[e.unref(r).span?(e.openBlock(),e.createBlock(m,{key:1,value:e.unref(i),"onUpdate:value":h[1]||(h[1]=d=>e.isRef(i)?i.value=d:null),disabled:o.meta.readOnly,onChange:u,class:"v__checkbox"},{default:e.withCtx(()=>[e.createVNode(C,null,{default:e.withCtx(()=>[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(o.meta.enum,(d,y)=>(e.openBlock(),e.createBlock(g,{class:"v__text-left",span:e.unref(r).span,key:y},{default:e.withCtx(()=>[e.createVNode(f,{value:d.value||d,disabled:d.disabled||!1},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(d.label||d),1)]),_:2},1032,["value","disabled"])]),_:2},1032,["span"]))),128))]),_:1})]),_:1},8,["value","disabled"])):(e.openBlock(),e.createBlock(m,e.mergeProps({key:0,class:"v__checkbox",value:e.unref(i),"onUpdate:value":h[0]||(h[0]=d=>e.isRef(i)?i.value=d:null)},e.unref(s),{disabled:e.unref(c),options:o.meta.enum,onChange:u}),null,16,["value","disabled","options"]))]),_:1},8,["id","meta"])}}}),we=e.defineComponent({__name:"Date",props:{id:null,meta:null},setup(o){const t=o,a=e.inject("state"),{appContext:l}=e.getCurrentInstance(),n=new j(l,a,t.id,t.meta);let s={},c={};if(n.ui.value.type==="range"){const{bindings:f}=I(Object.keys(B.RangePicker.props),n.ui);s=f}else{const{bindings:f}=I(Object.keys(B.DatePicker.props),n.ui);c=f}const r=e.toRef(t.meta,"readOnly"),i=e.computed(()=>n.ui.value||{}),u=e.computed({get(){return n.value},set(f){n.value=f}});function p(){i.value.change&&i.value.change(e.unref(u))}function h(f){i.value.ok&&i.value.ok(f)}function m(f,g,C){i.value.calendarChange&&i.value.calendarChange(f,g,C)}return(f,g)=>{const C=e.resolveComponent("a-range-picker"),d=e.resolveComponent("a-date-picker");return e.openBlock(),e.createBlock(V,{id:o.id,meta:o.meta},{default:e.withCtx(()=>[e.unref(i).type==="range"?(e.openBlock(),e.createBlock(C,e.mergeProps({key:0,class:"v__date",value:e.unref(u),"onUpdate:value":g[0]||(g[0]=y=>e.isRef(u)?u.value=y:null)},e.unref(s),{disabled:e.unref(r),onCalendarChange:m,onOk:h,onChange:p}),e.createSlots({_:2},[e.unref(i).slotNameOfSuffixIcon?{name:"suffixIcon",fn:e.withCtx(()=>[e.renderSlot(f.$slots,e.unref(i).slotNameOfSuffixIcon)]),key:"0"}:void 0]),1040,["value","disabled"])):e.createCommentVNode("",!0),e.unref(i).type!=="range"?(e.openBlock(),e.createBlock(d,e.mergeProps({key:1,class:"v__date",value:e.unref(u),"onUpdate:value":g[1]||(g[1]=y=>e.isRef(u)?u.value=y:null)},e.unref(c),{disabled:o.meta.readOnly,onOk:h,onChange:p}),e.createSlots({_:2},[e.unref(i).slotNameOfSuffixIcon?{name:"suffixIcon",fn:e.withCtx(()=>[e.renderSlot(f.$slots,e.unref(i).slotNameOfSuffixIcon)]),key:"0"}:void 0]),1040,["value","disabled"])):e.createCommentVNode("",!0)]),_:3},8,["id","meta"])}}}),Ne=e.defineComponent({__name:"Time",props:{id:null,meta:null},setup(o){const t=o,a=e.inject("state"),{appContext:l}=e.getCurrentInstance(),n=new j(l,a,t.id,t.meta);let s={},c={};if(n.ui.value.type==="range"){const{bindings:f}=I(Object.keys(B.TimeRangePicker.props),n.ui);s=f}else{const{bindings:f}=I(Object.keys(B.TimePicker.props),n.ui);c=f}const r=e.toRef(t.meta,"readOnly"),i=e.computed(()=>n.ui.value||{}),u=e.computed({get(){return n.value},set(f){n.value=f}});function p(f,g){i.value.change&&i.value.change(f,g)}function h(f){i.value.ok&&i.value.ok(f)}function m(f,g,C){i.value.calendarChange&&i.value.calendarChange(f,g,C)}return(f,g)=>{const C=e.resolveComponent("a-time-range-picker"),d=e.resolveComponent("a-time-picker");return e.openBlock(),e.createBlock(V,{id:o.id,meta:o.meta},{default:e.withCtx(()=>[e.unref(i).type==="range"?(e.openBlock(),e.createBlock(C,e.mergeProps({key:0,class:"v__time",value:e.unref(u),"onUpdate:value":g[0]||(g[0]=y=>e.isRef(u)?u.value=y:null),open:e.unref(i).open,"onUpdate:open":g[1]||(g[1]=y=>e.unref(i).open=y)},e.unref(s),{disabled:e.unref(r),onCalendarChange:m,onOk:h,onChange:p}),e.createSlots({_:2},[e.unref(i).slotNameOfRenderExtraFooter?{name:"renderExtraFooter",fn:e.withCtx(()=>[e.renderSlot(f.$slots,e.unref(i).slotNameOfRenderExtraFooter)]),key:"0"}:void 0,e.unref(i).slotNameOfSuffixIcon?{name:"suffixIcon",fn:e.withCtx(()=>[e.renderSlot(f.$slots,e.unref(i).slotNameOfSuffixIcon)]),key:"1"}:void 0,e.unref(i).slotNameOfClearIcon?{name:"clearIcon",fn:e.withCtx(()=>[e.renderSlot(f.$slots,e.unref(i).slotNameOfClearIcon)]),key:"2"}:void 0]),1040,["value","open","disabled"])):(e.openBlock(),e.createBlock(d,e.mergeProps({key:1,class:"v__time",value:e.unref(u),"onUpdate:value":g[2]||(g[2]=y=>e.isRef(u)?u.value=y:null),open:e.unref(i).open,"onUpdate:open":g[3]||(g[3]=y=>e.unref(i).open=y)},e.unref(c),{disabled:o.meta.readOnly,onOk:h,onChange:p}),e.createSlots({_:2},[e.unref(i).slotNameOfRenderExtraFooter?{name:"renderExtraFooter",fn:e.withCtx(()=>[e.renderSlot(f.$slots,e.unref(i).slotNameOfRenderExtraFooter)]),key:"0"}:void 0,e.unref(i).slotNameOfSuffixIcon?{name:"suffixIcon",fn:e.withCtx(()=>[e.renderSlot(f.$slots,e.unref(i).slotNameOfSuffixIcon)]),key:"1"}:void 0,e.unref(i).slotNameOfClearIcon?{name:"clearIcon",fn:e.withCtx(()=>[e.renderSlot(f.$slots,e.unref(i).slotNameOfClearIcon)]),key:"2"}:void 0]),1040,["value","open","disabled"]))]),_:3},8,["id","meta"])}}}),Y=e.defineComponent({__name:"Number",props:{id:null,meta:null},setup(o){const t=o,a=e.inject("state"),{appContext:l}=e.getCurrentInstance(),n=new j(l,a,t.id,t.meta),{bindings:s}=I(Object.keys(B.InputNumber.props),n.ui),c=e.toRef(t.meta,"readOnly"),r=e.computed(()=>n.ui.value||{}),i=e.computed({get(){return n.value},set(d){n.value=d}});let u=e.ref(-1/0),p=e.ref(1/0),h=e.ref(1),m=e.ref(d=>d),f=e.ref(d=>d);g();function g(){const{minimum:d,exclusiveMinimum:y,maximum:_,exclusiveMaximum:x,multipleOf:k,type:O}=n.meta.value;h.value=k||1,typeof d<"u"&&(u.value=y?d+h.value:d),typeof _<"u"&&(p.value=x?_-h.value:_),O==="integer"&&(u.value=Math.trunc(u.value),p.value=Math.trunc(p.value),h.value=Math.trunc(h.value)),r.value.prefix!=null&&(r.value.formatter=N=>N==null?"":`${r.value.prefix} ${N}`,r.value.parser=N=>N.replace(`${r.value.prefix} `,"")),r.value.unit!=null&&(r.value.formatter=N=>N==null?"":`${N} ${r.value.unit}`,r.value.parser=N=>N.replace(` ${r.value.unit}`,"")),r.value.formatter&&(m.value=r.value.formatter),r.value.parser&&(f.value=r.value.parser)}function C(d){i.value=n.meta.value.type===E.Integer?Math.floor(d):d,r.value.change&&r.value.change(e.unref(i))}return(d,y)=>{const _=e.resolveComponent("a-input-number");return e.openBlock(),e.createBlock(V,{id:o.id,meta:o.meta},{default:e.withCtx(()=>[e.createVNode(_,e.mergeProps({class:"v__number",id:o.id,value:e.unref(i),"onUpdate:value":y[0]||(y[0]=x=>e.isRef(i)?i.value=x:null)},e.unref(s),{disabled:e.unref(c),min:e.unref(u),max:e.unref(p),step:e.unref(h),formatter:e.unref(m),parser:e.unref(f),class:{"v__input-number-hidden-step":e.unref(r).hideStep},onChange:y[1]||(y[1]=x=>C(x))}),e.createSlots({_:2},[e.unref(r).slotNameOfAddonAfter?{name:"addonAfter",fn:e.withCtx(()=>[e.renderSlot(d.$slots,e.unref(r).slotNameOfAddonAfter)]),key:"0"}:void 0,e.unref(r).slotNameOfAddonBefore?{name:"addonBefore",fn:e.withCtx(()=>[e.renderSlot(d.$slots,e.unref(r).slotNameOfAddonBefore)]),key:"1"}:void 0,e.unref(r).slotNameOfPrefix?{name:"prefix",fn:e.withCtx(()=>[e.renderSlot(d.$slots,e.unref(r).slotNameOfPrefix)]),key:"2"}:void 0]),1040,["id","value","disabled","min","max","step","formatter","parser","class"])]),_:3},8,["id","meta"])}}});class Se extends P{constructor(a,l,n,s){super(a,l,n,s);b(this,"ids",e.ref([]));this.initValue()}setValue(){}initValue(){var a,l;if(((a=this._initMetaValue)==null?void 0:a.length)>0)this.value=this._initMetaValue;else if(((l=e.unref(this.meta).default)==null?void 0:l.length)>0){const n=e.unref(this.meta).default;n.forEach(()=>this.add(!1)),setTimeout(()=>{n.forEach((s,c)=>{const r=this.state.context.getContext(`${this.id}/${c}`);r.value=s})}),this.validate()}}get value(){return this.getPathValue(this.state.formData,this.id)||[]}set value(a){if(this.value.length===0&&(a==null?void 0:a.length)===0||!Array.isArray(a)&&a!=null)return;const l=A(a),n=e.unref(this.ids).length;for(let s=0;s<n;s++)this.remove(n-s-1,!1);l&&l.length&&(l.forEach(()=>this.add(!1)),e.nextTick(()=>{l.forEach((s,c)=>{const r=this.state.context.getContext(`${this.id}/${c}`);r.value=s})})),this.validate()}validate(){return this.state.validate.runValidationFormItem(this)}getPathValue(a,l){const n=l.split("/").filter(c=>c);let s=A(a);for(let c=0;c<n.length;c++){const r=n[c];s=s[r]}return s}getEmptyData(){const a={},l=e.unref(this.meta).items.properties;return Object.keys(l).forEach(n=>{switch(l[n].type){case"object":a[n]={};break;case"array":a[n]=[];break;default:a[n]=void 0;break}}),a}add(a=!0){const l=`${this.id}/${e.unref(this.ids).length}`,n=this.getEmptyData();return this.state.updateObjProp(this.state.formData,l,n),this.ids.value.push({key:W()}),a&&this.validate(),l}remove(a,l=!0){this.ids.value.splice(a,1);const n=this.id.split("/").filter(r=>!!r);n.reduce((r,i,u)=>(u===n.length-1&&r[i].splice(a,1),r[i]),this.state.formData);const s=[];for(const r of this.state.context.getMap().keys())new RegExp(`^/?${this.id}/`).test(r)&&s.push(r);for(let r=a+1;r<e.unref(this.ids).length+1;r++){const i=new RegExp(`^(/?${this.id}/)${r}`);s.filter(u=>i.test(u)).forEach(u=>{const p=this.state.context.getContext(u),h=u.replace(i,(m,f)=>`${f}${r-1}`);if(p.id=h,p.childMetaPairs){const m=p.buildChildMetaPairs(h,e.unref(p.meta));p.childMetaPairs.forEach((f,g)=>{f.key=m[g].key})}this.state.context.addContext(h,p)})}const c=new RegExp(`^/?${this.id}/${e.unref(this.ids).length}`);s.filter(r=>c.test(r)).forEach(r=>{this.state.context.removeContext(r)}),l&&this.validate()}}const Be={class:"v__optional"},Ve={class:"v__array-add"},Ie={class:"ant-form-item-control"},$e=["onClick"],Ee={key:0,class:"ant-form-item-extra"},je={key:1,class:"ant-form-item-explain-error"},Re=e.defineComponent({__name:"Array",props:{id:null,meta:null},setup(o){const t=o,a=e.inject("state"),{globalProperties:l}=z(),{appContext:n}=e.getCurrentInstance(),s=new Se(n,a,t.id,t.meta),c=M(n),r=e.computed(()=>e.unref(s.ui)||{}),i=e.computed(()=>Object.assign({},a.ui,t.meta.ui).optionalHelp);e.computed({get(){return s.value},set(x){s.value=x||[]}});const u=e.computed({get(){return e.unref(s.error)},set(x){s.error.value=x}}),p=e.toRef(t.meta,"readOnly"),h=e.computed(()=>e.unref(p)||t.meta.maxItems!=null&&e.unref(s.ids).length>=t.meta.maxItems),m=e.computed(()=>{const x=t.meta.minItems;return!(e.unref(p)||x!=null&&e.unref(s.ids).length<=x)}),f=e.ref(8),g=e.ref("");e.onMounted(()=>{var N;c.on(`${D}-${a._formId}`,C);const{grid:x,removable:k,removeTitle:O}=e.unref(r);f.value=(N=x==null?void 0:x.arraySpan)!=null?N:8,g.value=k===!1?null:O}),e.onBeforeUnmount(()=>{c.off(`${D}-${a._formId}`,C)});function C(x){x.id===t.id&&(u.value=x.error?x.error.message:void 0)}function d(x){return`${t.id}/${x}`}function y(){var k,O;const x=s.add();(O=(k=e.unref(r)).add)==null||O.call(k,x)}function _(x){var k,O;s.remove(x),(O=(k=e.unref(r)).remove)==null||O.call(k,x)}return(x,k)=>{const O=e.resolveComponent("a-tooltip"),N=e.resolveComponent("a-button"),R=e.resolveComponent("a-col"),F=e.resolveComponent("delete-outlined"),q=e.resolveComponent("a-card"),X=e.resolveComponent("a-row"),et=e.resolveComponent("a-form-item");return e.openBlock(),e.createBlock(et,null,{default:e.withCtx(()=>[e.createVNode(X,null,{default:e.withCtx(()=>[o.meta.title?(e.openBlock(),e.createBlock(R,{key:0,class:"ant-form-item-label",span:e.unref(r).spanLabel},{default:e.withCtx(()=>[e.createElementVNode("label",{class:e.normalizeClass({"ant-form-item-required":e.unref(r).showRequired})},[e.createTextVNode(e.toDisplayString(o.meta.title)+" ",1),e.createElementVNode("span",Be,[e.createTextVNode(e.toDisplayString(e.unref(r).optional)+" ",1),e.unref(i)?(e.openBlock(),e.createBlock(O,{key:0,title:e.unref(i).text,placement:e.unref(i).placement,trigger:e.unref(i).trigger,overlayStyle:e.unref(i).overlayStyle,overlayClassName:e.unref(i).overlayClassName,mouseEnterDelay:e.unref(i).mouseEnterDelay,mouseLeaveDelay:e.unref(i).mouseLeaveDelay},{default:e.withCtx(()=>[e.unref(i).icon?(e.openBlock(),e.createBlock(e.resolveDynamicComponent(e.unref(l).$antIcons[e.unref(i).icon]),{key:0})):e.createCommentVNode("",!0)]),_:1},8,["title","placement","trigger","overlayStyle","overlayClassName","mouseEnterDelay","mouseLeaveDelay"])):e.createCommentVNode("",!0)])],2),e.createElementVNode("div",Ve,[e.createVNode(N,{type:e.unref(r).addType||"dashed",disabled:e.unref(h),onClick:y},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(e.unref(r).addTitle||"\u6DFB\u52A0"),1)]),_:1},8,["type","disabled"])])]),_:1},8,["span"])):e.createCommentVNode("",!0),e.createVNode(R,{class:"ant-form-item-control-wrapper",span:e.unref(r).spanControl,offset:e.unref(r).offsetControl},{default:e.withCtx(()=>[e.createElementVNode("div",Ie,[e.createVNode(X,{class:"v__array-container"},{default:e.withCtx(()=>[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(s).ids.value,(tt,Z)=>(e.openBlock(),e.createBlock(R,{key:tt.key,span:f.value,class:"v__array-item"},{default:e.withCtx(()=>[e.createVNode(q,null,{default:e.withCtx(()=>[e.createVNode(U,{id:d(Z),meta:o.meta.items},null,8,["id","meta"]),e.unref(m)?(e.openBlock(),e.createElementBlock("span",{key:0,class:"v__array-remove",onClick:it=>_(Z)},[e.createVNode(F)],8,$e)):e.createCommentVNode("",!0)]),_:2},1024)]),_:2},1032,["span"]))),128))]),_:1}),o.meta.description?(e.openBlock(),e.createElementBlock("div",Ee,e.toDisplayString(o.meta.description),1)):e.createCommentVNode("",!0),e.unref(u)?(e.openBlock(),e.createElementBlock("div",je,e.toDisplayString(e.unref(u)),1)):e.createCommentVNode("",!0)])]),_:1},8,["span","offset"])]),_:1})]),_:1})}}}),Pe={class:"v__label-text"},Me=["innerHTML"],De=["textContent"],Ae=["innerHTML"],Fe=e.defineComponent({__name:"Text",props:{id:null,meta:null},setup(o){const t=o,a=e.inject("state"),{appContext:l}=e.getCurrentInstance(),n=new j(l,a,t.id,t.meta),s=e.computed(()=>n.ui.value||{}),c=e.computed(()=>a.layout.value==="vertical"||a.layout.value==="inline"?void 0:{span:s.value.spanLabel}),r=e.computed(()=>a.layout.value==="vertical"||a.layout.value==="inline"?void 0:{span:s.value.spanControl,offset:s.value.offsetControl||0}),i=e.computed(()=>le(e.unref(s).text)?e.unref(s).text():e.unref(s).text);return(u,p)=>{const h=e.resolveComponent("a-form-item");return e.openBlock(),e.createElementBlock("div",null,[e.createVNode(h,{labelCol:e.unref(c),wrapperCol:e.unref(r),class:e.normalizeClass({"no-label":!o.meta.title})},e.createSlots({default:e.withCtx(()=>[e.unref(s).slotNameOfDefault?e.renderSlot(u.$slots,e.unref(s).slotNameOfDefault,{key:0},void 0,!0):(e.openBlock(),e.createElementBlock(e.Fragment,{key:1},[e.unref(s).html?(e.openBlock(),e.createElementBlock("span",{key:0,innerHTML:e.unref(s).html,class:"v__content-text"},null,8,Me)):(e.openBlock(),e.createElementBlock("span",{key:1,textContent:e.toDisplayString(e.unref(i)),class:"v__content-text"},null,8,De))],64))]),_:2},[o.meta.title?{name:"label",fn:e.withCtx(()=>[e.createElementVNode("span",Pe,e.toDisplayString(o.meta.title),1)]),key:"0"}:void 0,o.meta.description?{name:"extra",fn:e.withCtx(()=>[e.createElementVNode("div",{innerHTML:o.meta.description},null,8,Ae)]),key:"1"}:void 0]),1032,["labelCol","wrapperCol","class"])])}}}),at="",Q=(o,t)=>{const a=o.__vccOpts||o;for(const[l,n]of t)a[l]=n;return a},Te=Q(Fe,[["__scopeId","data-v-c98847ae"]]),Le=e.defineComponent({__name:"Textarea",props:{id:null,meta:null},setup(o){const t=o,a=e.inject("state"),{appContext:l}=e.getCurrentInstance(),n=new j(l,a,t.id,t.meta),{bindings:s}=I(Object.keys(B.Textarea.props),n.ui),c=e.toRef(t.meta,"readOnly"),r=e.toRef(t.meta,"maxLength"),i=e.computed(()=>n.ui.value||{}),u=e.computed({get(){return n.value},set(C){n.value=C}}),p=e.ref(!0);e.onMounted(()=>{e.unref(i).autoSize!=null&&(p.value=e.unref(i).autoSize)});function h(){var C,d;(d=(C=e.unref(i)).change)==null||d.call(C,e.unref(u))}function m(C){var d,y;(y=(d=e.unref(i)).focus)==null||y.call(d,C)}function f(C){var d,y;(y=(d=e.unref(i)).blur)==null||y.call(d,C)}function g(C){var d,y;(y=(d=e.unref(i)).pressEnter)==null||y.call(d,C)}return(C,d)=>{const y=e.resolveComponent("a-textarea");return e.openBlock(),e.createBlock(V,{id:o.id,meta:o.meta},{default:e.withCtx(()=>[e.createVNode(y,e.mergeProps(e.unref(s),{autoSize:p.value,defaultValue:o.meta.defaultValue,disabled:e.unref(c),maxlength:e.unref(r),value:e.unref(u),"onUpdate:value":d[0]||(d[0]=_=>e.isRef(u)?u.value=_:null),onChange:h,onFocus:m,onBlur:f,onPressEnter:g}),null,16,["autoSize","defaultValue","disabled","maxlength","value"])]),_:1},8,["id","meta"])}}});class H extends P{constructor(t,a,l,n){super(t,a,l,n),this.initValue()}initValue(){this._initMetaValue?this.value=this._initMetaValue:e.unref(this.meta).default&&(this.value=e.unref(this.meta).default)}setValue(t){switch(this.type){case"slider":this._value.value=re(t)||J(t)?t:void 0;break;default:this._value.value=t||void 0;break}}}function Ue(o,t){e.watch(o,()=>{t.validate._forceCompile()})}const ze=e.defineComponent({__name:"Slider",props:{id:null,meta:null},setup(o){const t=o,a=e.inject("state"),{appContext:l}=e.getCurrentInstance(),n=new H(l,a,t.id,t.meta),{bindings:s}=I(Object.keys(B.Slider.props),n.ui),c=e.toRef(t.meta,"readOnly"),r=e.toRef(t.meta,"minimum"),i=e.toRef(t.meta,"maximum"),u=e.toRef(t.meta,"multipleOf");Ue([r,i,u],a);const p=e.computed(()=>n.ui.value||{}),h=e.computed({get(){return n.value},set(d){p.value.range?n.value=d||[]:n.value=J(d)?d:void 0}}),m=e.computed(()=>p.value.tipFormatter===null);function f(d){const{tipFormatter:y}=p.value;return y?y(d):`${d}`}function g(d){var y,_;(_=(y=e.unref(p)).change)==null||_.call(y,d)}function C(d){var y,_;(_=(y=e.unref(p)).afterChange)==null||_.call(y,d)}return(d,y)=>{const _=e.resolveComponent("a-slider");return e.openBlock(),e.createBlock(V,{id:o.id,meta:o.meta},{default:e.withCtx(()=>[e.createVNode(_,e.mergeProps(e.unref(s),{disabled:e.unref(c),min:e.unref(r)||0,max:e.unref(i)||100,step:e.unref(u)||1,tipFormatter:e.unref(m)?null:f,value:e.unref(h),"onUpdate:value":y[0]||(y[0]=x=>e.isRef(h)?h.value=x:null),onChange:g,onAfterChange:C}),e.createSlots({_:2},[e.unref(p).slotNameOfMark?{name:"mark",fn:e.withCtx(x=>[e.renderSlot(d.$slots,e.unref(p).slotNameOfMark,e.normalizeProps(e.guardReactiveProps(x)))]),key:"0"}:void 0]),1040,["disabled","min","max","step","tipFormatter","value"])]),_:3},8,["id","meta"])}}}),He=e.defineComponent({__name:"Rate",props:{id:null,meta:null},setup(o){const t=o,a=e.inject("state"),{appContext:l}=e.getCurrentInstance(),n=new H(l,a,t.id,t.meta),{bindings:s}=I(Object.keys(B.Rate.props),n.ui),c=e.toRef(t.meta,"readOnly"),r=e.computed(()=>n.ui.value||{}),i=e.computed({get(){return n.value},set(h){n.value=h}});function u(h){var m,f;(f=(m=e.unref(r)).change)==null||f.call(m,h)}function p(h){var m,f;(f=(m=e.unref(r)).hoverChange)==null||f.call(m,h)}return(h,m)=>{const f=e.resolveComponent("a-rate");return e.openBlock(),e.createBlock(V,{id:o.id,meta:o.meta},{default:e.withCtx(()=>[e.createVNode(f,e.mergeProps(e.unref(s),{disabled:e.unref(c),count:o.meta.maximum||5,value:e.unref(i),"onUpdate:value":m[0]||(m[0]=g=>e.isRef(i)?i.value=g:null),onChange:u,onHoverChange:p}),e.createSlots({_:2},[e.unref(r).slotNameOfCharacter?{name:"character",fn:e.withCtx(()=>[e.renderSlot(h.$slots,e.unref(r).slotNameOfCharacter)]),key:"0"}:void 0]),1040,["disabled","count","value"])]),_:3},8,["id","meta"])}}}),qe=e.defineComponent({__name:"Tag",props:{id:null,meta:null},setup(o){const t=o,a=e.inject("state"),{appContext:l}=e.getCurrentInstance(),n=new H(l,a,t.id,t.meta),s=e.toRef(t.meta,"readOnly"),c=e.ref([]),r=e.computed(()=>n.ui.value||{}),i=e.computed({get(){return n.value},set(m){r.value.range?n.value=m||[]:n.value=m}});e.watch(()=>e.unref(n.meta).enum,h,{immediate:!0});function u(m,f){var g,C,d,y;m.disabled||(m.checked=f,p(),(C=(g=e.unref(r)).checkedChange)==null||C.call(g,f),(y=(d=e.unref(r)).change)==null||y.call(d,e.toRaw(e.unref(i))))}function p(){const m=e.unref(c).filter(f=>f.checked).map(f=>f.value);i.value=m.length?m:void 0}function h(m){let f=e.unref(m);f==null||!Array.isArray(f)||f.length===0||(typeof f[0]!="object"&&(f=f.map(g=>({label:g,value:g}))),f.forEach(g=>{g.checked=(i.value||[]).indexOf(g.value)>-1}),f.forEach(g=>g.disabled=t.meta.readOnly),c.value=f)}return(m,f)=>{const g=e.resolveComponent("a-checkable-tag");return e.openBlock(),e.createBlock(V,{id:o.id,meta:o.meta},{default:e.withCtx(()=>[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(c.value,C=>(e.openBlock(),e.createBlock(g,{key:C.value,class:e.normalizeClass({disabled:C.disabled||e.unref(s)}),checked:C.checked,onChange:d=>u(C,d)},{default:e.withCtx(()=>[e.createElementVNode("span",null,e.toDisplayString(C.label),1)]),_:2},1032,["class","checked","onChange"]))),128))]),_:1},8,["id","meta"])}}}),rt="",Ke=Q(qe,[["__scopeId","data-v-de1191cf"]]),Ge=e.defineComponent({__name:"Cascader",props:{id:null,meta:null},setup(o){const t=o,a=e.inject("state"),{appContext:l}=e.getCurrentInstance(),n=new j(l,a,t.id,t.meta),{bindings:s}=I(Object.keys(B.Cascader.props),n.ui),c=e.toRef(t.meta,"readOnly"),r=e.computed(()=>n.ui.value||{}),i=e.computed({get(){return n.value},set(g){n.value=g}});function u(g,C){var d,y;(y=(d=e.unref(r)).change)==null||y.call(d,g,C)}function p(g){var C,d;(d=(C=e.unref(r)).dropdownVisibleChange)==null||d.call(C,g)}function h(g){var C,d;(d=(C=e.unref(r)).search)==null||d.call(C,g)}function m(g){var C,d;(d=(C=e.unref(r)).blur)==null||d.call(C,g)}function f(g){var C,d;(d=(C=e.unref(r)).focus)==null||d.call(C,g)}return(g,C)=>{const d=e.resolveComponent("a-cascader");return e.openBlock(),e.createBlock(V,{id:o.id,meta:o.meta},{default:e.withCtx(()=>[e.createVNode(d,e.mergeProps(e.unref(s),{disabled:e.unref(c),options:o.meta.enum,value:e.unref(i),"onUpdate:value":C[0]||(C[0]=y=>e.isRef(i)?i.value=y:null),onChange:u,onDropdownVisibleChange:p,onSearch:h,onBlur:m,onFocus:f}),e.createSlots({_:2},[e.unref(r).slotNameOfDefault?{name:"default",fn:e.withCtx(()=>[e.createElementVNode("span",null,[e.renderSlot(g.$slots,e.unref(r).slotNameOfDefault)])]),key:"0"}:void 0,e.unref(r).slotNameOfSuffixIcon?{name:"suffixIcon",fn:e.withCtx(()=>[e.renderSlot(g.$slots,e.unref(r).slotNameOfSuffixIcon)]),key:"1"}:void 0,e.unref(r).slotNameOfDisplayRender?{name:"displayRender",fn:e.withCtx(y=>[e.renderSlot(g.$slots,e.unref(r).slotNameOfDisplayRender,e.normalizeProps(e.guardReactiveProps(y)))]),key:"2"}:void 0]),1040,["disabled","options","value"])]),_:3},8,["id","meta"])}}}),We=e.defineComponent({__name:"Radio",props:{id:null,meta:null},setup(o){const t=o,a=e.inject("state"),{appContext:l}=e.getCurrentInstance(),n=new j(l,a,t.id,t.meta),{bindings:s}=I(Object.keys(B.RadioGroup.props),n.ui),c=e.toRef(t.meta,"readOnly"),r=e.computed(()=>n.ui.value||{}),i=e.computed({get(){return n.value},set(p){n.value=p}});function u(){r.value.change&&r.value.change(e.unref(i))}return(p,h)=>{const m=e.resolveComponent("a-radio-group");return e.openBlock(),e.createBlock(V,{id:o.id,meta:o.meta},{default:e.withCtx(()=>[e.createVNode(m,e.mergeProps({class:{"v__radio-vertical":e.unref(r).direction==="vertical"}},e.unref(s),{value:e.unref(i),"onUpdate:value":h[0]||(h[0]=f=>e.isRef(i)?i.value=f:null),disabled:e.unref(c),onChange:u}),null,16,["class","value","disabled"])]),_:1},8,["id","meta"])}}}),Je=e.defineComponent({__name:"Select",props:{id:null,meta:null},setup(o){const t=o,a=e.inject("state"),{appContext:l}=e.getCurrentInstance(),n=new j(l,a,t.id,t.meta),{bindings:s}=I(Object.keys(B.Select.props),n.ui),c=e.toRef(t.meta,"readOnly"),r=e.computed(()=>n.ui.value||{}),i=e.computed({get(){return n.value},set(k){n.value=k}});function u(k,O){e.unref(r).change&&e.unref(r).change(k,O)}function p(){e.unref(r).blur&&e.unref(r).blur()}function h(k,O){e.unref(r).deselect&&e.unref(r).deselect(k,O)}function m(k){e.unref(r).dropdownVisibleChange&&e.unref(r).dropdownVisibleChange(k)}function f(){e.unref(r).focus&&e.unref(r).focus()}function g(){e.unref(r).inputKeyDown&&e.unref(r).inputKeyDown()}function C(){e.unref(r).mouseenter&&e.unref(r).mouseenter()}function d(){e.unref(r).mouseleave&&e.unref(r).mouseleave()}function y(){e.unref(r).popupScroll&&e.unref(r).popupScroll()}function _(k){e.unref(r).search&&e.unref(r).search(k)}function x(k,O){e.unref(r).select&&e.unref(r).select(k,O)}return(k,O)=>{const N=e.resolveComponent("a-select");return e.openBlock(),e.createBlock(V,{id:o.id,meta:o.meta},{default:e.withCtx(()=>[e.createVNode(N,e.mergeProps({value:e.unref(i),"onUpdate:value":O[0]||(O[0]=R=>e.isRef(i)?i.value=R:null)},e.unref(s),{disabled:e.unref(c),onBlur:p,onDeselect:h,onFocus:f,onInputKeydown:g,onMouseenter:C,onMouseleave:d,onPopupScroll:y,onSearch:_,onSelect:x,onDropdownVisibleChange:m,onChange:u}),e.createSlots({default:e.withCtx(()=>[e.unref(r).slotNameOfSelectDefault?e.renderSlot(k.$slots,e.unref(r).slotNameOfSelectDefault,{key:0}):e.createCommentVNode("",!0)]),_:2},[e.unref(r).slotNameOfClearIcon?{name:"clearIcon",fn:e.withCtx(()=>[e.renderSlot(k.$slots,e.unref(r).slotNameOfClearIcon)]),key:"0"}:void 0,e.unref(r).slotNameOfDropdownRender?{name:"dropdownRender",fn:e.withCtx(()=>[e.renderSlot(k.$slots,e.unref(r).slotNameOfDropdownRender)]),key:"1"}:void 0,e.unref(r).slotNameOfMaxTagPlaceholder?{name:"maxTagPlaceholder",fn:e.withCtx(()=>[e.renderSlot(k.$slots,e.unref(r).slotNameOfMaxTagPlaceholder)]),key:"2"}:void 0,e.unref(r).slotNameOfMenuItemSelectedIcon?{name:"menuItemSelectedIcon",fn:e.withCtx(()=>[e.renderSlot(k.$slots,e.unref(r).slotNameOfMenuItemSelectedIcon)]),key:"3"}:void 0,e.unref(r).slotNameOfNotFoundContent?{name:"notFoundContent",fn:e.withCtx(()=>[e.renderSlot(k.$slots,e.unref(r).slotNameOfNotFoundContent)]),key:"4"}:void 0,e.unref(r).slotNameOfOption?{name:"option",fn:e.withCtx(R=>[e.renderSlot(k.$slots,e.unref(r).slotNameOfOption,e.normalizeProps(e.guardReactiveProps(R)))]),key:"5"}:void 0,e.unref(r).slotNameOfPlaceholder?{name:"placeholder",fn:e.withCtx(()=>[e.renderSlot(k.$slots,e.unref(r).slotNameOfPlaceholder)]),key:"6"}:void 0,e.unref(r).slotNameOfRemoveIcon?{name:"removeIcon",fn:e.withCtx(()=>[e.renderSlot(k.$slots,e.unref(r).slotNameOfRemoveIcon)]),key:"7"}:void 0,e.unref(r).slotNameOfSuffixIcon?{name:"suffixIcon",fn:e.withCtx(()=>[e.renderSlot(k.$slots,e.unref(r).slotNameOfSuffixIcon)]),key:"8"}:void 0,e.unref(r).slotNameOfTagRender?{name:"tagRender",fn:e.withCtx(()=>[e.renderSlot(k.$slots,e.unref(r).slotNameOfTagRender)]),key:"9"}:void 0]),1040,["value","disabled"])]),_:3},8,["id","meta"])}}});function w(o,t,a){o.component(t,a)}function Ye(o){w(o,"v-object",ye),w(o,"v-string",_e),w(o,"v-boolean",ke),w(o,"v-array",Re),w(o,"v-autocomplete",be),w(o,"v-checkbox",Oe),w(o,"v-date",we),w(o,"v-number",Y),w(o,"v-integer",Y),w(o,"v-time",Ne),w(o,"v-text",Te),w(o,"v-radio",We),w(o,"v-textarea",Le),w(o,"v-slider",ze),w(o,"v-rate",He),w(o,"v-tag",Ke),w(o,"v-select",Je),w(o,"v-cascader",Ge)}const Qe=[de,V];function Xe(o){Qe.forEach(t=>{o.component(t.name,t)}),Ye(o)}const Ze={installFormly:Xe},lt="",ve={install:function(o,t){if(o.config.globalProperties.emitter=ee.default(),!t.lib||t.lib==="antdv")Ze.installFormly(o);else throw new Error("Unsupport lib");return o.config.globalProperties.$VFORMLY_OPTIONS=t,o}};S.default=ve,Object.defineProperties(S,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
