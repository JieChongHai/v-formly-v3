(function(k,e){typeof exports=="object"&&typeof module<"u"?e(exports,require("vue"),require("ajv"),require("ant-design-vue"),require("mitt")):typeof define=="function"&&define.amd?define(["exports","vue","ajv","ant-design-vue","mitt"],e):(k=typeof globalThis<"u"?globalThis:k||self,e(k["v-formly-v3"]={},k.Vue,k.Ajv,k.antDesignVue,k.mitt))})(this,function(k,e,S,I,K){"use strict";var be=Object.defineProperty;var Oe=(k,e,S)=>e in k?be(k,e,{enumerable:!0,configurable:!0,writable:!0,value:S}):k[e]=S;var y=(k,e,S)=>(Oe(k,typeof e!="symbol"?e+"":e,S),S);const U=n=>n&&typeof n=="object"&&"default"in n?n:{default:n},W=U(S),J=U(K);function P(n){return n.config.globalProperties.emitter}var N=(n=>(n.Object="object",n.Array="array",n.Boolean="boolean",n.Integer="integer",n))(N||{});function A(n){const t=[],r="slotName";return n&&!n.type&&(n.type=N.Object),M(n,t,r),{slotsName:t}}function M(n,t,r){switch(n.type){case N.Object:Object.keys(n.properties).forEach(s=>{const a=n.properties[s];M(a,t,r)});break;case N.Array:Object.keys(n.items.properties).forEach(s=>{const a=n.items.properties[s];M(a,t,r)});break;default:if(n.ui){const s=Object.keys(n.ui).filter(a=>a.startsWith(r));s&&s.length>0&&s.forEach(a=>{t.push(n.ui[a])})}break}}function Y(){return{visibleIf:Q}}function Q(n,t,r,s){if(!t.ui||!t.ui.visibleIf)return r;const a=Object.keys(t.ui.visibleIf)[0],l=t.ui.visibleIf[a];return s=s||{},typeof l!="function"||a!==s.id?r:l.call(null,n,s.id,s.value)}const F="form-value-change",R="form-error-change",L=e.defineComponent({__name:"FormlyItem",props:{id:null,show:{type:Boolean,default:!0},meta:null},setup(n){const t=n;let r=e.ref(!0);const{slotsName:s}=A(t.meta),a=e.inject("state"),l=e.computed(()=>`v-${t.meta.ui&&t.meta.ui.component||t.meta.type}`),o=e.computed(()=>a.layout);i();function i(){if(!t.meta.type)throw new Error("Form item type must be one of these: number, string, boolean, array, object");r.value=t.show,m(r.value,t.id);const{visibleIf:f}=Y(),{appContext:d}=e.getCurrentInstance();P(d).on(`${F}-${a._formId}`,c=>{r.value=f(a.context,t.meta,r.value,{id:c.id,value:c.value});const u=a.context.getContext(t.id);u&&m(r.value,u.id)})}function m(f,d){f?a._ignoreErrorIds=a._ignoreErrorIds.filter(p=>p!==d):a._ignoreErrorIds.indexOf(d)===-1&&a._ignoreErrorIds.push(d)}return(f,d)=>(e.openBlock(),e.createElementBlock("div",{style:e.normalizeStyle({display:e.unref(o)==="inline"?"inline-block":"block"})},[e.unref(r)?(e.openBlock(),e.createBlock(e.resolveDynamicComponent(e.unref(l)),{key:0,id:n.id,meta:n.meta},e.createSlots({_:2},[e.renderList(e.unref(s),p=>({name:p,fn:e.withCtx(c=>[e.renderSlot(f.$slots,p,e.normalizeProps(e.guardReactiveProps({...c})))])}))]),1032,["id","meta"])):e.createCommentVNode("",!0)],4))}});class X{constructor(){y(this,"_map",new Map)}addContext(t,r){this._map.set(t,r)}removeContext(t){this._map.delete(t)}getContext(t){return this._map.get(t)}getContexts(){return this._map}}function Z(n=8,t=10){const r="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),s=t||r.length,a=[];if(n)for(let l=0;l<n;l++)a[l]=r[0|Math.random()*s];else{let l;a[8]=a[13]=a[18]=a[23]="-",a[14]="4";for(let o=0;o<36;o++)a[o]||(l=0|Math.random()*16,a[o]=r[o==19?l&3|8:l])}return a.join("")}function D(n){if(n===void 0)return;if(n===null)return null;const t=Object.assign({},n);return Object.keys(t).forEach(r=>t[r]=typeof n[r]=="object"?D(n[r]):n[r]),Array.isArray(n)?(t.length=n.length,Array.from(t)):t}function z(){const{appContext:n}=e.getCurrentInstance(),t=n.config.globalProperties;return{appContext:n,globalProperties:t}}class v{constructor(){y(this,"_formId",Z(4));y(this,"_ignoreErrorIds",[]);y(this,"_context");y(this,"_layout","horizontal");y(this,"_ajvOptions",{allErrors:!0,strict:!1,loopEnum:50});y(this,"_formData",e.ref({}));y(this,"_meta",{});y(this,"_ui",{ingoreKeywords:["type","enum"],spanLabel:5,spanControl:19,grid:{gutter:36,span:24},errors:{required:"\u5FC5\u586B\u9879"}});y(this,"_validate");this._applyUseOptions()}get context(){return this._context}set context(t){this._context=t}get layout(){return this._layout}set layout(t){this._layout=t}get ajvOptions(){return this._ajvOptions}set ajvOptions(t){this._ajvOptions=t}get formData(){return this._formData.value}set formData(t){this._formData.value=t}get meta(){return this._meta}set meta(t){this._meta=t}get ui(){return this._ui}set ui(t){this._ui=Object.assign({},this._ui,t)}get validate(){return this._validate}set validate(t){this._validate=t}updateObjProp(t,r,s){const[a,...l]=r.split("/").filter(o=>o);l.length?this.updateObjProp(t[a],l.join("/"),s):t&&(t[a]=s)}_applyUseOptions(){const{globalProperties:t}=z(),r=t.$VFORMLY_OPTIONS;!r||typeof r!="object"||(this.ui=r.ui)}}class ee{constructor(t,r){y(this,"state");y(this,"_ajv");y(this,"_validate");y(this,"appContext");this.state=r,this._ajv=new W.default(r.ajvOptions),this._validate=null,this.appContext=t}async runValidateForm(){const{valid:t,errors:r}=this._isAjvValid(),a=this.state.context.getContexts().values();let l=!0;for(const o of a)l=await this._validation(o,t,r)&&l;return l}async runValidationFormItem(t){const{valid:r,errors:s}=this._isAjvValid();return await this._validation(t,r,s)}_ajvValidate(t){return this._validate?this._validate:(this._validate=this._ajv.compile(t),this._validate)}_getAjvError(t,r){let s;for(let a=0;a<r.length;a++){const l=r[a],o=this._getId(l);if(t===o){s=l;break}}return s}_isAjvValid(){const t=this._ajvValidate(this.state.meta);return{valid:t(this.state.formData||{}),errors:t.errors}}async _validation(t,r,s){let a=[];const l=`${R}-${this.state._formId}`,o=P(this.appContext);if(r)return o.emit(l,{id:t.id,error:void 0}),!0;{const i=this._getCustomError(t),m=await this._getCustomAsyncError(t),f=[...i,...m];this._replaceWithDefaultErrors(t,s),this._replaceWithCustomErrors(t.id,s,f);const d=this.state.ui.ingoreKeywords||[];a=s.filter(c=>d.indexOf(c.keyword)===-1),a=this._removeIgnoreErrors(a);const p=this._getAjvError(t.id,a);return o.emit(l,{id:t.id,error:p}),!p}}_getCustomError(t){const r=t.meta.ui&&t.meta.ui.validator;return r?r(t.value):[]}async _getCustomAsyncError(t){const r=t.meta.ui&&t.meta.ui.validatorAsync;return r?await r(t.value):[]}_replaceWithDefaultErrors(t,r){if(!r||r.length===0)return;const s=t.meta.ui&&t.meta.ui.errors||{},a=Object.assign({},this.state.ui.errors,s),l=Object.keys(a);l&&l.length>0&&r.forEach(o=>{l.indexOf(o.keyword)>-1&&(o.message=a[o.keyword])})}_replaceWithCustomErrors(t,r,s){s.forEach(a=>{const l=r.find(o=>o.keyword===a.keyword&&this._getId(o)===t);l&&(l.message=a.message)})}_removeIgnoreErrors(t){const r=this.state._ignoreErrorIds;return!r||r.length===0?t:t.filter(a=>r.indexOf(this._getId(a))===-1)}_getId(t){return t.params&&t.params.missingProperty?`${t.instancePath?t.instancePath:""}/${t.params.missingProperty}`:`${t.instancePath}`}}const te={class:"v__formly"},ne={name:"v-formly-v3"},oe=e.defineComponent({...ne,props:{modelValue:null,layout:{default:"horizontal"},button:null,meta:null},emits:["update:modelValue","form-reset","form-submit"],setup(n,{expose:t,emit:r}){const s=n;if(!s.meta||typeof s.meta.properties>"u")throw new Error("Invalid Schema");let a={type:N.Object},l=e.ref(!1);const o=new v;e.provide("state",o);const{slotsName:i}=A(s.meta),{appContext:m}=e.getCurrentInstance(),f=P(m);p();const d=e.computed(()=>{const C=Object.assign({},o.ui);return s.layout==="vertical"?null:{span:C.spanControl,offset:C.spanLabel}});e.watch(()=>s.modelValue,(C,b)=>{JSON.stringify(C)!==JSON.stringify(b)&&h(C)},{deep:!1}),e.watch(()=>o.formData,(C,b)=>{r("update:modelValue",C)},{deep:!0});function p(){o.layout=s.layout,a=Object.assign({},a,s.meta),o.meta=a,o.formData=Object.assign({},s.modelValue),c(o.formData,s.meta.properties),o.context=new X,o.validate=new ee(m,o)}function c(C,b){Object.keys(b).forEach(O=>{const x=b[O];if(x.type!=="null")switch(x.type){case N.Object:C[O]=C[O]||{},c(C[O],x.properties);break;case N.Array:C[O]=C[O]||[];break;case N.Boolean:break;default:C[O]=C[O]||void 0;break}})}function u(C){return o.context.getContext(C)}async function _(){return await o.validate.runValidateForm()}function h(C){const b=o.context.getContext("/");b&&(b.value=C,r("update:modelValue",o.formData))}function g(){r("form-reset",D(o.formData)),h({})}async function w(){l.value=!0;const C=await _();l.value=!1,r("form-submit",{valid:C,data:C?D(o.formData):void 0})}return e.onBeforeUnmount(()=>{f.all.clear()}),t({getContext:u,validate:_,reset:h,clearForm:g,submitForm:w}),(C,b)=>{const O=e.resolveComponent("a-button"),x=e.resolveComponent("a-space"),H=e.resolveComponent("a-form");return e.openBlock(),e.createElementBlock("div",te,[e.createVNode(H,{class:e.normalizeClass(["v",{v__inline:n.layout==="inline",v__horizontal:n.layout==="horizontal"}]),layout:n.layout},{default:e.withCtx(()=>[e.createVNode(L,{id:"/",meta:e.unref(a)},e.createSlots({_:2},[e.renderList(e.unref(i),G=>({name:G,fn:e.withCtx(xe=>[e.renderSlot(C.$slots,G,e.normalizeProps(e.guardReactiveProps({...xe})))])}))]),1032,["meta"]),n.button==="default"?(e.openBlock(),e.createBlock(H,{key:0,wrapperCol:e.unref(d),class:"v__default-submit-button"},{default:e.withCtx(()=>[e.createVNode(x,null,{default:e.withCtx(()=>[e.createVNode(O,{type:"danger",onClick:g},{default:e.withCtx(()=>[e.createTextVNode(" \u91CD\u7F6E ")]),_:1}),e.createVNode(O,{type:"primary",onClick:w,loading:e.unref(l)},{default:e.withCtx(()=>[e.createTextVNode(" \u63D0\u4EA4 ")]),_:1},8,["loading"])]),_:1})]),_:1},8,["wrapperCol"])):n.button==="custom"?e.renderSlot(C.$slots,"button",{key:1,loading:e.unref(l),clearForm:g,submitForm:w}):(e.openBlock(),e.createElementBlock(e.Fragment,{key:2},[],64))]),_:3},8,["layout","class"])])}}}),ae={class:"v__label-text"},re={key:0,class:"v__optional"},se=["innerHTML"],le={key:1,class:"ant-form-item-explain-error"},ie={name:"v-wrapper"},E=e.defineComponent({...ie,props:{id:null,show:{type:Boolean},meta:null},setup(n){const t=n,{globalProperties:r}=z(),s=e.inject("state"),a=s.context.getContext(t.id),l=e.computed(()=>Object.assign({},s.ui,t.meta.ui)),o=e.computed(()=>Object.assign({},s.ui,t.meta.ui).optionalHelp),i=e.computed(()=>s.layout==="vertical"||s.layout==="inline"?void 0:{span:l.value.spanLabel}),m=e.computed(()=>s.layout==="vertical"||s.layout==="inline"?void 0:{span:l.value.spanControl,offset:l.value.offsetControl||0}),f=e.computed({get(){return a.error.value},set(u){a.error.value=u}}),{appContext:d}=e.getCurrentInstance(),p=P(d);p.on(`${R}-${s._formId}`,c),e.onBeforeUnmount(()=>{p.off(`${R}-${s._formId}`,c)});function c(u){u.id===t.id&&(f.value=u.error?u.error.message:void 0)}return(u,_)=>{const h=e.resolveComponent("a-tooltip"),g=e.resolveComponent("a-form-item");return e.openBlock(),e.createBlock(g,{labelCol:e.unref(i),wrapperCol:e.unref(m),required:e.unref(l).showRequired,class:e.normalizeClass({"ant-form-item-has-error":e.unref(f)})},{label:e.withCtx(()=>[e.createElementVNode("span",ae,e.toDisplayString(n.meta.title),1),e.unref(l).optional||e.unref(o)?(e.openBlock(),e.createElementBlock("span",re,[e.createTextVNode(e.toDisplayString(e.unref(l).optional)+" ",1),e.unref(o)?(e.openBlock(),e.createBlock(h,{key:0,title:e.unref(o).text,placement:e.unref(o).placement,trigger:e.unref(o).trigger,overlayStyle:e.unref(o).overlayStyle,mouseEnterDelay:e.unref(o).mouseEnterDelay,mouseLeaveDelay:e.unref(o).mouseLeaveDelay,overlayClassName:e.unref(o).overlayClassName},{default:e.withCtx(()=>[e.unref(o).icon?(e.openBlock(),e.createBlock(e.resolveDynamicComponent(e.unref(r).$antIcons[e.unref(o).icon]),{key:0})):e.createCommentVNode("",!0)]),_:1},8,["title","placement","trigger","overlayStyle","mouseEnterDelay","mouseLeaveDelay","overlayClassName"])):e.createCommentVNode("",!0)])):e.createCommentVNode("",!0)]),default:e.withCtx(()=>[e.renderSlot(u.$slots,"default"),n.meta.description?(e.openBlock(),e.createElementBlock("div",{key:0,class:"ant-form-extra",innerHTML:n.meta.description},null,8,se)):e.createCommentVNode("",!0),e.unref(f)?(e.openBlock(),e.createElementBlock("div",le,e.toDisplayString(e.unref(f)),1)):e.createCommentVNode("",!0)]),_:3},8,["labelCol","wrapperCol","required","class"])}}});class V{constructor(t,r,s,a){y(this,"id");y(this,"state");y(this,"meta",e.ref({}));y(this,"type");y(this,"ui",e.ref({}));y(this,"error",e.ref(void 0));y(this,"_value",e.ref());y(this,"_initMetaValue");y(this,"appContext");if(this.constructor==V)throw new Error("Abstract classes can't be instantiated.");this.id=s,this.state=r,this.meta.value=a,this.type=a.ui&&a.ui.component||a.type,this.ui.value=Object.assign({},r.ui,a.ui),this.appContext=t,this.error.value=void 0,r.context.addContext(s,this),this._value.value=void 0,this._initMetaValue=this.getInitMetaValue(),this.initValue()}setValue(t){this._value.value=t||void 0}get value(){return this._value.value}set value(t){if(this._value.value===t)return;this.setValue(t),P(this.appContext).emit(`${F}-${this.state._formId}`,{id:this.id,value:this._value.value}),this.state.updateObjProp(this.state.formData,this.id,this._value.value),this.state.validate.runValidationFormItem(this)}getInitMetaValue(){const t=this.id.split("/").filter(s=>s);let r="";return t.reduce((s,a,l)=>(l===t.length-1&&(r=s[a]),s[a]||{}),this.state.formData),r}}class ce extends V{constructor(r,s,a,l){super(r,s,a,l);y(this,"childMetaPairs");this.childMetaPairs=this.buildChildMetaPairs(a,l),s.context.addContext(a,this)}initValue(){}set value(r){this.childMetaPairs.forEach(({key:s,propertyName:a})=>{const l=this.state.context.getContext(s);l.value=(r||{})[a]})}buildChildMetaPairs(r,s){const a=[];for(const l of Object.keys(s.properties||{})){const o=r==="/"?`/${l}`:`${r}/${l}`;a.push({key:o,propertyName:l,meta:s.properties[l]})}return a}}const de=e.defineComponent({__name:"Object",props:{id:null,meta:null},setup(n){const t=n,{slotsName:r}=A(t.meta),s=e.inject("state"),{appContext:a}=e.getCurrentInstance(),l=new ce(a,s,t.id,t.meta),o=e.computed(()=>l.ui.value||{}),i=e.computed(()=>Object.assign({},s.ui.grid,o.value.grid).gutter),m=e.computed(()=>s.layout);function f(c){return c.ui&&c.ui.show}function d(c){if(m.value==="inline")return{};const u=c.meta.ui&&c.meta.ui.grid||{};return Object.assign({},s.ui.grid,o.value.grid,u)}const p=l.childMetaPairs;return(c,u)=>{const _=e.resolveComponent("a-col"),h=e.resolveComponent("a-row");return e.openBlock(),e.createBlock(h,{gutter:e.unref(i)},{default:e.withCtx(()=>[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(p),(g,w)=>(e.openBlock(),e.createBlock(_,{key:w,span:d(g).span,offset:d(g).offset,xs:d(g).xs,sm:d(g).sm,md:d(g).md,lg:d(g).lg,xl:d(g).xl,xxl:d(g).xxl,style:e.normalizeStyle({display:e.unref(m)==="inline"?"inline-block":"block"})},{default:e.withCtx(()=>[e.createVNode(L,{id:g.key,meta:g.meta,show:f(g.meta)},e.createSlots({_:2},[e.renderList(e.unref(r),C=>({name:C,fn:e.withCtx(b=>[e.renderSlot(c.$slots,C,e.normalizeProps(e.guardReactiveProps({...b})))])}))]),1032,["id","meta","show"])]),_:2},1032,["span","offset","xs","sm","md","lg","xl","xxl","style"]))),128))]),_:3},8,["gutter"])}}});class $ extends V{constructor(r,s,a,l){var o;super(r,s,a,l);y(this,"open");this.meta.value&&(this.open=((o=this.meta.value.ui)==null?void 0:o.open)||!1)}initValue(){this._initMetaValue?this.value=this._initMetaValue:this.meta.value.default&&(this.value=this.meta.value.default)}setValue(r){this._value.value=r||void 0}}function j(n,t){const r=e.ref({});return e.watch(()=>t.value,(s,a)=>{Object.keys(s).forEach(o=>{n.indexOf(o)>-1&&(r.value[o]=t.value[o])})},{immediate:!0,deep:!0}),{bindings:r}}const fe=e.defineComponent({__name:"String",props:{id:null,meta:null},setup(n){const t=n,r=e.inject("state"),{appContext:s}=e.getCurrentInstance(),a=new $(s,r,t.id,t.meta),{bindings:l}=j(Object.keys(I.Input.props),a.ui),o=e.computed(()=>a.ui.value||{}),i=e.computed({get(){return a.value},set(f){a.value=f}});function m(){o.value.change&&o.value.change(e.unref(i))}return(f,d)=>{const p=e.resolveComponent("a-input");return e.openBlock(),e.createBlock(E,{id:n.id,meta:n.meta},{default:e.withCtx(()=>[e.createVNode(p,e.mergeProps(e.unref(l),{defaultValue:n.meta.defaultValue,disabled:n.meta.readOnly,maxLength:n.meta.maxLength,value:e.unref(i),"onUpdate:value":d[0]||(d[0]=c=>e.isRef(i)?i.value=c:null),onChange:m}),e.createSlots({_:2},[e.unref(o).slotNameOfPrefix?{name:"prefix",fn:e.withCtx(()=>[e.renderSlot(f.$slots,e.unref(o).slotNameOfPrefix)]),key:"0"}:void 0,e.unref(o).slotNameOfSuffix?{name:"suffix",fn:e.withCtx(()=>[e.renderSlot(f.$slots,e.unref(o).slotNameOfSuffix)]),key:"1"}:void 0,e.unref(o).slotNameOfAddonBefore?{name:"addonBefore",fn:e.withCtx(()=>[e.renderSlot(f.$slots,e.unref(o).slotNameOfAddonBefore)]),key:"2"}:void 0,e.unref(o).slotNameOfAddonAfter?{name:"addonAfter",fn:e.withCtx(()=>[e.renderSlot(f.$slots,e.unref(o).slotNameOfAddonAfter)]),key:"3"}:void 0]),1040,["defaultValue","disabled","maxLength","value"])]),_:3},8,["id","meta"])}}});class me extends V{constructor(t,r,s,a){super(t,r,s,a)}initValue(){typeof this._initMetaValue<"u"?this.value=this._initMetaValue:typeof this.meta.value.default=="boolean"&&(this.value=this.meta.value.default)}setValue(t){this._value.value=t||!1}}const ue=e.defineComponent({__name:"Boolean",props:{id:null,meta:null},setup(n){const t=n,r=e.inject("state"),{appContext:s}=e.getCurrentInstance(),a=new me(s,r,t.id,t.meta),{bindings:l}=j(Object.keys(I.Switch.props),a.ui),o=e.computed(()=>a.ui.value||{}),i=e.computed({get(){return a.value},set(f){a.value=f||!1}});function m(){o.value.change&&o.value.change(e.unref(i))}return(f,d)=>{const p=e.resolveComponent("a-switch");return e.openBlock(),e.createBlock(E,{id:n.id,meta:n.meta},{default:e.withCtx(()=>[e.createVNode(p,e.mergeProps({class:"v__boolean",checked:e.unref(i),"onUpdate:checked":d[0]||(d[0]=c=>e.isRef(i)?i.value=c:null)},e.unref(l),{disabled:n.meta.readOnly,onChange:m}),e.createSlots({_:2},[e.unref(o).slotNameOfCheckedChildren?{name:"checkedChildren",fn:e.withCtx(()=>[e.renderSlot(f.$slots,e.unref(o).slotNameOfCheckedChildren)]),key:"0"}:void 0,e.unref(o).slotNameOfUnCheckedChildren?{name:"unCheckedChildren",fn:e.withCtx(()=>[e.renderSlot(f.$slots,e.unref(o).slotNameOfUnCheckedChildren)]),key:"1"}:void 0]),1040,["checked","disabled"])]),_:3},8,["id","meta"])}}}),pe=e.defineComponent({__name:"AutoComplete",props:{id:null,meta:null},setup(n){const t=n,r=e.inject("state"),{appContext:s}=e.getCurrentInstance(),a=new $(s,r,t.id,t.meta),{bindings:l}=j(Object.keys(I.AutoComplete.props),a.ui),o=e.computed(()=>a.ui.value||{}),i=e.computed({get(){return a.value},set(p){a.value=p||void 0}});function m(p){o.value.change&&o.value.change(e.unref(p))}function f(p){o.value.search&&o.value.search(p,e.unref(i))}function d(p,c){o.value.select&&o.value.select(e.unref(p),c)}return(p,c)=>{const u=e.resolveComponent("a-auto-complete");return e.openBlock(),e.createBlock(E,{id:n.id,meta:n.meta},{default:e.withCtx(()=>[e.createVNode(u,e.mergeProps(e.unref(l),{disabled:n.meta.readOnly,value:e.unref(i),"onUpdate:value":c[0]||(c[0]=_=>e.isRef(i)?i.value=_:null),onChange:m,onSearch:f,onSelect:d}),e.createSlots({_:2},[e.unref(o).slotNameOfOption?{name:"option",fn:e.withCtx(_=>[e.renderSlot(p.$slots,e.unref(o).slotNameOfOption,e.normalizeProps(e.guardReactiveProps(_)))]),key:"0"}:void 0,e.unref(o).slotNameOfDefault?{name:"default",fn:e.withCtx(()=>[e.renderSlot(p.$slots,e.unref(o).slotNameOfDefault)]),key:"1"}:void 0]),1040,["disabled","value"])]),_:3},8,["id","meta"])}}}),he=e.defineComponent({__name:"Checkbox",props:{id:null,meta:null},setup(n){const t=n,r=e.inject("state"),{appContext:s}=e.getCurrentInstance(),a=new $(s,r,t.id,t.meta),{bindings:l}=j(Object.keys(I.CheckboxGroup.props),a.ui),o=e.computed(()=>a.ui.value||{}),i=e.computed({get(){return a.value},set(f){a.value=f}});function m(){o.value.change&&o.value.change(e.unref(i))}return(f,d)=>{const p=e.resolveComponent("a-checkbox-group"),c=e.resolveComponent("a-checkbox"),u=e.resolveComponent("a-col"),_=e.resolveComponent("a-row");return e.openBlock(),e.createBlock(E,{id:n.id,meta:n.meta},{default:e.withCtx(()=>[e.unref(o).span?(e.openBlock(),e.createBlock(p,{key:1,value:e.unref(i),"onUpdate:value":d[1]||(d[1]=h=>e.isRef(i)?i.value=h:null),disabled:n.meta.readOnly,onChange:m,class:"v__checkbox"},{default:e.withCtx(()=>[e.createVNode(_,null,{default:e.withCtx(()=>[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(n.meta.enum,(h,g)=>(e.openBlock(),e.createBlock(u,{class:"v__text-left",span:e.unref(o).span,key:g},{default:e.withCtx(()=>[e.createVNode(c,{value:h.value||h,disabled:h.disabled||!1},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(h.label||h),1)]),_:2},1032,["value","disabled"])]),_:2},1032,["span"]))),128))]),_:1})]),_:1},8,["value","disabled"])):(e.openBlock(),e.createBlock(p,e.mergeProps({key:0,class:"v__checkbox",value:e.unref(i),"onUpdate:value":d[0]||(d[0]=h=>e.isRef(i)?i.value=h:null)},e.unref(l),{disabled:n.meta.readOnly,options:n.meta.enum,onChange:m}),null,16,["value","disabled","options"]))]),_:1},8,["id","meta"])}}}),ge=e.defineComponent({__name:"Date",props:{id:null,meta:null},setup(n){const t=n,r=e.inject("state"),{appContext:s}=e.getCurrentInstance(),a=new $(s,r,t.id,t.meta);let l={},o={};if(a.ui.value.type==="range"){const{bindings:c}=j(Object.keys(I.RangePicker.props),a.ui);l=c}else{const{bindings:c}=j(Object.keys(I.DatePicker.props),a.ui);o=c}const i=e.computed(()=>a.ui.value||{}),m=e.computed({get(){return a.value},set(c){a.value=c}});function f(){i.value.change&&i.value.change(e.unref(m))}function d(c){i.value.ok&&i.value.ok(c)}function p(c,u,_){i.value.calendarChange&&i.value.calendarChange(c,u,_)}return(c,u)=>{const _=e.resolveComponent("a-range-picker"),h=e.resolveComponent("a-date-picker");return e.openBlock(),e.createBlock(E,{id:n.id,meta:n.meta},{default:e.withCtx(()=>[e.unref(i).type==="range"?(e.openBlock(),e.createBlock(_,e.mergeProps({key:0,class:"v__date",value:e.unref(m),"onUpdate:value":u[0]||(u[0]=g=>e.isRef(m)?m.value=g:null)},e.unref(l),{disabled:n.meta.readOnly,onCalendarChange:p,onOk:d,onChange:f}),e.createSlots({_:2},[e.unref(i).slotNameOfSuffixIcon?{name:"suffixIcon",fn:e.withCtx(()=>[e.renderSlot(c.$slots,e.unref(i).slotNameOfSuffixIcon)]),key:"0"}:void 0]),1040,["value","disabled"])):e.createCommentVNode("",!0),e.unref(i).type!=="range"?(e.openBlock(),e.createBlock(h,e.mergeProps({key:1,class:"v__date",value:e.unref(m),"onUpdate:value":u[1]||(u[1]=g=>e.isRef(m)?m.value=g:null)},e.unref(o),{disabled:n.meta.readOnly,onOk:d,onChange:f}),e.createSlots({_:2},[e.unref(i).slotNameOfSuffixIcon?{name:"suffixIcon",fn:e.withCtx(()=>[e.renderSlot(c.$slots,e.unref(i).slotNameOfSuffixIcon)]),key:"0"}:void 0]),1040,["value","disabled"])):e.createCommentVNode("",!0)]),_:3},8,["id","meta"])}}}),Ce=e.defineComponent({__name:"Time",props:{id:null,meta:null},setup(n){const t=n,r=e.inject("state"),{appContext:s}=e.getCurrentInstance(),a=new $(s,r,t.id,t.meta);let l={},o={};if(a.ui.value.type==="range"){const{bindings:c}=j(Object.keys(I.TimeRangePicker.props),a.ui);l=c}else{const{bindings:c}=j(Object.keys(I.TimePicker.props),a.ui);o=c}const i=e.computed(()=>a.ui.value||{}),m=e.computed({get(){return a.value},set(c){a.value=c}});function f(c,u){i.value.change&&i.value.change(c,u)}function d(c){i.value.ok&&i.value.ok(c)}function p(c,u,_){i.value.calendarChange&&i.value.calendarChange(c,u,_)}return(c,u)=>{const _=e.resolveComponent("a-time-range-picker"),h=e.resolveComponent("a-time-picker");return e.openBlock(),e.createBlock(E,{id:n.id,meta:n.meta},{default:e.withCtx(()=>[e.unref(i).type==="range"?(e.openBlock(),e.createBlock(_,e.mergeProps({key:0,class:"v__time",value:e.unref(m),"onUpdate:value":u[0]||(u[0]=g=>e.isRef(m)?m.value=g:null),open:e.unref(i).open,"onUpdate:open":u[1]||(u[1]=g=>e.unref(i).open=g)},e.unref(l),{disabled:n.meta.readOnly,onCalendarChange:p,onOk:d,onChange:f}),e.createSlots({_:2},[e.unref(i).slotNameOfRenderExtraFooter?{name:"renderExtraFooter",fn:e.withCtx(()=>[e.renderSlot(c.$slots,e.unref(i).slotNameOfRenderExtraFooter)]),key:"0"}:void 0,e.unref(i).slotNameOfSuffixIcon?{name:"suffixIcon",fn:e.withCtx(()=>[e.renderSlot(c.$slots,e.unref(i).slotNameOfSuffixIcon)]),key:"1"}:void 0,e.unref(i).slotNameOfClearIcon?{name:"clearIcon",fn:e.withCtx(()=>[e.renderSlot(c.$slots,e.unref(i).slotNameOfClearIcon)]),key:"2"}:void 0]),1040,["value","open","disabled"])):(e.openBlock(),e.createBlock(h,e.mergeProps({key:1,class:"v__time",value:e.unref(m),"onUpdate:value":u[2]||(u[2]=g=>e.isRef(m)?m.value=g:null),open:e.unref(i).open,"onUpdate:open":u[3]||(u[3]=g=>e.unref(i).open=g)},e.unref(o),{disabled:n.meta.readOnly,onOk:d,onChange:f}),e.createSlots({_:2},[e.unref(i).slotNameOfRenderExtraFooter?{name:"renderExtraFooter",fn:e.withCtx(()=>[e.renderSlot(c.$slots,e.unref(i).slotNameOfRenderExtraFooter)]),key:"0"}:void 0,e.unref(i).slotNameOfSuffixIcon?{name:"suffixIcon",fn:e.withCtx(()=>[e.renderSlot(c.$slots,e.unref(i).slotNameOfSuffixIcon)]),key:"1"}:void 0,e.unref(i).slotNameOfClearIcon?{name:"clearIcon",fn:e.withCtx(()=>[e.renderSlot(c.$slots,e.unref(i).slotNameOfClearIcon)]),key:"2"}:void 0]),1040,["value","open","disabled"]))]),_:3},8,["id","meta"])}}}),T=e.defineComponent({__name:"Number",props:{id:null,meta:null},setup(n){const t=n,r=e.inject("state"),{appContext:s}=e.getCurrentInstance(),a=new $(s,r,t.id,t.meta),{bindings:l}=j(Object.keys(I.InputNumber.props),a.ui),o=e.computed(()=>a.ui.value||{}),i=e.computed({get(){return a.value},set(h){a.value=h}});let m=e.ref(-1/0),f=e.ref(1/0),d=e.ref(1),p=e.ref(h=>h),c=e.ref(h=>h);u();function u(){const{minimum:h,exclusiveMinimum:g,maximum:w,exclusiveMaximum:C,multipleOf:b,type:O}=a.meta.value;d.value=b||1,typeof h<"u"&&(m.value=g?h+d.value:h),typeof w<"u"&&(f.value=C?w-d.value:w),O==="integer"&&(m.value=Math.trunc(m.value),f.value=Math.trunc(f.value),d.value=Math.trunc(d.value)),o.value.prefix!=null&&(o.value.formatter=x=>x==null?"":`${o.value.prefix} ${x}`,o.value.parser=x=>x.replace(`${o.value.prefix} `,"")),o.value.unit!=null&&(o.value.formatter=x=>x==null?"":`${x} ${o.value.unit}`,o.value.parser=x=>x.replace(` ${o.value.unit}`,"")),o.value.formatter&&(p.value=o.value.formatter),o.value.parser&&(c.value=o.value.parser)}function _(h){i.value=a.meta.value.type===N.Integer?Math.floor(h):h,o.value.change&&o.value.change(e.unref(i))}return(h,g)=>{const w=e.resolveComponent("a-input-number");return e.openBlock(),e.createBlock(E,{id:n.id,meta:n.meta},{default:e.withCtx(()=>[e.createVNode(w,e.mergeProps({class:"v__number",id:n.id,value:e.unref(i),"onUpdate:value":g[0]||(g[0]=C=>e.isRef(i)?i.value=C:null)},e.unref(l),{disabled:n.meta.readOnly,min:e.unref(m),max:e.unref(f),step:e.unref(d),formatter:e.unref(p),parser:e.unref(c),class:{"v__input-number-hidden-step":e.unref(o).hideStep},onChange:g[1]||(g[1]=C=>_(C))}),e.createSlots({_:2},[e.unref(o).slotNameOfAddonAfter?{name:"addonAfter",fn:e.withCtx(()=>[e.renderSlot(h.$slots,e.unref(o).slotNameOfAddonAfter)]),key:"0"}:void 0,e.unref(o).slotNameOfAddonBefore?{name:"addonBefore",fn:e.withCtx(()=>[e.renderSlot(h.$slots,e.unref(o).slotNameOfAddonBefore)]),key:"1"}:void 0,e.unref(o).slotNameOfPrefix?{name:"prefix",fn:e.withCtx(()=>[e.renderSlot(h.$slots,e.unref(o).slotNameOfPrefix)]),key:"2"}:void 0]),1040,["id","value","disabled","min","max","step","formatter","parser","class"])]),_:3},8,["id","meta"])}}});function B(n,t,r){n.component(t,r)}function ye(n){B(n,"v-object",de),B(n,"v-string",fe),B(n,"v-boolean",ue),B(n,"v-autocomplete",pe),B(n,"v-checkbox",he),B(n,"v-date",ge),B(n,"v-number",T),B(n,"v-integer",T),B(n,"v-time",Ce)}const _e=[oe,E],q=function(n,t){return n.config.globalProperties.emitter=J.default(),_e.forEach(r=>{n.component(r.name,r)}),ye(n),n.config.globalProperties.$VFORMLY_OPTIONS=t,n},ke={install:q};k.BaseMeta=V,k.FORM_VALUE_CHANGE=F,k.default=ke,k.install=q,k.registerFormComponent=B,Object.defineProperties(k,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
