(function(y,t){typeof exports=="object"&&typeof module<"u"?t(exports,require("vue"),require("ajv"),require("ant-design-vue"),require("mitt")):typeof define=="function"&&define.amd?define(["exports","vue","ajv","ant-design-vue","mitt"],t):(y=typeof globalThis<"u"?globalThis:y||self,t(y["v-formly-v3"]={},y.Vue,y.Ajv,y.antDesignVue,y.mitt))})(this,function(y,t,j,O,G){"use strict";var xt=Object.defineProperty;var bt=(y,t,j)=>t in y?xt(y,t,{enumerable:!0,configurable:!0,writable:!0,value:j}):y[t]=j;var C=(y,t,j)=>(bt(y,typeof t!="symbol"?t+"":t,j),j);const L=n=>n&&typeof n=="object"&&"default"in n?n:{default:n},K=L(j),W=L(G);function V(n){return n.config.globalProperties.emitter}var w=(n=>(n.Object="object",n.Array="array",n.Boolean="boolean",n))(w||{});function A(n){const e=[],a="slotName";return n&&!n.type&&(n.type=w.Object),M(n,e,a),{slotsName:e}}function M(n,e,a){switch(n.type){case w.Object:Object.keys(n.properties).forEach(s=>{const o=n.properties[s];M(o,e,a)});break;case w.Array:Object.keys(n.items.properties).forEach(s=>{const o=n.items.properties[s];M(o,e,a)});break;default:if(n.ui){const s=Object.keys(n.ui).filter(o=>o.startsWith(a));s&&s.length>0&&s.forEach(o=>{e.push(n.ui[o])})}break}}function J(){return{visibleIf:Y}}function Y(n,e,a,s){if(!e.ui||!e.ui.visibleIf)return a;const o=Object.keys(e.ui.visibleIf)[0],i=e.ui.visibleIf[o];return s=s||{},typeof i!="function"||o!==s.id?a:i.call(null,n,s.id,s.value)}const F="form-value-change",R="form-error-change",U=t.defineComponent({__name:"FormlyItem",props:{id:null,show:{type:Boolean,default:!0},meta:null},setup(n){const e=n;let a=t.ref(!0);const{slotsName:s}=A(e.meta),o=t.inject("state"),i=t.computed(()=>`v-${e.meta.ui&&e.meta.ui.component||e.meta.type}`),r=t.computed(()=>o.layout);l();function l(){if(!e.meta.type)throw new Error("Form item type must be one of these: number, string, boolean, array, object");a.value=e.show,p(a.value,e.id);const{visibleIf:d}=J(),{appContext:f}=t.getCurrentInstance();V(f).on(`${F}-${o._formId}`,c=>{a.value=d(o.context,e.meta,a.value,{id:c.id,value:c.value});const m=o.context.getContext(e.id);m&&p(a.value,m.id)})}function p(d,f){d?o._ignoreErrorIds=o._ignoreErrorIds.filter(u=>u!==f):o._ignoreErrorIds.indexOf(f)===-1&&o._ignoreErrorIds.push(f)}return(d,f)=>(t.openBlock(),t.createElementBlock("div",{style:t.normalizeStyle({display:t.unref(r)==="inline"?"inline-block":"block"})},[t.unref(a)?(t.openBlock(),t.createBlock(t.resolveDynamicComponent(t.unref(i)),{key:0,id:n.id,meta:n.meta},t.createSlots({_:2},[t.renderList(t.unref(s),u=>({name:u,fn:t.withCtx(c=>[t.renderSlot(d.$slots,u,t.normalizeProps(t.guardReactiveProps({...c})))])}))]),1032,["id","meta"])):t.createCommentVNode("",!0)],4))}});class Q{constructor(){C(this,"_map",new Map)}addContext(e,a){this._map.set(e,a)}removeContext(e){this._map.delete(e)}getContext(e){return this._map.get(e)}getContexts(){return this._map}}function X(n=8,e=10){const a="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),s=e||a.length,o=[];if(n)for(let i=0;i<n;i++)o[i]=a[0|Math.random()*s];else{let i;o[8]=o[13]=o[18]=o[23]="-",o[14]="4";for(let r=0;r<36;r++)o[r]||(i=0|Math.random()*16,o[r]=a[r==19?i&3|8:i])}return o.join("")}function D(n){if(n===void 0)return;if(n===null)return null;const e=Object.assign({},n);return Object.keys(e).forEach(a=>e[a]=typeof n[a]=="object"?D(n[a]):n[a]),Array.isArray(n)?(e.length=n.length,Array.from(e)):e}function z(){const{appContext:n}=t.getCurrentInstance(),e=n.config.globalProperties;return{appContext:n,globalProperties:e}}class Z{constructor(){C(this,"_formId",X(4));C(this,"_ignoreErrorIds",[]);C(this,"_context");C(this,"_layout","horizontal");C(this,"_ajvOptions",{allErrors:!0,strict:!1,loopEnum:50});C(this,"_formData",t.ref({}));C(this,"_meta",{});C(this,"_ui",{ingoreKeywords:["type","enum"],spanLabel:5,spanControl:19,grid:{gutter:36,span:24},errors:{required:"\u5FC5\u586B\u9879"}});C(this,"_validate");this._applyUseOptions()}get context(){return this._context}set context(e){this._context=e}get layout(){return this._layout}set layout(e){this._layout=e}get ajvOptions(){return this._ajvOptions}set ajvOptions(e){this._ajvOptions=e}get formData(){return this._formData.value}set formData(e){this._formData.value=e}get meta(){return this._meta}set meta(e){this._meta=e}get ui(){return this._ui}set ui(e){this._ui=Object.assign({},this._ui,e)}get validate(){return this._validate}set validate(e){this._validate=e}updateObjProp(e,a,s){const[o,...i]=a.split("/").filter(r=>r);i.length?this.updateObjProp(e[o],i.join("/"),s):e&&(e[o]=s)}_applyUseOptions(){const{globalProperties:e}=z(),a=e.$VFORMLY_OPTIONS;!a||typeof a!="object"||(this.ui=a.ui)}}class v{constructor(e,a){C(this,"state");C(this,"_ajv");C(this,"_validate");C(this,"appContext");this.state=a,this._ajv=new K.default(a.ajvOptions),this._validate=null,this.appContext=e}async runValidateForm(){const{valid:e,errors:a}=this._isAjvValid(),o=this.state.context.getContexts().values();let i=!0;for(const r of o)i=await this._validation(r,e,a)&&i;return i}async runValidationFormItem(e){const{valid:a,errors:s}=this._isAjvValid();return await this._validation(e,a,s)}_ajvValidate(e){return this._validate?this._validate:(this._validate=this._ajv.compile(e),this._validate)}_getAjvError(e,a){let s;for(let o=0;o<a.length;o++){const i=a[o],r=this._getId(i);if(e===r){s=i;break}}return s}_isAjvValid(){const e=this._ajvValidate(this.state.meta);return{valid:e(this.state.formData||{}),errors:e.errors}}async _validation(e,a,s){let o=[];const i=`${R}-${this.state._formId}`,r=V(this.appContext);if(a)return r.emit(i,{id:e.id,error:void 0}),!0;{const l=this._getCustomError(e),p=await this._getCustomAsyncError(e),d=[...l,...p];this._replaceWithDefaultErrors(e,s),this._replaceWithCustomErrors(e.id,s,d);const f=this.state.ui.ingoreKeywords||[];o=s.filter(c=>f.indexOf(c.keyword)===-1),o=this._removeIgnoreErrors(o);const u=this._getAjvError(e.id,o);return r.emit(i,{id:e.id,error:u}),!u}}_getCustomError(e){const a=e.meta.ui&&e.meta.ui.validator;return a?a(e.value):[]}async _getCustomAsyncError(e){const a=e.meta.ui&&e.meta.ui.validatorAsync;return a?await a(e.value):[]}_replaceWithDefaultErrors(e,a){if(!a||a.length===0)return;const s=e.meta.ui&&e.meta.ui.errors||{},o=Object.assign({},this.state.ui.errors,s),i=Object.keys(o);i&&i.length>0&&a.forEach(r=>{i.indexOf(r.keyword)>-1&&(r.message=o[r.keyword])})}_replaceWithCustomErrors(e,a,s){s.forEach(o=>{const i=a.find(r=>r.keyword===o.keyword&&this._getId(r)===e);i&&(i.message=o.message)})}_removeIgnoreErrors(e){const a=this.state._ignoreErrorIds;return!a||a.length===0?e:e.filter(o=>a.indexOf(this._getId(o))===-1)}_getId(e){return e.params&&e.params.missingProperty?`${e.instancePath?e.instancePath:""}/${e.params.missingProperty}`:`${e.instancePath}`}}const tt={class:"v__formly"},et={name:"v-formly"},nt=t.defineComponent({...et,props:{modelValue:null,layout:{default:"horizontal"},button:null,meta:null},emits:["update:modelValue","form-reset","form-submit"],setup(n,{expose:e,emit:a}){const s=n;if(!s.meta||typeof s.meta.properties>"u")throw new Error("Invalid Schema");let o={type:w.Object},i=t.ref(!1);const r=new Z;t.provide("state",r);const{slotsName:l}=A(s.meta),{appContext:p}=t.getCurrentInstance(),d=V(p);u();const f=t.computed(()=>{const g=Object.assign({},r.ui);return s.layout==="vertical"?null:{span:g.spanControl,offset:g.spanLabel}});t.watch(()=>s.modelValue,(g,x)=>{JSON.stringify(g)!==JSON.stringify(x)&&_(g)},{deep:!1}),t.watch(()=>r.formData,(g,x)=>{a("update:modelValue",g)},{deep:!0});function u(){r.layout=s.layout,o=Object.assign({},o,s.meta),r.meta=o,r.formData=Object.assign({},s.modelValue),c(r.formData,s.meta.properties),r.context=new Q,r.validate=new v(p,r)}function c(g,x){Object.keys(x).forEach(b=>{const P=x[b];if(P.type!=="null")switch(P.type){case w.Object:g[b]=g[b]||{},c(g[b],P.properties);break;case w.Array:g[b]=g[b]||[];break;case w.Boolean:break;default:g[b]=g[b]||void 0;break}})}function m(g){return r.context.getContext(g)}async function k(){return await r.validate.runValidateForm()}function _(g){const x=r.context.getContext("/");x&&(x.value=g,a("update:modelValue",r.formData))}function h(){a("form-reset",D(r.formData)),_({})}async function $(){i.value=!0;const g=await k();i.value=!1,a("form-submit",{valid:g,data:g?D(r.formData):void 0})}return t.onBeforeUnmount(()=>{d.all.clear()}),e({getContext:m,validate:k,reset:_,clearForm:h,submitForm:$}),(g,x)=>{const b=t.resolveComponent("a-button"),P=t.resolveComponent("a-space"),q=t.resolveComponent("a-form");return t.openBlock(),t.createElementBlock("div",tt,[t.createVNode(q,{class:t.normalizeClass(["v",{v__inline:n.layout==="inline",v__horizontal:n.layout==="horizontal"}]),layout:n.layout},{default:t.withCtx(()=>[t.createVNode(U,{id:"/",meta:t.unref(o)},t.createSlots({_:2},[t.renderList(t.unref(l),H=>({name:H,fn:t.withCtx(kt=>[t.renderSlot(g.$slots,H,t.normalizeProps(t.guardReactiveProps({...kt})))])}))]),1032,["meta"]),n.button==="default"?(t.openBlock(),t.createBlock(q,{key:0,wrapperCol:t.unref(f),class:"v__default-submit-button"},{default:t.withCtx(()=>[t.createVNode(P,null,{default:t.withCtx(()=>[t.createVNode(b,{type:"danger",onClick:h},{default:t.withCtx(()=>[t.createTextVNode(" \u91CD\u7F6E ")]),_:1}),t.createVNode(b,{type:"primary",onClick:$,loading:t.unref(i)},{default:t.withCtx(()=>[t.createTextVNode(" \u63D0\u4EA4 ")]),_:1},8,["loading"])]),_:1})]),_:1},8,["wrapperCol"])):n.button==="custom"?t.renderSlot(g.$slots,"button",{key:1,loading:t.unref(i),clearForm:h,submitForm:$}):(t.openBlock(),t.createElementBlock(t.Fragment,{key:2},[],64))]),_:3},8,["layout","class"])])}}}),ot={class:"v__label-text"},at={key:0,class:"v__optional"},rt=["innerHTML"],st={key:1,class:"ant-form-item-explain-error"},it={name:"v-wrapper"},E=t.defineComponent({...it,props:{id:null,show:{type:Boolean},meta:null},setup(n){const e=n,{globalProperties:a}=z(),s=t.inject("state"),o=s.context.getContext(e.id),i=t.computed(()=>Object.assign({},s.ui,e.meta.ui)),r=t.computed(()=>Object.assign({},s.ui,e.meta.ui).optionalHelp),l=t.computed(()=>s.layout==="vertical"||s.layout==="inline"?void 0:{span:i.value.spanLabel}),p=t.computed(()=>s.layout==="vertical"||s.layout==="inline"?void 0:{span:i.value.spanControl,offset:i.value.offsetControl||0}),d=t.computed({get(){return o.error.value},set(m){o.error.value=m}}),{appContext:f}=t.getCurrentInstance(),u=V(f);u.on(`${R}-${s._formId}`,c),t.onBeforeUnmount(()=>{u.off(`${R}-${s._formId}`,c)});function c(m){m.id===e.id&&(d.value=m.error?m.error.message:void 0)}return(m,k)=>{const _=t.resolveComponent("a-tooltip"),h=t.resolveComponent("a-form-item");return t.openBlock(),t.createBlock(h,{labelCol:t.unref(l),wrapperCol:t.unref(p),required:t.unref(i).showRequired,class:t.normalizeClass({"ant-form-item-has-error":t.unref(d)})},{label:t.withCtx(()=>[t.createElementVNode("span",ot,t.toDisplayString(n.meta.title),1),t.unref(i).optional||t.unref(r)?(t.openBlock(),t.createElementBlock("span",at,[t.createTextVNode(t.toDisplayString(t.unref(i).optional)+" ",1),t.unref(r)?(t.openBlock(),t.createBlock(_,{key:0,title:t.unref(r).text,placement:t.unref(r).placement,trigger:t.unref(r).trigger,overlayStyle:t.unref(r).overlayStyle,mouseEnterDelay:t.unref(r).mouseEnterDelay,mouseLeaveDelay:t.unref(r).mouseLeaveDelay,overlayClassName:t.unref(r).overlayClassName},{default:t.withCtx(()=>[t.unref(r).icon?(t.openBlock(),t.createBlock(t.resolveDynamicComponent(t.unref(a).$antIcons[t.unref(r).icon]),{key:0})):t.createCommentVNode("",!0)]),_:1},8,["title","placement","trigger","overlayStyle","mouseEnterDelay","mouseLeaveDelay","overlayClassName"])):t.createCommentVNode("",!0)])):t.createCommentVNode("",!0)]),default:t.withCtx(()=>[t.renderSlot(m.$slots,"default"),n.meta.description?(t.openBlock(),t.createElementBlock("div",{key:0,class:"ant-form-extra",innerHTML:n.meta.description},null,8,rt)):t.createCommentVNode("",!0),t.unref(d)?(t.openBlock(),t.createElementBlock("div",st,t.toDisplayString(t.unref(d)),1)):t.createCommentVNode("",!0)]),_:3},8,["labelCol","wrapperCol","required","class"])}}});class N{constructor(e,a,s,o){C(this,"id");C(this,"state");C(this,"meta",t.ref({}));C(this,"type");C(this,"ui",t.ref({}));C(this,"error",t.ref(void 0));C(this,"_value",t.ref());C(this,"_initMetaValue");C(this,"appContext");if(this.constructor==N)throw new Error("Abstract classes can't be instantiated.");this.id=s,this.state=a,this.meta.value=o,this.type=o.ui&&o.ui.component||o.type,this.ui.value=Object.assign({},a.ui,o.ui),this.appContext=e,this.error.value=void 0,a.context.addContext(s,this),this._value.value=void 0,this._initMetaValue=this.getInitMetaValue(),this.initValue()}setValue(e){this._value.value=e||void 0}get value(){return this._value.value}set value(e){if(this._value.value===e)return;this.setValue(e),V(this.appContext).emit(`${F}-${this.state._formId}`,{id:this.id,value:this._value.value}),this.state.updateObjProp(this.state.formData,this.id,this._value.value),this.state.validate.runValidationFormItem(this)}getInitMetaValue(){const e=this.id.split("/").filter(s=>s);let a="";return e.reduce((s,o,i)=>(i===e.length-1&&(a=s[o]),s[o]||{}),this.state.formData),a}}class lt extends N{constructor(a,s,o,i){super(a,s,o,i);C(this,"childMetaPairs");this.childMetaPairs=this.buildChildMetaPairs(o,i),s.context.addContext(o,this)}initValue(){}set value(a){this.childMetaPairs.forEach(({key:s,propertyName:o})=>{const i=this.state.context.getContext(s);i.value=(a||{})[o]})}buildChildMetaPairs(a,s){const o=[];for(const i of Object.keys(s.properties||{})){const r=a==="/"?`/${i}`:`${a}/${i}`;o.push({key:r,propertyName:i,meta:s.properties[i]})}return o}}const ct=t.defineComponent({__name:"Object",props:{id:null,meta:null},setup(n){const e=n,{slotsName:a}=A(e.meta),s=t.inject("state"),{appContext:o}=t.getCurrentInstance(),i=new lt(o,s,e.id,e.meta),r=t.computed(()=>i.ui.value||{}),l=t.computed(()=>Object.assign({},s.ui.grid,r.value.grid).gutter),p=t.computed(()=>s.layout);function d(c){return c.ui&&c.ui.show}function f(c){if(p.value==="inline")return{};const m=c.meta.ui&&c.meta.ui.grid||{};return Object.assign({},s.ui.grid,r.value.grid,m)}const u=i.childMetaPairs;return(c,m)=>{const k=t.resolveComponent("a-col"),_=t.resolveComponent("a-row");return t.openBlock(),t.createBlock(_,{gutter:t.unref(l)},{default:t.withCtx(()=>[(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(t.unref(u),(h,$)=>(t.openBlock(),t.createBlock(k,{key:$,span:f(h).span,offset:f(h).offset,xs:f(h).xs,sm:f(h).sm,md:f(h).md,lg:f(h).lg,xl:f(h).xl,xxl:f(h).xxl,style:t.normalizeStyle({display:t.unref(p)==="inline"?"inline-block":"block"})},{default:t.withCtx(()=>[t.createVNode(U,{id:h.key,meta:h.meta,show:d(h.meta)},t.createSlots({_:2},[t.renderList(t.unref(a),g=>({name:g,fn:t.withCtx(x=>[t.renderSlot(c.$slots,g,t.normalizeProps(t.guardReactiveProps({...x})))])}))]),1032,["id","meta","show"])]),_:2},1032,["span","offset","xs","sm","md","lg","xl","xxl","style"]))),128))]),_:3},8,["gutter"])}}});class S extends N{constructor(a,s,o,i){var r;super(a,s,o,i);C(this,"open");this.meta.value&&(this.open=((r=this.meta.value.ui)==null?void 0:r.open)||!1)}initValue(){this._initMetaValue?this.value=this._initMetaValue:this.meta.value.default&&(this.value=this.meta.value.default)}setValue(a){this._value.value=a||void 0}}function B(n,e){const a=t.ref({});return t.watch(()=>e.value,(s,o)=>{Object.keys(s).forEach(r=>{n.indexOf(r)>-1&&(a.value[r]=e.value[r])})},{immediate:!0,deep:!0}),{bindings:a}}const dt=t.defineComponent({__name:"String",props:{id:null,meta:null},setup(n){const e=n,a=t.inject("state"),{appContext:s}=t.getCurrentInstance(),o=new S(s,a,e.id,e.meta),{bindings:i}=B(Object.keys(O.Input.props),o.ui),r=t.computed(()=>o.ui.value||{}),l=t.computed({get(){return o.value},set(d){o.value=d}});function p(){r.value.change&&r.value.change(t.unref(l))}return(d,f)=>{const u=t.resolveComponent("a-input");return t.openBlock(),t.createBlock(E,{id:n.id,meta:n.meta},{default:t.withCtx(()=>[t.createVNode(u,t.mergeProps(t.unref(i),{defaultValue:n.meta.defaultValue,disabled:n.meta.readOnly,maxLength:n.meta.maxLength,value:t.unref(l),"onUpdate:value":f[0]||(f[0]=c=>t.isRef(l)?l.value=c:null),onChange:p}),t.createSlots({_:2},[t.unref(r).slotNameOfPrefix?{name:"prefix",fn:t.withCtx(()=>[t.renderSlot(d.$slots,t.unref(r).slotNameOfPrefix)]),key:"0"}:void 0,t.unref(r).slotNameOfSuffix?{name:"suffix",fn:t.withCtx(()=>[t.renderSlot(d.$slots,t.unref(r).slotNameOfSuffix)]),key:"1"}:void 0,t.unref(r).slotNameOfAddonBefore?{name:"addonBefore",fn:t.withCtx(()=>[t.renderSlot(d.$slots,t.unref(r).slotNameOfAddonBefore)]),key:"2"}:void 0,t.unref(r).slotNameOfAddonAfter?{name:"addonAfter",fn:t.withCtx(()=>[t.renderSlot(d.$slots,t.unref(r).slotNameOfAddonAfter)]),key:"3"}:void 0]),1040,["defaultValue","disabled","maxLength","value"])]),_:3},8,["id","meta"])}}});class ft extends N{constructor(e,a,s,o){super(e,a,s,o)}initValue(){typeof this._initMetaValue<"u"?this.value=this._initMetaValue:typeof this.meta.value.default=="boolean"&&(this.value=this.meta.value.default)}setValue(e){this._value.value=e||!1}}const mt=t.defineComponent({__name:"Boolean",props:{id:null,meta:null},setup(n){const e=n,a=t.inject("state"),{appContext:s}=t.getCurrentInstance(),o=new ft(s,a,e.id,e.meta),{bindings:i}=B(Object.keys(O.Switch.props),o.ui),r=t.computed(()=>o.ui.value||{}),l=t.computed({get(){return o.value},set(d){o.value=d||!1}});function p(){r.value.change&&r.value.change(t.unref(l))}return(d,f)=>{const u=t.resolveComponent("a-switch");return t.openBlock(),t.createBlock(E,{id:n.id,meta:n.meta},{default:t.withCtx(()=>[t.createVNode(u,t.mergeProps({class:"v__boolean",checked:t.unref(l),"onUpdate:checked":f[0]||(f[0]=c=>t.isRef(l)?l.value=c:null)},t.unref(i),{disabled:n.meta.readOnly,onChange:p}),t.createSlots({_:2},[t.unref(r).slotNameOfCheckedChildren?{name:"checkedChildren",fn:t.withCtx(()=>[t.renderSlot(d.$slots,t.unref(r).slotNameOfCheckedChildren)]),key:"0"}:void 0,t.unref(r).slotNameOfUnCheckedChildren?{name:"unCheckedChildren",fn:t.withCtx(()=>[t.renderSlot(d.$slots,t.unref(r).slotNameOfUnCheckedChildren)]),key:"1"}:void 0]),1040,["checked","disabled"])]),_:3},8,["id","meta"])}}}),ut=t.defineComponent({__name:"AutoComplete",props:{id:null,meta:null},setup(n){const e=n,a=t.inject("state"),{appContext:s}=t.getCurrentInstance(),o=new S(s,a,e.id,e.meta),{bindings:i}=B(Object.keys(O.AutoComplete.props),o.ui),r=t.computed(()=>o.ui.value||{}),l=t.computed({get(){return o.value},set(u){o.value=u||void 0}});function p(u){r.value.change&&r.value.change(t.unref(u))}function d(u){r.value.search&&r.value.search(u,t.unref(l))}function f(u,c){r.value.select&&r.value.select(t.unref(u),c)}return(u,c)=>{const m=t.resolveComponent("a-auto-complete");return t.openBlock(),t.createBlock(E,{id:n.id,meta:n.meta},{default:t.withCtx(()=>[t.createVNode(m,t.mergeProps(t.unref(i),{disabled:n.meta.readOnly,value:t.unref(l),"onUpdate:value":c[0]||(c[0]=k=>t.isRef(l)?l.value=k:null),onChange:p,onSearch:d,onSelect:f}),t.createSlots({_:2},[t.unref(r).slotNameOfOption?{name:"option",fn:t.withCtx(k=>[t.renderSlot(u.$slots,t.unref(r).slotNameOfOption,t.normalizeProps(t.guardReactiveProps(k)))]),key:"0"}:void 0,t.unref(r).slotNameOfDefault?{name:"default",fn:t.withCtx(()=>[t.renderSlot(u.$slots,t.unref(r).slotNameOfDefault)]),key:"1"}:void 0]),1040,["disabled","value"])]),_:3},8,["id","meta"])}}}),pt=t.defineComponent({__name:"Checkbox",props:{id:null,meta:null},setup(n){const e=n,a=t.inject("state"),{appContext:s}=t.getCurrentInstance(),o=new S(s,a,e.id,e.meta),{bindings:i}=B(Object.keys(O.CheckboxGroup.props),o.ui),r=t.computed(()=>o.ui.value||{}),l=t.computed({get(){return o.value},set(d){o.value=d}});function p(){r.value.change&&r.value.change(t.unref(l))}return(d,f)=>{const u=t.resolveComponent("a-checkbox-group"),c=t.resolveComponent("a-checkbox"),m=t.resolveComponent("a-col"),k=t.resolveComponent("a-row");return t.openBlock(),t.createBlock(E,{id:n.id,meta:n.meta},{default:t.withCtx(()=>[t.unref(r).span?(t.openBlock(),t.createBlock(u,{key:1,value:t.unref(l),"onUpdate:value":f[1]||(f[1]=_=>t.isRef(l)?l.value=_:null),disabled:n.meta.readOnly,onChange:p,class:"v__checkbox"},{default:t.withCtx(()=>[t.createVNode(k,null,{default:t.withCtx(()=>[(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(n.meta.enum,(_,h)=>(t.openBlock(),t.createBlock(m,{class:"v__text-left",span:t.unref(r).span,key:h},{default:t.withCtx(()=>[t.createVNode(c,{value:_.value||_,disabled:_.disabled||!1},{default:t.withCtx(()=>[t.createTextVNode(t.toDisplayString(_.label||_),1)]),_:2},1032,["value","disabled"])]),_:2},1032,["span"]))),128))]),_:1})]),_:1},8,["value","disabled"])):(t.openBlock(),t.createBlock(u,t.mergeProps({key:0,class:"v__checkbox",value:t.unref(l),"onUpdate:value":f[0]||(f[0]=_=>t.isRef(l)?l.value=_:null)},t.unref(i),{disabled:n.meta.readOnly,options:n.meta.enum,onChange:p}),null,16,["value","disabled","options"]))]),_:1},8,["id","meta"])}}}),ht=t.defineComponent({__name:"Date",props:{id:null,meta:null},setup(n){const e=n,a=t.inject("state"),{appContext:s}=t.getCurrentInstance(),o=new S(s,a,e.id,e.meta);let i={},r={};if(o.ui.value.type==="range"){const{bindings:c}=B(Object.keys(O.RangePicker.props),o.ui);i=c}else{const{bindings:c}=B(Object.keys(O.DatePicker.props),o.ui);r=c}const l=t.computed(()=>o.ui.value||{}),p=t.computed({get(){return o.value},set(c){o.value=c}});function d(){l.value.change&&l.value.change(t.unref(p))}function f(c){l.value.ok&&l.value.ok(c)}function u(c,m,k){l.value.calendarChange&&l.value.calendarChange(c,m,k)}return(c,m)=>{const k=t.resolveComponent("a-range-picker"),_=t.resolveComponent("a-date-picker");return t.openBlock(),t.createBlock(E,{id:n.id,meta:n.meta},{default:t.withCtx(()=>[t.unref(l).type==="range"?(t.openBlock(),t.createBlock(k,t.mergeProps({key:0,class:"v__date",value:t.unref(p),"onUpdate:value":m[0]||(m[0]=h=>t.isRef(p)?p.value=h:null)},t.unref(i),{disabled:n.meta.readOnly,onCalendarChange:u,onOk:f,onChange:d}),t.createSlots({_:2},[t.unref(l).slotNameOfSuffixIcon?{name:"suffixIcon",fn:t.withCtx(()=>[t.renderSlot(c.$slots,t.unref(l).slotNameOfSuffixIcon)]),key:"0"}:void 0]),1040,["value","disabled"])):t.createCommentVNode("",!0),t.unref(l).type!=="range"?(t.openBlock(),t.createBlock(_,t.mergeProps({key:1,class:"v__date",value:t.unref(p),"onUpdate:value":m[1]||(m[1]=h=>t.isRef(p)?p.value=h:null)},t.unref(r),{disabled:n.meta.readOnly,onOk:f,onChange:d}),t.createSlots({_:2},[t.unref(l).slotNameOfSuffixIcon?{name:"suffixIcon",fn:t.withCtx(()=>[t.renderSlot(c.$slots,t.unref(l).slotNameOfSuffixIcon)]),key:"0"}:void 0]),1040,["value","disabled"])):t.createCommentVNode("",!0)]),_:3},8,["id","meta"])}}}),gt=t.defineComponent({__name:"Time",props:{id:null,meta:null},setup(n){const e=n,a=t.inject("state"),{appContext:s}=t.getCurrentInstance(),o=new S(s,a,e.id,e.meta);let i={},r={};if(o.ui.value.type==="range"){const{bindings:c}=B(Object.keys(O.TimeRangePicker.props),o.ui);i=c}else{const{bindings:c}=B(Object.keys(O.TimePicker.props),o.ui);r=c}const l=t.computed(()=>o.ui.value||{}),p=t.computed({get(){return o.value},set(c){o.value=c}});function d(c,m){l.value.change&&l.value.change(c,m)}function f(c){l.value.ok&&l.value.ok(c)}function u(c,m,k){l.value.calendarChange&&l.value.calendarChange(c,m,k)}return(c,m)=>{const k=t.resolveComponent("a-time-range-picker"),_=t.resolveComponent("a-time-picker");return t.openBlock(),t.createBlock(E,{id:n.id,meta:n.meta},{default:t.withCtx(()=>[t.unref(l).type==="range"?(t.openBlock(),t.createBlock(k,t.mergeProps({key:0,class:"v__time",value:t.unref(p),"onUpdate:value":m[0]||(m[0]=h=>t.isRef(p)?p.value=h:null),open:t.unref(l).open,"onUpdate:open":m[1]||(m[1]=h=>t.unref(l).open=h)},t.unref(i),{disabled:n.meta.readOnly,onCalendarChange:u,onOk:f,onChange:d}),t.createSlots({_:2},[t.unref(l).slotNameOfRenderExtraFooter?{name:"renderExtraFooter",fn:t.withCtx(()=>[t.renderSlot(c.$slots,t.unref(l).slotNameOfRenderExtraFooter)]),key:"0"}:void 0,t.unref(l).slotNameOfSuffixIcon?{name:"suffixIcon",fn:t.withCtx(()=>[t.renderSlot(c.$slots,t.unref(l).slotNameOfSuffixIcon)]),key:"1"}:void 0,t.unref(l).slotNameOfClearIcon?{name:"clearIcon",fn:t.withCtx(()=>[t.renderSlot(c.$slots,t.unref(l).slotNameOfClearIcon)]),key:"2"}:void 0]),1040,["value","open","disabled"])):(t.openBlock(),t.createBlock(_,t.mergeProps({key:1,class:"v__time",value:t.unref(p),"onUpdate:value":m[2]||(m[2]=h=>t.isRef(p)?p.value=h:null),open:t.unref(l).open,"onUpdate:open":m[3]||(m[3]=h=>t.unref(l).open=h)},t.unref(r),{disabled:n.meta.readOnly,onOk:f,onChange:d}),t.createSlots({_:2},[t.unref(l).slotNameOfRenderExtraFooter?{name:"renderExtraFooter",fn:t.withCtx(()=>[t.renderSlot(c.$slots,t.unref(l).slotNameOfRenderExtraFooter)]),key:"0"}:void 0,t.unref(l).slotNameOfSuffixIcon?{name:"suffixIcon",fn:t.withCtx(()=>[t.renderSlot(c.$slots,t.unref(l).slotNameOfSuffixIcon)]),key:"1"}:void 0,t.unref(l).slotNameOfClearIcon?{name:"clearIcon",fn:t.withCtx(()=>[t.renderSlot(c.$slots,t.unref(l).slotNameOfClearIcon)]),key:"2"}:void 0]),1040,["value","open","disabled"]))]),_:3},8,["id","meta"])}}});function I(n,e,a){n.component(e,a)}function Ct(n){I(n,"v-object",ct),I(n,"v-string",dt),I(n,"v-boolean",mt),I(n,"v-autocomplete",ut),I(n,"v-checkbox",pt),I(n,"v-date",ht),I(n,"v-time",gt)}const _t=[nt,E],T=function(n,e){return n.config.globalProperties.emitter=W.default(),_t.forEach(a=>{n.component(a.name,a)}),Ct(n),n.config.globalProperties.$VFORMLY_OPTIONS=e,n},yt={install:T};y.BaseMeta=N,y.FORM_VALUE_CHANGE=F,y.default=yt,y.install=T,y.registerFormComponent=I,Object.defineProperties(y,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
