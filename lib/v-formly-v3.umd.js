(function(O,I){typeof exports=="object"&&typeof module<"u"?I(exports,require("mitt"),require("vue"),require("ajv"),require("ant-design-vue")):typeof define=="function"&&define.amd?define(["exports","mitt","vue","ajv","ant-design-vue"],I):(O=typeof globalThis<"u"?globalThis:O||self,I(O["v-formly-v3"]={},O.mitt,O.Vue,O.Ajv,O.antDesignVue))})(this,function(O,I,e,v,N){"use strict";var tt=Object.defineProperty;var nt=(O,I,e)=>I in O?tt(O,I,{enumerable:!0,configurable:!0,writable:!0,value:e}):O[I]=e;var b=(O,I,e)=>(nt(O,typeof I!="symbol"?I+"":I,e),e);const K=n=>n&&typeof n=="object"&&"default"in n?n:{default:n},ee=K(I),te=K(v);function R(n){return n.config.globalProperties.emitter}var j=(n=>(n.Object="object",n.Array="array",n.Boolean="boolean",n.Integer="integer",n))(j||{});function F(n){const o=[],r="slotName";return n&&!n.type&&(n.type=j.Object),T(n,o,r),{slotsName:o}}function T(n,o,r){switch(n.type){case j.Object:Object.keys(n.properties).forEach(s=>{const a=n.properties[s];T(a,o,r)});break;case j.Array:Object.keys(n.items.properties).forEach(s=>{const a=n.items.properties[s];T(a,o,r)});break;default:if(n.ui){const s=Object.keys(n.ui).filter(a=>a.startsWith(r));s&&s.length>0&&s.forEach(a=>{o.push(n.ui[a])})}break}}function ne(){return{visibleIf:oe}}function oe(n,o,r,s){if(!o.ui||!o.ui.visibleIf)return r;const a=Object.keys(o.ui.visibleIf)[0],i=o.ui.visibleIf[a];return s=s||{},typeof i!="function"||a!==s.id?r:i.call(null,n,s.id,s.value)}const G="form-value-change",M="form-error-change",L=e.defineComponent({__name:"AFormlyItem",props:{id:null,show:{type:Boolean,default:!0},meta:null},setup(n){const o=n;let r=e.ref(!0);const{slotsName:s}=F(o.meta),a=e.inject("state"),i=e.computed(()=>`v-${o.meta.ui&&o.meta.ui.component||o.meta.type}`),t=e.computed(()=>a.layout);l();function l(){if(!o.meta.type)throw new Error("Form item type must be one of these: number, string, boolean, array, object");r.value=o.show,m(r.value,o.id);const{visibleIf:g}=ne(),{appContext:u}=e.getCurrentInstance();R(u).on(`${G}-${a._formId}`,c=>{let d=g(a.context,o.meta,r.value,{id:c.id,value:c.value});d!==r.value&&(r.value=d,m(r.value,o.id))})}function m(g,u){g?a._ignoreErrorIds=a._ignoreErrorIds.filter(p=>p!==u):a._ignoreErrorIds.indexOf(u)===-1&&a._ignoreErrorIds.push(u)}return(g,u)=>(e.openBlock(),e.createElementBlock("div",{style:e.normalizeStyle({display:e.unref(t)==="inline"?"inline-block":"block"})},[e.unref(r)?(e.openBlock(),e.createBlock(e.resolveDynamicComponent(e.unref(i)),{key:0,id:n.id,meta:n.meta},e.createSlots({_:2},[e.renderList(e.unref(s),p=>({name:p,fn:e.withCtx(c=>[e.renderSlot(g.$slots,p,e.normalizeProps(e.guardReactiveProps({...c})))])}))]),1032,["id","meta"])):e.createCommentVNode("",!0)],4))}});class ae{constructor(){b(this,"_map",new Map)}addContext(o,r){this._map.set(o,r)}removeContext(o){this._map.delete(o)}getContext(o){return this._map.get(o)}getContexts(){return this._map}getMap(){return this._map}}function W(n=8,o=10){const r="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),s=o||r.length,a=[];if(n)for(let i=0;i<n;i++)a[i]=r[0|Math.random()*s];else{let i;a[8]=a[13]=a[18]=a[23]="-",a[14]="4";for(let t=0;t<36;t++)a[t]||(i=0|Math.random()*16,a[t]=r[t==19?i&3|8:i])}return a.join("")}function U(n){if(n===void 0)return;if(n===null)return null;const o=Object.assign({},n);return Object.keys(o).forEach(r=>o[r]=typeof n[r]=="object"?U(n[r]):n[r]),Array.isArray(n)?(o.length=n.length,Array.from(o)):o}const re=Array.isArray,le=n=>typeof n=="function",J=n=>typeof n=="number";function z(){const{appContext:n}=e.getCurrentInstance(),o=n.config.globalProperties;return{appContext:n,globalProperties:o}}class se{constructor(){b(this,"_formId",W(4));b(this,"_ignoreErrorIds",[]);b(this,"_context");b(this,"_layout",e.ref("horizontal"));b(this,"_ajvOptions",{allErrors:!0,strict:!1,loopEnum:50});b(this,"_formData",e.ref({}));b(this,"_meta",{});b(this,"_ui",{ingoreKeywords:["type","enum"],spanLabel:5,spanControl:19,grid:{gutter:36,span:24},errors:{required:"\u5FC5\u586B\u9879"}});b(this,"_validate");this._applyUseOptions()}get context(){return this._context}set context(o){this._context=o}get layout(){return this._layout}set layout(o){this._layout=o}get ajvOptions(){return this._ajvOptions}set ajvOptions(o){this._ajvOptions=o}get formData(){return this._formData.value}set formData(o){this._formData.value=o}get meta(){return this._meta}set meta(o){this._meta=o}get ui(){return this._ui}set ui(o){this._ui=Object.assign({},this._ui,o)}get validate(){return this._validate}set validate(o){this._validate=o}updateObjProp(o,r,s){const[a,...i]=r.split("/").filter(t=>t);i.length?this.updateObjProp(o[a],i.join("/"),s):o&&(o[a]=s)}_applyUseOptions(){const{globalProperties:o}=z(),r=o.$VFORMLY_OPTIONS;!r||typeof r!="object"||(this.ui=r.ui)}}class ie{constructor(o,r){b(this,"state");b(this,"_ajv");b(this,"_validate");b(this,"appContext");this.state=r,this._ajv=new te.default(r.ajvOptions),this._validate=null,this.appContext=o}async runValidateForm(){const{valid:o,errors:r}=this._isAjvValid(),a=this.state.context.getContexts().values();let i=!0;for(const t of a)i=await this._validation(t,o,r)&&i;return i}async runValidationFormItem(o){const{valid:r,errors:s}=this._isAjvValid();return await this._validation(o,r,s)}_ajvValidate(o){return this._validate?this._validate:(this._validate=this._ajv.compile(o),this._validate)}_getAjvError(o,r){let s;for(let a=0;a<r.length;a++){const i=r[a],t=this._getId(i);if(o===t){s=i;break}}return s}_isAjvValid(){const o=this._ajvValidate(this.state.meta);return{valid:o(this.state.formData||{}),errors:o.errors}}async _validation(o,r,s){let a=[];const i=`${M}-${this.state._formId}`,t=R(this.appContext);if(r)return t.emit(i,{id:o.id,error:void 0}),!0;{const l=this._getCustomError(o),m=await this._getCustomAsyncError(o),g=[...l,...m];this._replaceWithDefaultErrors(o,s),this._replaceWithCustomErrors(o.id,s,g);const u=this.state.ui.ingoreKeywords||[];a=s.filter(c=>u.indexOf(c.keyword)===-1),a=this._removeIgnoreErrors(a);const p=this._getAjvError(o.id,a);return t.emit(i,{id:o.id,error:p}),!p}}_getCustomError(o){var s,a;const r=(a=(s=o.ui)==null?void 0:s.value)==null?void 0:a.validator;return r?r(o.value):[]}async _getCustomAsyncError(o){var s,a;const r=(a=(s=o.ui)==null?void 0:s.value)==null?void 0:a.validatorAsync;return r?await r(o.value):[]}_replaceWithDefaultErrors(o,r){var t,l;if(!r||r.length===0)return;const s=((l=(t=o.ui)==null?void 0:t.value)==null?void 0:l.errors)||{},a=Object.assign({},this.state.ui.errors,s),i=Object.keys(a);i&&i.length>0&&r.forEach(m=>{i.indexOf(m.keyword)>-1&&(m.message=a[m.keyword])})}_replaceWithCustomErrors(o,r,s){s.forEach(a=>{const i=r.find(t=>t.keyword===a.keyword&&this._getId(t)===o);i&&(i.message=a.message)})}_removeIgnoreErrors(o){const r=this.state._ignoreErrorIds;return!r||r.length===0?o:o.filter(a=>r.indexOf(this._getId(a))===-1)}_getId(o){return o.params&&o.params.missingProperty?`${o.instancePath?o.instancePath:""}/${o.params.missingProperty}`:`${o.instancePath}`}}const ce={class:"v__formly"},de={name:"v-formly-v3"},fe=e.defineComponent({...de,props:{modelValue:null,layout:{default:"horizontal"},button:null,meta:null},emits:["update:modelValue","form-reset","form-submit"],setup(n,{expose:o,emit:r}){const s=n;if(!s.meta||typeof s.meta.properties>"u")throw new Error("Invalid Schema");let a={type:j.Object},i=e.ref(!1);const t=new se;e.provide("state",t);const{slotsName:l}=F(s.meta),{appContext:m}=e.getCurrentInstance(),g=R(m);p();const u=e.computed(()=>{const _=Object.assign({},t.ui);return s.layout==="vertical"?null:{span:_.spanControl,offset:_.spanLabel}});e.watch(()=>s.modelValue,(_,C)=>{JSON.stringify(_)!==JSON.stringify(C)&&f(_)},{deep:!1}),e.watch(()=>t.formData,(_,C)=>{r("update:modelValue",_)},{deep:!0});function p(){t.layout=e.toRef(s,"layout"),a=Object.assign({},a,s.meta),t.meta=a,t.formData=Object.assign({},s.modelValue),c(t.formData,s.meta.properties),t.context=new ae,t.validate=new ie(m,t)}function c(_,C){Object.keys(C).forEach(x=>{const k=C[x];if(k.type!=="null")switch(k.type){case j.Object:_[x]=_[x]||{},c(_[x],k.properties);break;case j.Array:_[x]=_[x]||[];break;case j.Boolean:break;default:_[x]=_[x]||void 0;break}})}function d(_){return t.context.getContext(_)}async function h(){return await t.validate.runValidateForm()}function f(_){const C=t.context.getContext("/");C&&(C.value=_,r("update:modelValue",t.formData))}function y(){r("form-reset",e.toRaw(t.formData)),f({})}async function V(){i.value=!0;const _=await h();i.value=!1,r("form-submit",{valid:_,data:_?e.toRaw(t.formData):void 0})}return e.onBeforeUnmount(()=>{g.all.clear()}),o({getContext:d,validate:h,reset:f,clearForm:y,submitForm:V}),(_,C)=>{const x=e.resolveComponent("a-button"),k=e.resolveComponent("a-space"),E=e.resolveComponent("a-form-item"),D=e.resolveComponent("a-form");return e.openBlock(),e.createElementBlock("div",ce,[e.createVNode(D,{class:e.normalizeClass(["v",{v__inline:n.layout==="inline",v__horizontal:n.layout==="horizontal"}]),layout:n.layout},{default:e.withCtx(()=>[e.createVNode(L,{id:"/",meta:e.unref(a)},e.createSlots({_:2},[e.renderList(e.unref(l),A=>({name:A,fn:e.withCtx(q=>[e.renderSlot(_.$slots,A,e.normalizeProps(e.guardReactiveProps({...q})))])}))]),1032,["meta"]),n.button==="default"?(e.openBlock(),e.createBlock(E,{key:0,wrapperCol:e.unref(u),class:"v__default-submit-button"},{default:e.withCtx(()=>[e.createVNode(k,null,{default:e.withCtx(()=>[e.createVNode(x,{type:"danger",onClick:y},{default:e.withCtx(()=>[e.createTextVNode(" \u91CD\u7F6E ")]),_:1}),e.createVNode(x,{type:"primary",onClick:V,loading:e.unref(i)},{default:e.withCtx(()=>[e.createTextVNode(" \u63D0\u4EA4 ")]),_:1},8,["loading"])]),_:1})]),_:1},8,["wrapperCol"])):n.button==="custom"?e.renderSlot(_.$slots,"button",{key:1,loading:e.unref(i),clearForm:y,submitForm:V}):(e.openBlock(),e.createElementBlock(e.Fragment,{key:2},[],64))]),_:3},8,["layout","class"])])}}}),me={class:"v__label-text"},ue={key:0,class:"v__optional"},pe=["innerHTML"],he={key:0,class:"ant-form-item-explain-error"},ge={name:"v-wrapper"},S=e.defineComponent({...ge,props:{id:null,show:{type:Boolean},meta:null},setup(n){const o=n,{globalProperties:r}=z(),s=e.inject("state"),a=s.context.getContext(o.id),i=e.computed(()=>Object.assign({},s.ui,o.meta.ui)),t=e.computed(()=>Object.assign({},s.ui,o.meta.ui).optionalHelp),l=e.computed(()=>s.layout.value==="vertical"||s.layout.value==="inline"?void 0:{span:i.value.spanLabel}),m=e.computed(()=>s.layout.value==="vertical"||s.layout.value==="inline"?void 0:{span:i.value.spanControl,offset:i.value.offsetControl||0}),g=e.computed({get(){return a.error.value},set(d){a.error.value=d}}),{appContext:u}=e.getCurrentInstance(),p=R(u);p.on(`${M}-${s._formId}`,c),e.onBeforeUnmount(()=>{p.off(`${M}-${s._formId}`,c)});function c(d){d.id===o.id&&(g.value=d.error?d.error.message:void 0)}return(d,h)=>{const f=e.resolveComponent("a-tooltip"),y=e.resolveComponent("a-form-item");return e.openBlock(),e.createBlock(y,{labelCol:e.unref(l),wrapperCol:e.unref(m),required:e.unref(i).showRequired,class:e.normalizeClass({"ant-form-item-has-error":e.unref(g)})},e.createSlots({label:e.withCtx(()=>[e.createElementVNode("span",me,e.toDisplayString(n.meta.title),1),e.unref(i).optional||e.unref(t)?(e.openBlock(),e.createElementBlock("span",ue,[e.createTextVNode(e.toDisplayString(e.unref(i).optional)+" ",1),e.unref(t)?(e.openBlock(),e.createBlock(f,{key:0,title:e.unref(t).text,placement:e.unref(t).placement,trigger:e.unref(t).trigger,overlayStyle:e.unref(t).overlayStyle,mouseEnterDelay:e.unref(t).mouseEnterDelay,mouseLeaveDelay:e.unref(t).mouseLeaveDelay,overlayClassName:e.unref(t).overlayClassName},{default:e.withCtx(()=>[e.unref(t).icon?(e.openBlock(),e.createBlock(e.resolveDynamicComponent(e.unref(r).$antIcons[e.unref(t).icon]),{key:0})):e.createCommentVNode("",!0)]),_:1},8,["title","placement","trigger","overlayStyle","mouseEnterDelay","mouseLeaveDelay","overlayClassName"])):e.createCommentVNode("",!0)])):e.createCommentVNode("",!0)]),default:e.withCtx(()=>[e.renderSlot(d.$slots,"default"),e.unref(g)?(e.openBlock(),e.createElementBlock("div",he,e.toDisplayString(e.unref(g)),1)):e.createCommentVNode("",!0)]),_:2},[n.meta.description?{name:"extra",fn:e.withCtx(()=>[e.createElementVNode("div",{innerHTML:n.meta.description},null,8,pe)]),key:"0"}:void 0]),1032,["labelCol","wrapperCol","required","class"])}}});class P{constructor(o,r,s,a){b(this,"id");b(this,"state");b(this,"meta",e.ref({}));b(this,"type");b(this,"ui",e.ref({}));b(this,"error",e.ref(void 0));b(this,"_value",e.ref());b(this,"_initMetaValue");b(this,"appContext");if(this.constructor==P)throw new Error("Abstract classes can't be instantiated.");this.id=s,this.state=r,this.meta.value=a,this.type=a.ui&&a.ui.component||a.type,this.ui.value=Object.assign({},r.ui,a.ui),this.appContext=o,this.error.value=void 0,r.context.addContext(s,this),this._value.value=void 0,this._initMetaValue=this.getInitMetaValue()}get value(){return this._value.value}set value(o){if(this._value.value===o)return;this.setValue(o),R(this.appContext).emit(`${G}-${this.state._formId}`,{id:this.id,value:this._value.value}),this.state.updateObjProp(this.state.formData,this.id,this._value.value),this.state.validate.runValidationFormItem(this)}getInitMetaValue(){const o=this.id.split("/").filter(s=>s);let r="";return o.reduce((s,a,i)=>(i===o.length-1&&(r=s[a]),s[a]||{}),this.state.formData),r}}class Ce extends P{constructor(r,s,a,i){super(r,s,a,i);b(this,"childMetaPairs");this.childMetaPairs=this.buildChildMetaPairs(a,i),s.context.addContext(a,this)}initValue(){}setValue(){}set value(r){this.childMetaPairs.forEach(({key:s,propertyName:a})=>{const i=this.state.context.getContext(s);i&&(i.value=(r||{})[a])})}buildChildMetaPairs(r,s){const a=[];for(const i of Object.keys(s.properties||{})){const t=r==="/"?`/${i}`:`${r}/${i}`;a.push({key:t,propertyName:i,meta:s.properties[i]})}return a}}const ye=e.defineComponent({__name:"Object",props:{id:null,meta:null},setup(n){const o=n,{slotsName:r}=F(o.meta),s=e.inject("state"),{appContext:a}=e.getCurrentInstance(),i=new Ce(a,s,o.id,o.meta),t=e.computed(()=>i.ui.value||{}),l=e.computed(()=>Object.assign({},s.ui.grid,t.value.grid).gutter),m=e.computed(()=>s.layout.value);function g(c){return c.ui&&c.ui.show}function u(c){if(m.value==="inline")return{};const d=c.meta.ui&&c.meta.ui.grid||{};return Object.assign({},s.ui.grid,t.value.grid,d)}const p=i.childMetaPairs;return(c,d)=>{const h=e.resolveComponent("a-col"),f=e.resolveComponent("a-row");return e.openBlock(),e.createBlock(f,{gutter:e.unref(l)},{default:e.withCtx(()=>[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(p),(y,V)=>(e.openBlock(),e.createBlock(h,{key:V,span:u(y).span,offset:u(y).offset,xs:u(y).xs,sm:u(y).sm,md:u(y).md,lg:u(y).lg,xl:u(y).xl,xxl:u(y).xxl,style:e.normalizeStyle({display:e.unref(m)==="inline"?"inline-block":"block"})},{default:e.withCtx(()=>[e.createVNode(L,{id:y.key,meta:y.meta,show:g(y.meta)},e.createSlots({_:2},[e.renderList(e.unref(r),_=>({name:_,fn:e.withCtx(C=>[e.renderSlot(c.$slots,_,e.normalizeProps(e.guardReactiveProps({...C})))])}))]),1032,["id","meta","show"])]),_:2},1032,["span","offset","xs","sm","md","lg","xl","xxl","style"]))),128))]),_:3},8,["gutter"])}}});class $ extends P{constructor(r,s,a,i){var t;super(r,s,a,i);b(this,"open");this.initValue(),this.meta.value&&(this.open=((t=this.meta.value.ui)==null?void 0:t.open)||!1)}initValue(){this._initMetaValue?this.value=this._initMetaValue:this.meta.value.default&&(this.value=this.meta.value.default)}setValue(r){this._value.value=r||void 0}}function B(n,o){const r=e.ref({});return Object.keys(o.value).forEach(a=>{n.indexOf(a)>-1&&(r.value[a]=e.toRef(o.value,a))}),{bindings:r}}const _e=e.defineComponent({__name:"String",props:{id:null,meta:null},setup(n){const o=n,r=e.inject("state"),{appContext:s}=e.getCurrentInstance(),a=new $(s,r,o.id,o.meta),{bindings:i}=B(Object.keys(N.Input.props),a.ui),t=e.computed(()=>a.ui.value||{}),l=e.computed({get(){return a.value},set(g){a.value=g}});function m(){t.value.change&&t.value.change(e.unref(l))}return(g,u)=>{const p=e.resolveComponent("a-input");return e.openBlock(),e.createBlock(S,{id:n.id,meta:n.meta},{default:e.withCtx(()=>[e.createVNode(p,e.mergeProps(e.unref(i),{defaultValue:n.meta.defaultValue,disabled:n.meta.readOnly,maxLength:n.meta.maxLength,value:e.unref(l),"onUpdate:value":u[0]||(u[0]=c=>e.isRef(l)?l.value=c:null),onChange:m}),e.createSlots({_:2},[e.unref(t).slotNameOfPrefix?{name:"prefix",fn:e.withCtx(()=>[e.renderSlot(g.$slots,e.unref(t).slotNameOfPrefix)]),key:"0"}:void 0,e.unref(t).slotNameOfSuffix?{name:"suffix",fn:e.withCtx(()=>[e.renderSlot(g.$slots,e.unref(t).slotNameOfSuffix)]),key:"1"}:void 0,e.unref(t).slotNameOfAddonBefore?{name:"addonBefore",fn:e.withCtx(()=>[e.renderSlot(g.$slots,e.unref(t).slotNameOfAddonBefore)]),key:"2"}:void 0,e.unref(t).slotNameOfAddonAfter?{name:"addonAfter",fn:e.withCtx(()=>[e.renderSlot(g.$slots,e.unref(t).slotNameOfAddonAfter)]),key:"3"}:void 0]),1040,["defaultValue","disabled","maxLength","value"])]),_:3},8,["id","meta"])}}});class xe extends P{constructor(o,r,s,a){super(o,r,s,a),this.initValue()}initValue(){typeof this._initMetaValue<"u"?this.value=this._initMetaValue:typeof this.meta.value.default=="boolean"&&(this.value=this.meta.value.default)}setValue(o){this._value.value=o||!1}}const ke=e.defineComponent({__name:"Boolean",props:{id:null,meta:null},setup(n){const o=n,r=e.inject("state"),{appContext:s}=e.getCurrentInstance(),a=new xe(s,r,o.id,o.meta),{bindings:i}=B(Object.keys(N.Switch.props),a.ui),t=e.computed(()=>a.ui.value||{}),l=e.computed({get(){return a.value},set(g){a.value=g||!1}});function m(){t.value.change&&t.value.change(e.unref(l))}return(g,u)=>{const p=e.resolveComponent("a-switch");return e.openBlock(),e.createBlock(S,{id:n.id,meta:n.meta},{default:e.withCtx(()=>[e.createVNode(p,e.mergeProps({class:"v__boolean",checked:e.unref(l),"onUpdate:checked":u[0]||(u[0]=c=>e.isRef(l)?l.value=c:null)},e.unref(i),{disabled:n.meta.readOnly,onChange:m}),e.createSlots({_:2},[e.unref(t).slotNameOfCheckedChildren?{name:"checkedChildren",fn:e.withCtx(()=>[e.renderSlot(g.$slots,e.unref(t).slotNameOfCheckedChildren)]),key:"0"}:void 0,e.unref(t).slotNameOfUnCheckedChildren?{name:"unCheckedChildren",fn:e.withCtx(()=>[e.renderSlot(g.$slots,e.unref(t).slotNameOfUnCheckedChildren)]),key:"1"}:void 0]),1040,["checked","disabled"])]),_:3},8,["id","meta"])}}}),be=e.defineComponent({__name:"AutoComplete",props:{id:null,meta:null},setup(n){const o=n,r=e.inject("state"),{appContext:s}=e.getCurrentInstance(),a=new $(s,r,o.id,o.meta),{bindings:i}=B(Object.keys(N.AutoComplete.props),a.ui),t=e.computed(()=>a.ui.value||{}),l=e.computed({get(){return a.value},set(p){a.value=p||void 0}});function m(p){t.value.change&&t.value.change(e.unref(p))}function g(p){t.value.search&&t.value.search(p,e.unref(l))}function u(p,c){t.value.select&&t.value.select(e.unref(p),c)}return(p,c)=>{const d=e.resolveComponent("a-auto-complete");return e.openBlock(),e.createBlock(S,{id:n.id,meta:n.meta},{default:e.withCtx(()=>[e.createVNode(d,e.mergeProps(e.unref(i),{disabled:n.meta.readOnly,value:e.unref(l),"onUpdate:value":c[0]||(c[0]=h=>e.isRef(l)?l.value=h:null),onChange:m,onSearch:g,onSelect:u}),e.createSlots({_:2},[e.unref(t).slotNameOfOption?{name:"option",fn:e.withCtx(h=>[e.renderSlot(p.$slots,e.unref(t).slotNameOfOption,e.normalizeProps(e.guardReactiveProps(h)))]),key:"0"}:void 0,e.unref(t).slotNameOfDefault?{name:"default",fn:e.withCtx(()=>[e.renderSlot(p.$slots,e.unref(t).slotNameOfDefault)]),key:"1"}:void 0]),1040,["disabled","value"])]),_:3},8,["id","meta"])}}}),we=e.defineComponent({__name:"Checkbox",props:{id:null,meta:null},setup(n){const o=n,r=e.inject("state"),{appContext:s}=e.getCurrentInstance(),a=new $(s,r,o.id,o.meta),{bindings:i}=B(Object.keys(N.CheckboxGroup.props),a.ui),t=e.computed(()=>a.ui.value||{}),l=e.computed({get(){return a.value},set(g){a.value=g}});function m(){t.value.change&&t.value.change(e.unref(l))}return(g,u)=>{const p=e.resolveComponent("a-checkbox-group"),c=e.resolveComponent("a-checkbox"),d=e.resolveComponent("a-col"),h=e.resolveComponent("a-row");return e.openBlock(),e.createBlock(S,{id:n.id,meta:n.meta},{default:e.withCtx(()=>[e.unref(t).span?(e.openBlock(),e.createBlock(p,{key:1,value:e.unref(l),"onUpdate:value":u[1]||(u[1]=f=>e.isRef(l)?l.value=f:null),disabled:n.meta.readOnly,onChange:m,class:"v__checkbox"},{default:e.withCtx(()=>[e.createVNode(h,null,{default:e.withCtx(()=>[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(n.meta.enum,(f,y)=>(e.openBlock(),e.createBlock(d,{class:"v__text-left",span:e.unref(t).span,key:y},{default:e.withCtx(()=>[e.createVNode(c,{value:f.value||f,disabled:f.disabled||!1},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(f.label||f),1)]),_:2},1032,["value","disabled"])]),_:2},1032,["span"]))),128))]),_:1})]),_:1},8,["value","disabled"])):(e.openBlock(),e.createBlock(p,e.mergeProps({key:0,class:"v__checkbox",value:e.unref(l),"onUpdate:value":u[0]||(u[0]=f=>e.isRef(l)?l.value=f:null)},e.unref(i),{disabled:n.meta.readOnly,options:n.meta.enum,onChange:m}),null,16,["value","disabled","options"]))]),_:1},8,["id","meta"])}}}),Oe=e.defineComponent({__name:"Date",props:{id:null,meta:null},setup(n){const o=n,r=e.inject("state"),{appContext:s}=e.getCurrentInstance(),a=new $(s,r,o.id,o.meta);let i={},t={};if(a.ui.value.type==="range"){const{bindings:c}=B(Object.keys(N.RangePicker.props),a.ui);i=c}else{const{bindings:c}=B(Object.keys(N.DatePicker.props),a.ui);t=c}const l=e.computed(()=>a.ui.value||{}),m=e.computed({get(){return a.value},set(c){a.value=c}});function g(){l.value.change&&l.value.change(e.unref(m))}function u(c){l.value.ok&&l.value.ok(c)}function p(c,d,h){l.value.calendarChange&&l.value.calendarChange(c,d,h)}return(c,d)=>{const h=e.resolveComponent("a-range-picker"),f=e.resolveComponent("a-date-picker");return e.openBlock(),e.createBlock(S,{id:n.id,meta:n.meta},{default:e.withCtx(()=>[e.unref(l).type==="range"?(e.openBlock(),e.createBlock(h,e.mergeProps({key:0,class:"v__date",value:e.unref(m),"onUpdate:value":d[0]||(d[0]=y=>e.isRef(m)?m.value=y:null)},e.unref(i),{disabled:n.meta.readOnly,onCalendarChange:p,onOk:u,onChange:g}),e.createSlots({_:2},[e.unref(l).slotNameOfSuffixIcon?{name:"suffixIcon",fn:e.withCtx(()=>[e.renderSlot(c.$slots,e.unref(l).slotNameOfSuffixIcon)]),key:"0"}:void 0]),1040,["value","disabled"])):e.createCommentVNode("",!0),e.unref(l).type!=="range"?(e.openBlock(),e.createBlock(f,e.mergeProps({key:1,class:"v__date",value:e.unref(m),"onUpdate:value":d[1]||(d[1]=y=>e.isRef(m)?m.value=y:null)},e.unref(t),{disabled:n.meta.readOnly,onOk:u,onChange:g}),e.createSlots({_:2},[e.unref(l).slotNameOfSuffixIcon?{name:"suffixIcon",fn:e.withCtx(()=>[e.renderSlot(c.$slots,e.unref(l).slotNameOfSuffixIcon)]),key:"0"}:void 0]),1040,["value","disabled"])):e.createCommentVNode("",!0)]),_:3},8,["id","meta"])}}}),Ne=e.defineComponent({__name:"Time",props:{id:null,meta:null},setup(n){const o=n,r=e.inject("state"),{appContext:s}=e.getCurrentInstance(),a=new $(s,r,o.id,o.meta);let i={},t={};if(a.ui.value.type==="range"){const{bindings:c}=B(Object.keys(N.TimeRangePicker.props),a.ui);i=c}else{const{bindings:c}=B(Object.keys(N.TimePicker.props),a.ui);t=c}const l=e.computed(()=>a.ui.value||{}),m=e.computed({get(){return a.value},set(c){a.value=c}});function g(c,d){l.value.change&&l.value.change(c,d)}function u(c){l.value.ok&&l.value.ok(c)}function p(c,d,h){l.value.calendarChange&&l.value.calendarChange(c,d,h)}return(c,d)=>{const h=e.resolveComponent("a-time-range-picker"),f=e.resolveComponent("a-time-picker");return e.openBlock(),e.createBlock(S,{id:n.id,meta:n.meta},{default:e.withCtx(()=>[e.unref(l).type==="range"?(e.openBlock(),e.createBlock(h,e.mergeProps({key:0,class:"v__time",value:e.unref(m),"onUpdate:value":d[0]||(d[0]=y=>e.isRef(m)?m.value=y:null),open:e.unref(l).open,"onUpdate:open":d[1]||(d[1]=y=>e.unref(l).open=y)},e.unref(i),{disabled:n.meta.readOnly,onCalendarChange:p,onOk:u,onChange:g}),e.createSlots({_:2},[e.unref(l).slotNameOfRenderExtraFooter?{name:"renderExtraFooter",fn:e.withCtx(()=>[e.renderSlot(c.$slots,e.unref(l).slotNameOfRenderExtraFooter)]),key:"0"}:void 0,e.unref(l).slotNameOfSuffixIcon?{name:"suffixIcon",fn:e.withCtx(()=>[e.renderSlot(c.$slots,e.unref(l).slotNameOfSuffixIcon)]),key:"1"}:void 0,e.unref(l).slotNameOfClearIcon?{name:"clearIcon",fn:e.withCtx(()=>[e.renderSlot(c.$slots,e.unref(l).slotNameOfClearIcon)]),key:"2"}:void 0]),1040,["value","open","disabled"])):(e.openBlock(),e.createBlock(f,e.mergeProps({key:1,class:"v__time",value:e.unref(m),"onUpdate:value":d[2]||(d[2]=y=>e.isRef(m)?m.value=y:null),open:e.unref(l).open,"onUpdate:open":d[3]||(d[3]=y=>e.unref(l).open=y)},e.unref(t),{disabled:n.meta.readOnly,onOk:u,onChange:g}),e.createSlots({_:2},[e.unref(l).slotNameOfRenderExtraFooter?{name:"renderExtraFooter",fn:e.withCtx(()=>[e.renderSlot(c.$slots,e.unref(l).slotNameOfRenderExtraFooter)]),key:"0"}:void 0,e.unref(l).slotNameOfSuffixIcon?{name:"suffixIcon",fn:e.withCtx(()=>[e.renderSlot(c.$slots,e.unref(l).slotNameOfSuffixIcon)]),key:"1"}:void 0,e.unref(l).slotNameOfClearIcon?{name:"clearIcon",fn:e.withCtx(()=>[e.renderSlot(c.$slots,e.unref(l).slotNameOfClearIcon)]),key:"2"}:void 0]),1040,["value","open","disabled"]))]),_:3},8,["id","meta"])}}}),Y=e.defineComponent({__name:"Number",props:{id:null,meta:null},setup(n){const o=n,r=e.inject("state"),{appContext:s}=e.getCurrentInstance(),a=new $(s,r,o.id,o.meta),{bindings:i}=B(Object.keys(N.InputNumber.props),a.ui),t=e.computed(()=>a.ui.value||{}),l=e.computed({get(){return a.value},set(f){a.value=f}});let m=e.ref(-1/0),g=e.ref(1/0),u=e.ref(1),p=e.ref(f=>f),c=e.ref(f=>f);d();function d(){const{minimum:f,exclusiveMinimum:y,maximum:V,exclusiveMaximum:_,multipleOf:C,type:x}=a.meta.value;u.value=C||1,typeof f<"u"&&(m.value=y?f+u.value:f),typeof V<"u"&&(g.value=_?V-u.value:V),x==="integer"&&(m.value=Math.trunc(m.value),g.value=Math.trunc(g.value),u.value=Math.trunc(u.value)),t.value.prefix!=null&&(t.value.formatter=k=>k==null?"":`${t.value.prefix} ${k}`,t.value.parser=k=>k.replace(`${t.value.prefix} `,"")),t.value.unit!=null&&(t.value.formatter=k=>k==null?"":`${k} ${t.value.unit}`,t.value.parser=k=>k.replace(` ${t.value.unit}`,"")),t.value.formatter&&(p.value=t.value.formatter),t.value.parser&&(c.value=t.value.parser)}function h(f){l.value=a.meta.value.type===j.Integer?Math.floor(f):f,t.value.change&&t.value.change(e.unref(l))}return(f,y)=>{const V=e.resolveComponent("a-input-number");return e.openBlock(),e.createBlock(S,{id:n.id,meta:n.meta},{default:e.withCtx(()=>[e.createVNode(V,e.mergeProps({class:"v__number",id:n.id,value:e.unref(l),"onUpdate:value":y[0]||(y[0]=_=>e.isRef(l)?l.value=_:null)},e.unref(i),{disabled:n.meta.readOnly,min:e.unref(m),max:e.unref(g),step:e.unref(u),formatter:e.unref(p),parser:e.unref(c),class:{"v__input-number-hidden-step":e.unref(t).hideStep},onChange:y[1]||(y[1]=_=>h(_))}),e.createSlots({_:2},[e.unref(t).slotNameOfAddonAfter?{name:"addonAfter",fn:e.withCtx(()=>[e.renderSlot(f.$slots,e.unref(t).slotNameOfAddonAfter)]),key:"0"}:void 0,e.unref(t).slotNameOfAddonBefore?{name:"addonBefore",fn:e.withCtx(()=>[e.renderSlot(f.$slots,e.unref(t).slotNameOfAddonBefore)]),key:"1"}:void 0,e.unref(t).slotNameOfPrefix?{name:"prefix",fn:e.withCtx(()=>[e.renderSlot(f.$slots,e.unref(t).slotNameOfPrefix)]),key:"2"}:void 0]),1040,["id","value","disabled","min","max","step","formatter","parser","class"])]),_:3},8,["id","meta"])}}});class Se extends P{constructor(r,s,a,i){super(r,s,a,i);b(this,"ids",e.ref([]));this.initValue()}setValue(){}initValue(){var r,s;if(((r=this._initMetaValue)==null?void 0:r.length)>0)this.value=this._initMetaValue;else if(((s=e.unref(this.meta).default)==null?void 0:s.length)>0){const a=e.unref(this.meta).default;a.forEach(()=>this.add(!1)),setTimeout(()=>{a.forEach((i,t)=>{const l=this.state.context.getContext(`${this.id}/${t}`);l.value=i})}),this.validate()}}get value(){return this.getPathValue(this.state.formData,this.id)||[]}set value(r){if(this.value.length===0&&(r==null?void 0:r.length)===0||!Array.isArray(r)&&r!=null)return;const s=U(r),a=e.unref(this.ids).length;for(let i=0;i<a;i++)this.remove(a-i-1,!1);s&&s.length&&(s.forEach(()=>this.add(!1)),e.nextTick(()=>{s.forEach((i,t)=>{const l=this.state.context.getContext(`${this.id}/${t}`);l.value=i})})),this.validate()}validate(){return this.state.validate.runValidationFormItem(this)}getPathValue(r,s){const a=s.split("/").filter(t=>t);let i=U(r);for(let t=0;t<a.length;t++){const l=a[t];i=i[l]}return i}getEmptyData(){const r={},s=e.unref(this.meta).items.properties;return Object.keys(s).forEach(a=>{switch(s[a].type){case"object":r[a]={};break;case"array":r[a]=[];break;default:r[a]=void 0;break}}),r}add(r=!0){const s=`${this.id}/${e.unref(this.ids).length}`,a=this.getEmptyData();return this.state.updateObjProp(this.state.formData,s,a),this.ids.value.push({key:W()}),r&&this.validate(),s}remove(r,s=!0){this.ids.value.splice(r,1);const a=this.id.split("/").filter(l=>!!l);a.reduce((l,m,g)=>(g===a.length-1&&l[m].splice(r,1),l[m]),this.state.formData);const i=[];for(const l of this.state.context.getMap().keys())new RegExp(`^/?${this.id}/`).test(l)&&i.push(l);for(let l=r+1;l<e.unref(this.ids).length+1;l++){const m=new RegExp(`^(/?${this.id}/)${l}`);i.filter(g=>m.test(g)).forEach(g=>{const u=this.state.context.getContext(g),p=g.replace(m,(c,d)=>`${d}${l-1}`);if(u.id=p,u.childMetaPairs){const c=u.buildChildMetaPairs(p,e.unref(u.meta));u.childMetaPairs.forEach((d,h)=>{d.key=c[h].key})}this.state.context.addContext(p,u)})}const t=new RegExp(`^/?${this.id}/${e.unref(this.ids).length}`);i.filter(l=>t.test(l)).forEach(l=>{this.state.context.removeContext(l)}),s&&this.validate()}}const Be={class:"v__optional"},Ve={class:"v__array-add"},Ie={class:"ant-form-item-control"},$e=["onClick"],Ee={key:0,class:"ant-form-item-extra"},je={key:1,class:"ant-form-item-explain-error"},Pe=e.defineComponent({__name:"Array",props:{id:null,meta:null},setup(n){const o=n,r=e.inject("state"),{globalProperties:s}=z(),{appContext:a}=e.getCurrentInstance(),i=new Se(a,r,o.id,o.meta),t=R(a),l=e.computed(()=>e.unref(i.ui)||{}),m=e.computed(()=>Object.assign({},r.ui,o.meta.ui).optionalHelp);e.computed({get(){return i.value},set(C){i.value=C||[]}});const g=e.computed({get(){return e.unref(i.error)},set(C){i.error.value=C}}),u=e.computed(()=>o.meta.readOnly),p=e.computed(()=>e.unref(u)||o.meta.maxItems!=null&&e.unref(i.ids).length>=o.meta.maxItems),c=e.computed(()=>{const C=o.meta.minItems;return!(e.unref(u)||C!=null&&e.unref(i.ids).length<=C)}),d=e.ref(8),h=e.ref("");e.onMounted(()=>{var E;t.on(`${M}-${r._formId}`,f);const{grid:C,removable:x,removeTitle:k}=e.unref(l);d.value=(E=C==null?void 0:C.arraySpan)!=null?E:8,h.value=x===!1?null:k}),e.onBeforeUnmount(()=>{t.off(`${M}-${r._formId}`,f)});function f(C){C.id===o.id&&(g.value=C.error?C.error.message:void 0)}function y(C){return`${o.id}/${C}`}function V(){var x,k;const C=i.add();(k=(x=e.unref(l)).add)==null||k.call(x,C)}function _(C){var x,k;i.remove(C),(k=(x=e.unref(l)).remove)==null||k.call(x,C)}return(C,x)=>{const k=e.resolveComponent("a-tooltip"),E=e.resolveComponent("a-button"),D=e.resolveComponent("a-col"),A=e.resolveComponent("delete-outlined"),q=e.resolveComponent("a-card"),X=e.resolveComponent("a-row"),ve=e.resolveComponent("a-form-item");return e.openBlock(),e.createBlock(ve,null,{default:e.withCtx(()=>[e.createVNode(X,null,{default:e.withCtx(()=>[n.meta.title?(e.openBlock(),e.createBlock(D,{key:0,class:"ant-form-item-label",span:e.unref(l).spanLabel},{default:e.withCtx(()=>[e.createElementVNode("label",{class:e.normalizeClass({"ant-form-item-required":e.unref(l).showRequired})},[e.createTextVNode(e.toDisplayString(n.meta.title)+" ",1),e.createElementVNode("span",Be,[e.createTextVNode(e.toDisplayString(e.unref(l).optional)+" ",1),e.unref(m)?(e.openBlock(),e.createBlock(k,{key:0,title:e.unref(m).text,placement:e.unref(m).placement,trigger:e.unref(m).trigger,overlayStyle:e.unref(m).overlayStyle,overlayClassName:e.unref(m).overlayClassName,mouseEnterDelay:e.unref(m).mouseEnterDelay,mouseLeaveDelay:e.unref(m).mouseLeaveDelay},{default:e.withCtx(()=>[e.unref(m).icon?(e.openBlock(),e.createBlock(e.resolveDynamicComponent(e.unref(s).$antIcons[e.unref(m).icon]),{key:0})):e.createCommentVNode("",!0)]),_:1},8,["title","placement","trigger","overlayStyle","overlayClassName","mouseEnterDelay","mouseLeaveDelay"])):e.createCommentVNode("",!0)])],2),e.createElementVNode("div",Ve,[e.createVNode(E,{type:e.unref(l).addType||"dashed",disabled:e.unref(p),onClick:V},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(e.unref(l).addTitle||"\u6DFB\u52A0"),1)]),_:1},8,["type","disabled"])])]),_:1},8,["span"])):e.createCommentVNode("",!0),e.createVNode(D,{class:"ant-form-item-control-wrapper",span:e.unref(l).spanControl,offset:e.unref(l).offsetControl},{default:e.withCtx(()=>[e.createElementVNode("div",Ie,[e.createVNode(X,{class:"v__array-container"},{default:e.withCtx(()=>[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(i).ids.value,(et,Z)=>(e.openBlock(),e.createBlock(D,{key:et.key,span:d.value,class:"v__array-item"},{default:e.withCtx(()=>[e.createVNode(q,null,{default:e.withCtx(()=>[e.createVNode(L,{id:y(Z),meta:n.meta.items},null,8,["id","meta"]),e.unref(c)?(e.openBlock(),e.createElementBlock("span",{key:0,class:"v__array-remove",onClick:lt=>_(Z)},[e.createVNode(A)],8,$e)):e.createCommentVNode("",!0)]),_:2},1024)]),_:2},1032,["span"]))),128))]),_:1}),n.meta.description?(e.openBlock(),e.createElementBlock("div",Ee,e.toDisplayString(n.meta.description),1)):e.createCommentVNode("",!0),e.unref(g)?(e.openBlock(),e.createElementBlock("div",je,e.toDisplayString(e.unref(g)),1)):e.createCommentVNode("",!0)])]),_:1},8,["span","offset"])]),_:1})]),_:1})}}}),Re={class:"v__label-text"},Me=["innerHTML"],De=["textContent"],Ae=["innerHTML"],Fe=e.defineComponent({__name:"Text",props:{id:null,meta:null},setup(n){const o=n,r=e.inject("state"),{appContext:s}=e.getCurrentInstance(),a=new $(s,r,o.id,o.meta),i=e.computed(()=>a.ui.value||{}),t=e.computed(()=>r.layout.value==="vertical"||r.layout.value==="inline"?void 0:{span:i.value.spanLabel}),l=e.computed(()=>r.layout.value==="vertical"||r.layout.value==="inline"?void 0:{span:i.value.spanControl,offset:i.value.offsetControl||0}),m=e.computed(()=>le(e.unref(i).text)?e.unref(i).text():e.unref(i).text);return(g,u)=>{const p=e.resolveComponent("a-form-item");return e.openBlock(),e.createElementBlock("div",null,[e.createVNode(p,{labelCol:e.unref(t),wrapperCol:e.unref(l),class:e.normalizeClass({"no-label":!n.meta.title})},e.createSlots({default:e.withCtx(()=>[e.unref(i).slotNameOfDefault?e.renderSlot(g.$slots,e.unref(i).slotNameOfDefault,{key:0},void 0,!0):(e.openBlock(),e.createElementBlock(e.Fragment,{key:1},[e.unref(i).html?(e.openBlock(),e.createElementBlock("span",{key:0,innerHTML:e.unref(i).html,class:"v__content-text"},null,8,Me)):(e.openBlock(),e.createElementBlock("span",{key:1,textContent:e.toDisplayString(e.unref(m)),class:"v__content-text"},null,8,De))],64))]),_:2},[n.meta.title?{name:"label",fn:e.withCtx(()=>[e.createElementVNode("span",Re,e.toDisplayString(n.meta.title),1)]),key:"0"}:void 0,n.meta.description?{name:"extra",fn:e.withCtx(()=>[e.createElementVNode("div",{innerHTML:n.meta.description},null,8,Ae)]),key:"1"}:void 0]),1032,["labelCol","wrapperCol","class"])])}}}),ot="",Q=(n,o)=>{const r=n.__vccOpts||n;for(const[s,a]of o)r[s]=a;return r},Te=Q(Fe,[["__scopeId","data-v-c98847ae"]]),Le=e.defineComponent({__name:"Textarea",props:{id:null,meta:null},setup(n){const o=n,r=e.inject("state"),{appContext:s}=e.getCurrentInstance(),a=new $(s,r,o.id,o.meta),{bindings:i}=B(Object.keys(N.Textarea.props),a.ui),t=e.computed(()=>a.ui.value||{}),l=e.computed({get(){return a.value},set(d){a.value=d}}),m=e.ref(!0);e.onMounted(()=>{e.unref(t).autoSize!=null&&(m.value=e.unref(t).autoSize)});function g(){var d,h;(h=(d=e.unref(t)).change)==null||h.call(d,e.unref(l))}function u(d){var h,f;(f=(h=e.unref(t)).focus)==null||f.call(h,d)}function p(d){var h,f;(f=(h=e.unref(t)).blur)==null||f.call(h,d)}function c(d){var h,f;(f=(h=e.unref(t)).pressEnter)==null||f.call(h,d)}return(d,h)=>{const f=e.resolveComponent("a-textarea");return e.openBlock(),e.createBlock(S,{id:n.id,meta:n.meta},{default:e.withCtx(()=>[e.createVNode(f,e.mergeProps(e.unref(i),{autoSize:m.value,defaultValue:n.meta.defaultValue,disabled:n.meta.readOnly,maxlength:n.meta.maxLength,value:e.unref(l),"onUpdate:value":h[0]||(h[0]=y=>e.isRef(l)?l.value=y:null),onChange:g,onFocus:u,onBlur:p,onPressEnter:c}),null,16,["autoSize","defaultValue","disabled","maxlength","value"])]),_:1},8,["id","meta"])}}});class H extends P{constructor(o,r,s,a){super(o,r,s,a),this.initValue()}initValue(){this._initMetaValue?this.value=this._initMetaValue:e.unref(this.meta).default&&(this.value=e.unref(this.meta).default)}setValue(o){switch(this.type){case"slider":this._value.value=re(o)||J(o)?o:void 0;break;default:this._value.value=o||void 0;break}}}const Ue=e.defineComponent({__name:"Slider",props:{id:null,meta:null},setup(n){const o=n,r=e.inject("state"),{appContext:s}=e.getCurrentInstance(),a=new H(s,r,o.id,o.meta),{bindings:i}=B(Object.keys(N.Slider.props),a.ui),t=e.computed(()=>a.ui.value||{}),l=e.computed({get(){return a.value},set(c){t.value.range?a.value=c||[]:a.value=J(c)?c:void 0}}),m=e.computed(()=>t.value.tipFormatter===null);function g(c){const{tipFormatter:d}=t.value;return d?d(c):`${c}`}function u(c){var d,h;(h=(d=e.unref(t)).change)==null||h.call(d,c)}function p(c){var d,h;(h=(d=e.unref(t)).afterChange)==null||h.call(d,c)}return(c,d)=>{const h=e.resolveComponent("a-slider");return e.openBlock(),e.createBlock(S,{id:n.id,meta:n.meta},{default:e.withCtx(()=>[e.createVNode(h,e.mergeProps(e.unref(i),{disabled:n.meta.readOnly,min:n.meta.minimum||0,max:n.meta.maximum||100,step:n.meta.multipleOf||1,tipFormatter:e.unref(m)?null:g,value:e.unref(l),"onUpdate:value":d[0]||(d[0]=f=>e.isRef(l)?l.value=f:null),onChange:u,onAfterChange:p}),e.createSlots({_:2},[e.unref(t).slotNameOfMark?{name:"mark",fn:e.withCtx(f=>[e.renderSlot(c.$slots,e.unref(t).slotNameOfMark,e.normalizeProps(e.guardReactiveProps(f)))]),key:"0"}:void 0]),1040,["disabled","min","max","step","tipFormatter","value"])]),_:3},8,["id","meta"])}}}),ze=e.defineComponent({__name:"Rate",props:{id:null,meta:null},setup(n){const o=n,r=e.inject("state"),{appContext:s}=e.getCurrentInstance(),a=new H(s,r,o.id,o.meta),{bindings:i}=B(Object.keys(N.Rate.props),a.ui),t=e.computed(()=>a.ui.value||{}),l=e.computed({get(){return a.value},set(u){a.value=u}});function m(u){var p,c;(c=(p=e.unref(t)).change)==null||c.call(p,u)}function g(u){var p,c;(c=(p=e.unref(t)).hoverChange)==null||c.call(p,u)}return(u,p)=>{const c=e.resolveComponent("a-rate");return e.openBlock(),e.createBlock(S,{id:n.id,meta:n.meta},{default:e.withCtx(()=>[e.createVNode(c,e.mergeProps(e.unref(i),{disabled:n.meta.readOnly,count:n.meta.maximum||5,value:e.unref(l),"onUpdate:value":p[0]||(p[0]=d=>e.isRef(l)?l.value=d:null),onChange:m,onHoverChange:g}),e.createSlots({_:2},[e.unref(t).slotNameOfCharacter?{name:"character",fn:e.withCtx(()=>[e.renderSlot(u.$slots,e.unref(t).slotNameOfCharacter)]),key:"0"}:void 0]),1040,["disabled","count","value"])]),_:3},8,["id","meta"])}}}),He=e.defineComponent({__name:"Tag",props:{id:null,meta:null},setup(n){const o=n,r=e.inject("state"),{appContext:s}=e.getCurrentInstance(),a=new H(s,r,o.id,o.meta),i=e.ref([]),t=e.computed(()=>a.ui.value||{}),l=e.computed({get(){return a.value},set(p){t.value.range?a.value=p||[]:a.value=p}});e.watch(()=>e.unref(a.meta).enum,u,{immediate:!0});function m(p,c){var d,h,f,y;p.disabled||(p.checked=c,g(),(h=(d=e.unref(t)).checkedChange)==null||h.call(d,c),(y=(f=e.unref(t)).change)==null||y.call(f,e.toRaw(e.unref(l))))}function g(){const p=e.unref(i).filter(c=>c.checked).map(c=>c.value);l.value=p.length?p:void 0}function u(p){let c=e.unref(p);c==null||!Array.isArray(c)||c.length===0||(typeof c[0]!="object"&&(c=c.map(d=>({label:d,value:d}))),c.forEach(d=>{d.checked=(l.value||[]).indexOf(d.value)>-1}),c.forEach(d=>d.disabled=o.meta.readOnly),i.value=c)}return(p,c)=>{const d=e.resolveComponent("a-checkable-tag");return e.openBlock(),e.createBlock(S,{id:n.id,meta:n.meta},{default:e.withCtx(()=>[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(i.value,h=>(e.openBlock(),e.createBlock(d,{key:h.value,class:e.normalizeClass({disabled:h.disabled}),checked:h.checked,onChange:f=>m(h,f)},{default:e.withCtx(()=>[e.createElementVNode("span",null,e.toDisplayString(h.label),1)]),_:2},1032,["class","checked","onChange"]))),128))]),_:1},8,["id","meta"])}}}),at="",qe=Q(He,[["__scopeId","data-v-56211880"]]),Ke=e.defineComponent({__name:"Cascader",props:{id:null,meta:null},setup(n){const o=n,r=e.inject("state"),{appContext:s}=e.getCurrentInstance(),a=new $(s,r,o.id,o.meta),{bindings:i}=B(Object.keys(N.Cascader.props),a.ui),t=e.computed(()=>a.ui.value||{}),l=e.computed({get(){return a.value},set(d){a.value=d}});function m(d,h){var f,y;(y=(f=e.unref(t)).change)==null||y.call(f,d,h)}function g(d){var h,f;(f=(h=e.unref(t)).dropdownVisibleChange)==null||f.call(h,d)}function u(d){var h,f;(f=(h=e.unref(t)).search)==null||f.call(h,d)}function p(d){var h,f;(f=(h=e.unref(t)).blur)==null||f.call(h,d)}function c(d){var h,f;(f=(h=e.unref(t)).focus)==null||f.call(h,d)}return(d,h)=>{const f=e.resolveComponent("a-cascader");return e.openBlock(),e.createBlock(S,{id:n.id,meta:n.meta},{default:e.withCtx(()=>[e.createVNode(f,e.mergeProps(e.unref(i),{disabled:n.meta.readOnly,options:n.meta.enum,value:e.unref(l),"onUpdate:value":h[0]||(h[0]=y=>e.isRef(l)?l.value=y:null),onChange:m,onDropdownVisibleChange:g,onSearch:u,onBlur:p,onFocus:c}),e.createSlots({_:2},[e.unref(t).slotNameOfDefault?{name:"default",fn:e.withCtx(()=>[e.createElementVNode("span",null,[e.renderSlot(d.$slots,e.unref(t).slotNameOfDefault)])]),key:"0"}:void 0,e.unref(t).slotNameOfSuffixIcon?{name:"suffixIcon",fn:e.withCtx(()=>[e.renderSlot(d.$slots,e.unref(t).slotNameOfSuffixIcon)]),key:"1"}:void 0,e.unref(t).slotNameOfDisplayRender?{name:"displayRender",fn:e.withCtx(y=>[e.renderSlot(d.$slots,e.unref(t).slotNameOfDisplayRender,e.normalizeProps(e.guardReactiveProps(y)))]),key:"2"}:void 0]),1040,["disabled","options","value"])]),_:3},8,["id","meta"])}}}),Ge=e.defineComponent({__name:"Radio",props:{id:null,meta:null},setup(n){const o=n,r=e.inject("state"),{appContext:s}=e.getCurrentInstance(),a=new $(s,r,o.id,o.meta),{bindings:i}=B(Object.keys(N.RadioGroup.props),a.ui),t=e.computed(()=>a.ui.value||{}),l=e.computed({get(){return a.value},set(g){a.value=g}});function m(){t.value.change&&t.value.change(e.unref(l))}return(g,u)=>{const p=e.resolveComponent("a-radio-group");return e.openBlock(),e.createBlock(S,{id:n.id,meta:n.meta},{default:e.withCtx(()=>[e.createVNode(p,e.mergeProps({class:{"v__radio-vertical":e.unref(t).direction==="vertical"}},e.unref(i),{value:e.unref(l),"onUpdate:value":u[0]||(u[0]=c=>e.isRef(l)?l.value=c:null),disabled:n.meta.readOnly,onChange:m}),null,16,["class","value","disabled"])]),_:1},8,["id","meta"])}}}),We=e.defineComponent({__name:"Select",props:{id:null,meta:null},setup(n){const o=n,r=e.inject("state"),{appContext:s}=e.getCurrentInstance(),a=new $(s,r,o.id,o.meta),{bindings:i}=B(Object.keys(N.Select.props),a.ui),t=e.computed(()=>a.ui.value||{}),l=e.computed({get(){return a.value},set(C){a.value=C}});function m(C,x){e.unref(t).change&&e.unref(t).change(C,x)}function g(){e.unref(t).blur&&e.unref(t).blur()}function u(C,x){e.unref(t).deselect&&e.unref(t).deselect(C,x)}function p(C){e.unref(t).dropdownVisibleChange&&e.unref(t).dropdownVisibleChange(C)}function c(){e.unref(t).focus&&e.unref(t).focus()}function d(){e.unref(t).inputKeyDown&&e.unref(t).inputKeyDown()}function h(){e.unref(t).mouseenter&&e.unref(t).mouseenter()}function f(){e.unref(t).mouseleave&&e.unref(t).mouseleave()}function y(){e.unref(t).popupScroll&&e.unref(t).popupScroll()}function V(C){e.unref(t).search&&e.unref(t).search(C)}function _(C,x){e.unref(t).select&&e.unref(t).select(C,x)}return(C,x)=>{const k=e.resolveComponent("a-select");return e.openBlock(),e.createBlock(S,{id:n.id,meta:n.meta},{default:e.withCtx(()=>[e.createVNode(k,e.mergeProps({value:e.unref(l),"onUpdate:value":x[0]||(x[0]=E=>e.isRef(l)?l.value=E:null)},e.unref(i),{disabled:n.meta.readOnly,onBlur:g,onDeselect:u,onFocus:c,onInputKeydown:d,onMouseenter:h,onMouseleave:f,onPopupScroll:y,onSearch:V,onSelect:_,onDropdownVisibleChange:p,onChange:m}),e.createSlots({default:e.withCtx(()=>[e.unref(t).slotNameOfSelectDefault?e.renderSlot(C.$slots,e.unref(t).slotNameOfSelectDefault,{key:0}):e.createCommentVNode("",!0)]),_:2},[e.unref(t).slotNameOfClearIcon?{name:"clearIcon",fn:e.withCtx(()=>[e.renderSlot(C.$slots,e.unref(t).slotNameOfClearIcon)]),key:"0"}:void 0,e.unref(t).slotNameOfDropdownRender?{name:"dropdownRender",fn:e.withCtx(()=>[e.renderSlot(C.$slots,e.unref(t).slotNameOfDropdownRender)]),key:"1"}:void 0,e.unref(t).slotNameOfMaxTagPlaceholder?{name:"maxTagPlaceholder",fn:e.withCtx(()=>[e.renderSlot(C.$slots,e.unref(t).slotNameOfMaxTagPlaceholder)]),key:"2"}:void 0,e.unref(t).slotNameOfMenuItemSelectedIcon?{name:"menuItemSelectedIcon",fn:e.withCtx(()=>[e.renderSlot(C.$slots,e.unref(t).slotNameOfMenuItemSelectedIcon)]),key:"3"}:void 0,e.unref(t).slotNameOfNotFoundContent?{name:"notFoundContent",fn:e.withCtx(()=>[e.renderSlot(C.$slots,e.unref(t).slotNameOfNotFoundContent)]),key:"4"}:void 0,e.unref(t).slotNameOfOption?{name:"option",fn:e.withCtx(E=>[e.renderSlot(C.$slots,e.unref(t).slotNameOfOption,e.normalizeProps(e.guardReactiveProps(E)))]),key:"5"}:void 0,e.unref(t).slotNameOfPlaceholder?{name:"placeholder",fn:e.withCtx(()=>[e.renderSlot(C.$slots,e.unref(t).slotNameOfPlaceholder)]),key:"6"}:void 0,e.unref(t).slotNameOfRemoveIcon?{name:"removeIcon",fn:e.withCtx(()=>[e.renderSlot(C.$slots,e.unref(t).slotNameOfRemoveIcon)]),key:"7"}:void 0,e.unref(t).slotNameOfSuffixIcon?{name:"suffixIcon",fn:e.withCtx(()=>[e.renderSlot(C.$slots,e.unref(t).slotNameOfSuffixIcon)]),key:"8"}:void 0,e.unref(t).slotNameOfTagRender?{name:"tagRender",fn:e.withCtx(()=>[e.renderSlot(C.$slots,e.unref(t).slotNameOfTagRender)]),key:"9"}:void 0]),1040,["value","disabled"])]),_:3},8,["id","meta"])}}});function w(n,o,r){n.component(o,r)}function Je(n){w(n,"v-object",ye),w(n,"v-string",_e),w(n,"v-boolean",ke),w(n,"v-array",Pe),w(n,"v-autocomplete",be),w(n,"v-checkbox",we),w(n,"v-date",Oe),w(n,"v-number",Y),w(n,"v-integer",Y),w(n,"v-time",Ne),w(n,"v-text",Te),w(n,"v-radio",Ge),w(n,"v-textarea",Le),w(n,"v-slider",Ue),w(n,"v-rate",ze),w(n,"v-tag",qe),w(n,"v-select",We),w(n,"v-cascader",Ke)}const Ye=[fe,S];function Qe(n){Ye.forEach(o=>{n.component(o.name,o)}),Je(n)}const Xe={installFormly:Qe},Ze={install:function(n,o){if(n.config.globalProperties.emitter=ee.default(),!o.lib||o.lib==="ant-design-vue")Xe.installFormly(n);else throw new Error("Unsupport lib");return n.config.globalProperties.$VFORMLY_OPTIONS=o,n}};O.default=Ze,Object.defineProperties(O,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
